/*! For license information please see main.2eb65c77.js.LICENSE.txt */
(()=>{var e={935:(e,t,n)=>{e=n.nmd(e),function(t,r,a,i,s){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:{},l="function"==typeof o[i]&&o[i],c=l.cache||{},u="function"==typeof e.require&&e.require.bind(e);function d(e,n){if(!c[e]){if(!t[e]){var r="function"==typeof o[i]&&o[i];if(!n&&r)return r(e,!0);if(l)return l(e,!0);if(u&&"string"==typeof e)return u(e);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}h.resolve=function(n){var r=t[e][1][n];return null!=r?r:n},h.cache={};var s=c[e]=new d.Module(e);t[e][0].call(s.exports,h,s,s.exports,this)}return c[e].exports;function h(e){var t=h.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=t,d.cache=c,d.parent=l,d.register=function(e,n){t[e]=[function(e,t){t.exports=n},{}]},Object.defineProperty(d,"root",{get:function(){return o[i]}}),o[i]=d;for(var h=0;h<r.length;h++)d(r[h]);if(a){var f=d(a);e.exports=f}}({abjMI:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("bundle-text:./style/index.less"),i=r.interopDefault(a),s=e("option-validator"),o=r.interopDefault(s),l=e("./utils/emitter"),c=r.interopDefault(l),u=e("./utils"),d=e("./scheme"),h=r.interopDefault(d),f=e("./config"),p=r.interopDefault(f),m=e("./template"),g=r.interopDefault(m),v=e("./i18n"),y=r.interopDefault(v),b=e("./player"),E=r.interopDefault(b),T=e("./control"),w=r.interopDefault(T),S=e("./contextmenu"),k=r.interopDefault(S),x=e("./info"),L=r.interopDefault(x),R=e("./subtitle"),A=r.interopDefault(R),C=e("./events"),I=r.interopDefault(C),D=e("./hotkey"),_=r.interopDefault(D),P=e("./layer"),O=r.interopDefault(P),M=e("./loading"),F=r.interopDefault(M),N=e("./notice"),B=r.interopDefault(N),U=e("./mask"),j=r.interopDefault(U),H=e("./icons"),z=r.interopDefault(H),G=e("./setting"),V=r.interopDefault(G),K=e("./storage"),W=r.interopDefault(K),Y=e("./plugins"),q=r.interopDefault(Y);let $=0;const X=[];class Z extends c.default{constructor(e,t){super(),this.id=++$;const n=u.mergeDeep(Z.option,e);if(n.container=e.container,this.option=(0,o.default)(n,h.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new(0,g.default)(this),this.events=new(0,I.default)(this),this.storage=new(0,W.default)(this),this.icons=new(0,z.default)(this),this.i18n=new(0,y.default)(this),this.notice=new(0,B.default)(this),this.player=new(0,E.default)(this),this.layers=new(0,O.default)(this),this.controls=new(0,w.default)(this),this.contextmenu=new(0,k.default)(this),this.subtitle=new(0,A.default)(this),this.info=new(0,L.default)(this),this.loading=new(0,F.default)(this),this.hotkey=new(0,_.default)(this),this.mask=new(0,j.default)(this),this.setting=new(0,V.default)(this),this.plugins=new(0,q.default)(this),"function"==typeof t&&this.on("ready",(()=>t.call(this,this))),Z.DEBUG){const e=e=>console.log("[ART.".concat(this.id,"] -> ").concat(e));e("Version@"+Z.version),e("Env@"+Z.env),e("Build@"+Z.build);for(let t=0;t<p.default.events.length;t++)this.on("video:"+p.default.events[t],(t=>e("Event@"+t.type)))}X.push(this)}static get instances(){return X}static get version(){return"5.1.0"}static get env(){return"production"}static get build(){return"2023-12-23 12:00:08"}static get config(){return p.default}static get utils(){return u}static get scheme(){return h.default}static get Emitter(){return c.default}static get validator(){return o.default}static get kindOf(){return o.default.kindOf}static get html(){return g.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:e=>e},moreVideoAttr:{controls:!1,preload:u.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.events.destroy(),this.template.destroy(e),X.splice(X.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}n.default=Z,Z.DEBUG=!1,Z.CONTEXTMENU=!0,Z.NOTICE_TIME=2e3,Z.SETTING_WIDTH=250,Z.SETTING_ITEM_WIDTH=200,Z.SETTING_ITEM_HEIGHT=35,Z.RESIZE_TIME=200,Z.SCROLL_TIME=200,Z.SCROLL_GAP=50,Z.AUTO_PLAYBACK_MAX=10,Z.AUTO_PLAYBACK_MIN=5,Z.AUTO_PLAYBACK_TIMEOUT=3e3,Z.RECONNECT_TIME_MAX=5,Z.RECONNECT_SLEEP_TIME=1e3,Z.CONTROL_HIDE_TIME=3e3,Z.DBCLICK_TIME=300,Z.DBCLICK_FULLSCREEN=!0,Z.MOBILE_DBCLICK_PLAY=!0,Z.MOBILE_CLICK_PLAY=!1,Z.AUTO_ORIENTATION_TIME=200,Z.INFO_LOOP_TIME=1e3,Z.FAST_FORWARD_VALUE=3,Z.FAST_FORWARD_TIME=1e3,Z.TOUCH_MOVE_RATIO=.5,Z.VOLUME_STEP=.1,Z.SEEK_STEP=5,Z.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],Z.ASPECT_RATIO=["default","4:3","16:9"],Z.FLIP=["normal","horizontal","vertical"],Z.FULLSCREEN_WEB_IN_BODY=!1,Z.LOG_VERSION=!0,Z.USE_RAF=!1,u.isBrowser&&(window.Artplayer=Z,u.setStyleText("artplayer-style",i.default),setTimeout((()=>{Z.LOG_VERSION&&console.log("%c ArtPlayer %c ".concat(Z.version," %c https://artplayer.org"),"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")}),100))},{"bundle-text:./style/index.less":"kfOe8","option-validator":"bAWi2","./utils/emitter":"2bGVu","./utils":"h3rH9","./scheme":"AdvwB","./config":"9Xmqu","./template":"2gKYH","./i18n":"1AdeF","./player":"556MW","./control":"14IBq","./contextmenu":"7iUum","./info":"hD2Lg","./subtitle":"lum0D","./events":"1Epl5","./hotkey":"eTow4","./layer":"4fDoD","./loading":"fE0Sp","./notice":"9PuGy","./mask":"2etr0","./icons":"6dYSr","./setting":"bRHiA","./storage":"f2Thp","./plugins":"96ThS","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],kfOe8:[function(e,t,n){t.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#fff3;--art-hover-color:#fff3;--art-loaded-color:#fff3;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#00000080;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{-webkit-backdrop-filter:saturate(180%)blur(20px);backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{width:100%;height:100%;zoom:1;text-align:left;direction:ltr;user-select:none;box-sizing:border-box;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;outline:0;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{max-width:100%;vertical-align:top}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{-webkit-backdrop-filter:saturate(180%)blur(20px);backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;width:100%;height:100%;cursor:pointer;position:absolute;inset:0}.art-poster{z-index:11;width:100%;height:100%;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;width:100%;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;width:100%;height:100%;pointer-events:none;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;width:100%;height:100%;pointer-events:none;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;width:100%;height:100%;pointer-events:none;justify-content:center;align-items:center;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;width:100%;height:100%;pointer-events:none;justify-content:center;align-items:center;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;width:100%;height:100%;opacity:0;pointer-events:none;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{height:50%;width:100%;transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;width:100%;height:100%;width:0%;background-color:var(--art-hover-color);display:none;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;width:100%;height:100%;width:0%;background-color:var(--art-loaded-color);position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;width:100%;height:100%;width:0%;background-color:var(--art-theme);position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;width:100%;height:100%;pointer-events:none;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;width:100%;height:100%;pointer-events:auto;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{width:100%;height:100%;pointer-events:none}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{height:100%;flex:1;justify-content:center;align-items:center;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{height:100%;width:100%;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{width:100%;cursor:pointer;flex:1;justify-content:center;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{width:2px;border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;width:100%;height:100%;background-color:var(--art-theme);position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;width:100%;height:100%;height:auto;padding:var(--art-padding);pointer-events:none;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);transform-origin:100% 100%;max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transform:scale(var(--art-settings-scale));transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{min-width:32px;height:24px;justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{height:3px;width:80px;appearance:none;background-color:#fff3;outline:none}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{width:100px;text-align:right}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{width:250px;text-overflow:ellipsis;white-space:nowrap;user-select:all;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;width:320px;height:180px;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;width:100%;height:100%;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-droging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{width:15px;height:15px;fill:var(--art-theme)}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{width:100%;flex-shrink:0;justify-content:center;align-items:center;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],bAWi2:[function(e,t,n){t.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=Object.prototype.toString,n=function(n){if(void 0===n)return"undefined";if(null===n)return"null";var a=e(n);if("boolean"===a)return"boolean";if("string"===a)return"string";if("number"===a)return"number";if("symbol"===a)return"symbol";if("function"===a)return function(e){return"GeneratorFunction"===r(e)}(n)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(n))return"array";if(function(e){return!(!e.constructor||"function"!=typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}(n))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(n))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(n))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(n))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(n))return"regexp";switch(r(n)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(n))return"generator";switch(a=t.call(n)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return a.slice(8,-1).toLowerCase().replace(/\s/g,"")};function r(e){return e.constructor?e.constructor.name:null}function a(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return i(e,t,r),s(e,t,r),function(e,t,r){var o=n(t),l=n(e);if("object"===o){if("object"!==l)throw new Error("[Type Error]: '".concat(r.join("."),"' require 'object' type, but got '").concat(l,"'"));Object.keys(t).forEach((function(n){var o=e[n],l=t[n],c=r.slice();c.push(n),i(o,l,c),s(o,l,c),a(o,l,c)}))}if("array"===o){if("array"!==l)throw new Error("[Type Error]: '".concat(r.join("."),"' require 'array' type, but got '").concat(l,"'"));e.forEach((function(n,o){var l=e[o],c=t[o]||t[0],u=r.slice();u.push(o),i(l,c,u),s(l,c,u),a(l,c,u)}))}}(e,t,r),e}function i(e,t,r){if("string"===n(t)){var a=n(e);if("?"===t[0]&&(t=t.slice(1)+"|undefined"),!(-1<t.indexOf("|")?t.split("|").map((function(e){return e.toLowerCase().trim()})).filter(Boolean).some((function(e){return a===e})):t.toLowerCase().trim()===a))throw new Error("[Type Error]: '".concat(r.join("."),"' require '").concat(t,"' type, but got '").concat(a,"'"))}}function s(e,t,r){if("function"===n(t)){var a=t(e,n(e),r);if(!0!==a){var i=n(a);throw"string"===i?new Error(a):"error"===i?a:new Error("[Validator Error]: The scheme for '".concat(r.join("."),"' validator require return true, but got '").concat(a,"'"))}}}return a.kindOf=n,a}()},{}],"2bGVu":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=class{on(e,t,n){const r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this}once(e,t,n){const r=this;function a(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.off(e,a),t.apply(n,s)}return a._=t,this.on(e,a,n)}emit(e){const t=((this.e||(this.e={}))[e]||[]).slice();for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(let i=0;i<t.length;i+=1)t[i].fn.apply(t[i].ctx,r);return this}off(e,t){const n=this.e||(this.e={}),r=n[e],a=[];if(r&&t)for(let i=0,s=r.length;i<s;i+=1)r[i].fn!==t&&r[i].fn._!==t&&a.push(r[i]);return a.length?n[e]=a:delete n[e],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],guZOB:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach((function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})})),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}],h3rH9:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./dom");r.exportAll(a,n);var i=e("./error");r.exportAll(i,n);var s=e("./subtitle");r.exportAll(s,n);var o=e("./file");r.exportAll(o,n);var l=e("./property");r.exportAll(l,n);var c=e("./time");r.exportAll(c,n);var u=e("./format");r.exportAll(u,n);var d=e("./compatibility");r.exportAll(d,n)},{"./dom":"XgAQE","./error":"2nFlF","./subtitle":"yqFoT","./file":"1VRQn","./property":"3weX2","./time":"7kBIx","./format":"13atT","./compatibility":"luXC1","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],XgAQE:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"query",(()=>i)),r.export(n,"queryAll",(()=>s)),r.export(n,"addClass",(()=>o)),r.export(n,"removeClass",(()=>l)),r.export(n,"hasClass",(()=>c)),r.export(n,"append",(()=>u)),r.export(n,"remove",(()=>d)),r.export(n,"setStyle",(()=>h)),r.export(n,"setStyles",(()=>f)),r.export(n,"getStyle",(()=>p)),r.export(n,"sublings",(()=>m)),r.export(n,"inverseClass",(()=>g)),r.export(n,"tooltip",(()=>v)),r.export(n,"isInViewport",(()=>y)),r.export(n,"includeFromEvent",(()=>b)),r.export(n,"replaceElement",(()=>E)),r.export(n,"createElement",(()=>T)),r.export(n,"getIcon",(()=>w)),r.export(n,"setStyleText",(()=>S));var a=e("./compatibility");function i(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(t.querySelectorAll(e))}function o(e,t){return e.classList.add(t)}function l(e,t){return e.classList.remove(t)}function c(e,t){return e.classList.contains(t)}function u(e,t){return t instanceof Element?e.appendChild(t):e.insertAdjacentHTML("beforeend",String(t)),e.lastElementChild||e.lastChild}function d(e){return e.parentNode.removeChild(e)}function h(e,t,n){return e.style[t]=n,e}function f(e,t){for(const n in t)h(e,n,t[n]);return e}function p(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=window.getComputedStyle(e,null).getPropertyValue(t);return n?parseFloat(r):r}function m(e){return Array.from(e.parentElement.children).filter((t=>t!==e))}function g(e,t){m(e).forEach((e=>l(e,t))),o(e,t)}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top";a.isMobile||(e.setAttribute("aria-label",t),o(e,"hint--rounded"),o(e,"hint--".concat(n)))}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth,i=n.top-t<=r&&n.top+n.height+t>=0,s=n.left-t<=a+t&&n.left+n.width+t>=0;return i&&s}function b(e,t){return e.composedPath&&e.composedPath().indexOf(t)>-1}function E(e,t){return t.parentNode.replaceChild(e,t),e}function T(e){return document.createElement(e)}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=T("i");return o(n,"art-icon"),o(n,"art-icon-".concat(e)),u(n,t),n}function S(e,t){const n=document.getElementById(e);if(n)n.textContent=t;else{const n=T("style");n.id=e,n.textContent=t,document.head.appendChild(n)}}},{"./compatibility":"luXC1","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],luXC1:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"userAgent",(()=>a)),r.export(n,"isSafari",(()=>i)),r.export(n,"isWechat",(()=>s)),r.export(n,"isIE",(()=>o)),r.export(n,"isAndroid",(()=>l)),r.export(n,"isIOS",(()=>c)),r.export(n,"isIOS13",(()=>u)),r.export(n,"isMobile",(()=>d)),r.export(n,"isBrowser",(()=>h));const a="undefined"!=typeof navigator?navigator.userAgent:"",i=/^((?!chrome|android).)*safari/i.test(a),s=/MicroMessenger/i.test(a),o=/MSIE|Trident/i.test(a),l=/android/i.test(a),c=/iPad|iPhone|iPod/i.test(a)&&!window.MSStream,u=c||a.includes("Macintosh")&&navigator.maxTouchPoints>=1,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)||u,h="undefined"!=typeof window},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2nFlF":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"ArtPlayerError",(()=>a)),r.export(n,"errorHandle",(()=>i));class a extends Error{constructor(e,t){super(e),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t||this.constructor),this.name="ArtPlayerError"}}function i(e,t){if(!e)throw new a(t);return e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],yqFoT:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return"WEBVTT \r\n\r\n".concat((t=e,t.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,((e,t,n)=>{let r=n.slice(0,3);return 1===n.length&&(r=n+"00"),2===n.length&&(r=n+"0"),"".concat(t,",").concat(r)}))).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n"));var t}function i(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function s(e){const t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[:.]/).map(((e,t,n)=>{if(t===n.length-1){if(1===e.length)return".".concat(e,"00");if(2===e.length)return".".concat(e,"0")}else if(1===e.length)return(0===t?"0":":0")+e;return 0===t?e:t===n.length-1?".".concat(e):":".concat(e)})).join("")}return"WEBVTT\n\n".concat(e.split(/\r?\n/).map((e=>{const r=e.match(t);return r?{start:n(r[1].trim()),end:n(r[2].trim()),text:r[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((e=>e.trim())).join("\n")}:null})).filter((e=>e)).map(((e,t)=>e?"".concat(t+1,"\n").concat(e.start," --\x3e ").concat(e.end,"\n").concat(e.text):"")).filter((e=>e.trim())).join("\n\n"))}r.defineInteropFlag(n),r.export(n,"srtToVtt",(()=>a)),r.export(n,"vttToBlob",(()=>i)),r.export(n,"assToVtt",(()=>s))},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"1VRQn":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return e.includes("?")?a(e.split("?")[0]):e.includes("#")?a(e.split("#")[0]):e.trim().toLowerCase().split(".").pop()}function i(e,t){const n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}r.defineInteropFlag(n),r.export(n,"getExt",(()=>a)),r.export(n,"download",(()=>i))},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"3weX2":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"def",(()=>a)),r.export(n,"has",(()=>s)),r.export(n,"get",(()=>o)),r.export(n,"mergeDeep",(()=>l));const a=Object.defineProperty,{hasOwnProperty:i}=Object.prototype;function s(e,t){return i.call(e,t)}function o(e,t){return Object.getOwnPropertyDescriptor(e,t)}function l(){const e=e=>e&&"object"==typeof e&&!Array.isArray(e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce(((t,n)=>(Object.keys(n).forEach((r=>{const a=t[r],i=n[r];Array.isArray(a)&&Array.isArray(i)?t[r]=a.concat(...i):e(a)&&e(i)?t[r]=l(a,i):t[r]=i})),t)),{})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"7kBIx":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>setTimeout(t,e)))}function i(e,t){let n;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];clearTimeout(n),n=setTimeout((()=>(n=null,e.apply(this,a))),t)}}function s(e,t){let n=!1;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n||(e.apply(this,a),n=!0,setTimeout((function(){n=!1}),t))}}r.defineInteropFlag(n),r.export(n,"sleep",(()=>a)),r.export(n,"debounce",(()=>i)),r.export(n,"throttle",(()=>s))},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"13atT":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e,t,n){return Math.max(Math.min(e,Math.max(t,n)),Math.min(t,n))}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){return["string","number"].includes(typeof e)}function o(e){if(!e)return"00:00";const t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return(t>0?[t,n,r]:[n,r]).map((e=>e<10?"0".concat(e):String(e))).join(":")}function l(e){return e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e)))}function c(e){const t={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},n=new RegExp("(".concat(Object.keys(t).join("|"),")"),"g");return e.replace(n,(e=>t[e]||e))}r.defineInteropFlag(n),r.export(n,"clamp",(()=>a)),r.export(n,"capitalize",(()=>i)),r.export(n,"isStringOrNumber",(()=>s)),r.export(n,"secondToTime",(()=>o)),r.export(n,"escape",(()=>l)),r.export(n,"unescape",(()=>c))},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],AdvwB:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"ComponentOption",(()=>h));var a=e("../utils");const i="array",s="boolean",o="string",l="number",c="object",u="function";function d(e,t,n){return(0,a.errorHandle)(t===o||t===l||e instanceof Element,"".concat(n.join(".")," require '").concat(o,"' or 'Element' type"))}const h={html:d,disable:"?".concat(s),name:"?".concat(o),index:"?".concat(l),style:"?".concat(c),click:"?".concat(u),mounted:"?".concat(u),tooltip:"?".concat(o,"|").concat(l),width:"?".concat(l),selector:"?".concat(i),onSelect:"?".concat(u),switch:"?".concat(s),onSwitch:"?".concat(u),range:"?".concat(i),onRange:"?".concat(u),onChange:"?".concat(u)};n.default={id:o,container:d,url:o,poster:o,type:o,theme:o,lang:o,volume:l,isLive:s,muted:s,autoplay:s,autoSize:s,autoMini:s,loop:s,flip:s,playbackRate:s,aspectRatio:s,screenshot:s,setting:s,hotkey:s,pip:s,mutex:s,backdrop:s,fullscreen:s,fullscreenWeb:s,subtitleOffset:s,miniProgressBar:s,useSSR:s,playsInline:s,lock:s,fastForward:s,autoPlayback:s,autoOrientation:s,airplay:s,plugins:[u],layers:[h],contextmenu:[h],settings:[h],controls:[{...h,position:(e,t,n)=>{const r=["top","left","right"];return(0,a.errorHandle)(r.includes(e),"".concat(n.join(".")," only accept ").concat(r.toString()," as parameters"))}}],quality:[{default:"?".concat(s),html:o,url:o}],highlight:[{time:l,text:o}],thumbnails:{url:o,number:l,column:l,width:l,height:l},subtitle:{url:o,name:o,type:o,style:c,escape:s,encoding:o,onVttLoad:u},moreVideoAttr:c,i18n:c,icons:c,cssVar:c,customType:c}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"9Xmqu":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2gKYH":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("./utils");class a{constructor(e){this.art=e;const{option:t,constructor:n}=e;t.container instanceof Element?this.$container=t.container:(this.$container=(0,r.query)(t.container),(0,r.errorHandle)(this.$container,"No container element found by ".concat(t.container)));const a=this.$container.tagName.toLowerCase();(0,r.errorHandle)("div"===a,"Unsupported container element type, only support 'div' but got '".concat(a,"'")),(0,r.errorHandle)(n.instances.every((e=>e.template.$container!==this.$container)),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=e.id,this.init()}static get html(){return'<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">5.1.0</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span> x <span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>'}query(e){return(0,r.query)(e,this.$container)}init(){const{option:e}=this.art;e.useSSR||(this.$container.innerHTML=a.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),e.backdrop&&(0,r.addClass)(this.$player,"art-backdrop"),r.isMobile&&(0,r.addClass)(this.$player,"art-mobile")}destroy(e){e?this.$container.innerHTML="":(0,r.addClass)(this.$player,"art-destroy")}}n.default=a},{"./utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"1AdeF":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../utils"),i=e("./zh-cn"),s=r.interopDefault(i);n.default=class{constructor(e){this.art=e,this.languages={"zh-cn":s.default},this.language={},this.update(e.option.i18n)}init(){const e=this.art.option.lang.toLowerCase();this.language=this.languages[e]||{}}get(e){return this.language[e]||e}update(e){this.languages=(0,a.mergeDeep)(this.languages,e),this.init()}}},{"../utils":"h3rH9","./zh-cn":"3ZSKq","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"3ZSKq":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);const r={"Video Info":"\u7edf\u8ba1\u4fe1\u606f",Close:"\u5173\u95ed","Video Load Failed":"\u52a0\u8f7d\u5931\u8d25",Volume:"\u97f3\u91cf",Play:"\u64ad\u653e",Pause:"\u6682\u505c",Rate:"\u901f\u5ea6",Mute:"\u9759\u97f3","Video Flip":"\u753b\u9762\u7ffb\u8f6c",Horizontal:"\u6c34\u5e73",Vertical:"\u5782\u76f4",Reconnect:"\u91cd\u65b0\u8fde\u63a5","Show Setting":"\u663e\u793a\u8bbe\u7f6e","Hide Setting":"\u9690\u85cf\u8bbe\u7f6e",Screenshot:"\u622a\u56fe","Play Speed":"\u64ad\u653e\u901f\u5ea6","Aspect Ratio":"\u753b\u9762\u6bd4\u4f8b",Default:"\u9ed8\u8ba4",Normal:"\u6b63\u5e38",Open:"\u6253\u5f00","Switch Video":"\u5207\u6362","Switch Subtitle":"\u5207\u6362\u5b57\u5e55",Fullscreen:"\u5168\u5c4f","Exit Fullscreen":"\u9000\u51fa\u5168\u5c4f","Web Fullscreen":"\u7f51\u9875\u5168\u5c4f","Exit Web Fullscreen":"\u9000\u51fa\u7f51\u9875\u5168\u5c4f","Mini Player":"\u8ff7\u4f60\u64ad\u653e\u5668","PIP Mode":"\u5f00\u542f\u753b\u4e2d\u753b","Exit PIP Mode":"\u9000\u51fa\u753b\u4e2d\u753b","PIP Not Supported":"\u4e0d\u652f\u6301\u753b\u4e2d\u753b","Fullscreen Not Supported":"\u4e0d\u652f\u6301\u5168\u5c4f","Subtitle Offset":"\u5b57\u5e55\u504f\u79fb","Last Seen":"\u4e0a\u6b21\u770b\u5230","Jump Play":"\u8df3\u8f6c\u64ad\u653e",AirPlay:"\u9694\u7a7a\u64ad\u653e","AirPlay Not Available":"\u9694\u7a7a\u64ad\u653e\u4e0d\u53ef\u7528"};n.default=r,"undefined"!=typeof window&&(window["artplayer-i18n-zh-cn"]=r)},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"556MW":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./urlMix"),i=r.interopDefault(a),s=e("./attrMix"),o=r.interopDefault(s),l=e("./playMix"),c=r.interopDefault(l),u=e("./pauseMix"),d=r.interopDefault(u),h=e("./toggleMix"),f=r.interopDefault(h),p=e("./seekMix"),m=r.interopDefault(p),g=e("./volumeMix"),v=r.interopDefault(g),y=e("./currentTimeMix"),b=r.interopDefault(y),E=e("./durationMix"),T=r.interopDefault(E),w=e("./switchMix"),S=r.interopDefault(w),k=e("./playbackRateMix"),x=r.interopDefault(k),L=e("./aspectRatioMix"),R=r.interopDefault(L),A=e("./screenshotMix"),C=r.interopDefault(A),I=e("./fullscreenMix"),D=r.interopDefault(I),_=e("./fullscreenWebMix"),P=r.interopDefault(_),O=e("./pipMix"),M=r.interopDefault(O),F=e("./loadedMix"),N=r.interopDefault(F),B=e("./playedMix"),U=r.interopDefault(B),j=e("./playingMix"),H=r.interopDefault(j),z=e("./autoSizeMix"),G=r.interopDefault(z),V=e("./rectMix"),K=r.interopDefault(V),W=e("./flipMix"),Y=r.interopDefault(W),q=e("./miniMix"),$=r.interopDefault(q),X=e("./posterMix"),Z=r.interopDefault(X),Q=e("./autoHeightMix"),J=r.interopDefault(Q),ee=e("./cssVarMix"),te=r.interopDefault(ee),ne=e("./themeMix"),re=r.interopDefault(ne),ae=e("./typeMix"),ie=r.interopDefault(ae),se=e("./stateMix"),oe=r.interopDefault(se),le=e("./subtitleOffsetMix"),ce=r.interopDefault(le),ue=e("./airplayMix"),de=r.interopDefault(ue),he=e("./qualityMix"),fe=r.interopDefault(he),pe=e("./optionInit"),me=r.interopDefault(pe),ge=e("./eventInit"),ve=r.interopDefault(ge);n.default=class{constructor(e){(0,i.default)(e),(0,o.default)(e),(0,c.default)(e),(0,d.default)(e),(0,f.default)(e),(0,m.default)(e),(0,v.default)(e),(0,b.default)(e),(0,T.default)(e),(0,S.default)(e),(0,x.default)(e),(0,R.default)(e),(0,C.default)(e),(0,D.default)(e),(0,P.default)(e),(0,M.default)(e),(0,N.default)(e),(0,U.default)(e),(0,H.default)(e),(0,G.default)(e),(0,K.default)(e),(0,Y.default)(e),(0,$.default)(e),(0,Z.default)(e),(0,J.default)(e),(0,te.default)(e),(0,re.default)(e),(0,ie.default)(e),(0,oe.default)(e),(0,ce.default)(e),(0,de.default)(e),(0,fe.default)(e),(0,ve.default)(e),(0,me.default)(e)}}},{"./urlMix":"2mRAc","./attrMix":"2EA19","./playMix":"fD2Tc","./pauseMix":"c3LGJ","./toggleMix":"fVsAa","./seekMix":"dmROF","./volumeMix":"9jtfB","./currentTimeMix":"7NCDR","./durationMix":"YS7JL","./switchMix":"dzUqN","./playbackRateMix":"5I2mT","./aspectRatioMix":"7m6R8","./screenshotMix":"2dgtR","./fullscreenMix":"fKDW8","./fullscreenWebMix":"lNvYI","./pipMix":"8j7oC","./loadedMix":"dwVOT","./playedMix":"dDeLx","./playingMix":"ceoBp","./autoSizeMix":"lcWXX","./rectMix":"f7y88","./flipMix":"l4qt5","./miniMix":"9ZPBQ","./posterMix":"5K8hA","./autoHeightMix":"3T5ls","./cssVarMix":"6KfHs","./themeMix":"7lcSc","./typeMix":"8JgTw","./stateMix":"cebt1","./subtitleOffsetMix":"hJvIy","./airplayMix":"4Tp0U","./qualityMix":"3wZgN","./optionInit":"iPdgW","./eventInit":"3mj0J","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2mRAc":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{option:t,template:{$video:n}}=e;(0,r.def)(e,"url",{get:()=>n.src,async set(a){if(a){const i=e.url,s=t.type||(0,r.getExt)(a),o=t.customType[s];s&&o?(await(0,r.sleep)(),e.loading.show=!0,o.call(e,n,a,e)):(URL.revokeObjectURL(i),n.src=a),i!==e.url&&(e.option.url=a,e.isReady&&i&&e.once("video:canplay",(()=>{e.emit("restart",a)})))}else await(0,r.sleep)(),e.loading.show=!0}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2EA19":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{template:{$video:t}}=e;(0,r.def)(e,"attr",{value(e,n){if(void 0===n)return t[e];t[e]=n}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],fD2Tc:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,notice:n,option:a,constructor:{instances:i},template:{$video:s}}=e;(0,r.def)(e,"play",{value:async function(){const r=await s.play();if(n.show=t.get("Play"),e.emit("play"),a.mutex)for(let t=0;t<i.length;t++){const n=i[t];n!==e&&n.pause()}return r}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],c3LGJ:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{template:{$video:t},i18n:n,notice:a}=e;(0,r.def)(e,"pause",{value(){const r=t.pause();return a.show=n.get("Pause"),e.emit("pause"),r}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],fVsAa:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){(0,r.def)(e,"toggle",{value:()=>e.playing?e.pause():e.play()})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],dmROF:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{notice:t}=e;(0,r.def)(e,"seek",{set(n){e.currentTime=n,e.emit("seek",e.currentTime),e.duration&&(t.show="".concat((0,r.secondToTime)(e.currentTime)," / ").concat((0,r.secondToTime)(e.duration)))}}),(0,r.def)(e,"forward",{set(t){e.seek=e.currentTime+t}}),(0,r.def)(e,"backward",{set(t){e.seek=e.currentTime-t}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"9jtfB":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{template:{$video:t},i18n:n,notice:a,storage:i}=e;(0,r.def)(e,"volume",{get:()=>t.volume||0,set:e=>{t.volume=(0,r.clamp)(e,0,1),a.show="".concat(n.get("Volume"),": ").concat(parseInt(100*t.volume,10)),0!==t.volume&&i.set("volume",t.volume)}}),(0,r.def)(e,"muted",{get:()=>t.muted,set:n=>{t.muted=n,e.emit("muted",n)}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"7NCDR":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{$video:t}=e.template;(0,r.def)(e,"currentTime",{get:()=>t.currentTime||0,set:n=>{n=parseFloat(n),Number.isNaN(n)||(t.currentTime=(0,r.clamp)(n,0,e.duration))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],YS7JL:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){(0,r.def)(e,"duration",{get:()=>{const{duration:t}=e.template.$video;return t===1/0?0:t||0}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],dzUqN:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){function t(t,n){return new Promise(((r,a)=>{if(t===e.url)return;const{playing:i,aspectRatio:s,playbackRate:o}=e;e.pause(),e.url=t,e.notice.show="",e.once("video:error",a),e.once("video:canplay",(async()=>{e.playbackRate=o,e.aspectRatio=s,e.currentTime=n,i&&await e.play(),e.notice.show="",r()}))}))}(0,r.def)(e,"switchQuality",{value:n=>t(n,e.currentTime)}),(0,r.def)(e,"switchUrl",{value:e=>t(e,0)}),(0,r.def)(e,"switch",{set:e.switchUrl})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"5I2mT":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{template:{$video:t},i18n:n,notice:a}=e;(0,r.def)(e,"playbackRate",{get:()=>t.playbackRate,set(r){if(r){if(r===t.playbackRate)return;t.playbackRate=r,a.show="".concat(n.get("Rate"),": ").concat(1===r?n.get("Normal"):"".concat(r,"x"))}else e.playbackRate=1}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"7m6R8":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,notice:n,template:{$video:a,$player:i}}=e;(0,r.def)(e,"aspectRatio",{get:()=>i.dataset.aspectRatio||"default",set(s){if(s||(s="default"),"default"===s)(0,r.setStyle)(a,"width",null),(0,r.setStyle)(a,"height",null),(0,r.setStyle)(a,"margin",null),delete i.dataset.aspectRatio;else{const e=s.split(":").map(Number),{clientWidth:t,clientHeight:n}=i,o=t/n,l=e[0]/e[1];o>l?((0,r.setStyle)(a,"width",l*n+"px"),(0,r.setStyle)(a,"height","100%"),(0,r.setStyle)(a,"margin","0 auto")):((0,r.setStyle)(a,"width","100%"),(0,r.setStyle)(a,"height",t/l+"px"),(0,r.setStyle)(a,"margin","auto 0")),i.dataset.aspectRatio=s}n.show="".concat(t.get("Aspect Ratio"),": ").concat("default"===s?t.get("Default"):s),e.emit("aspectRatio",s)}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2dgtR":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{notice:t,template:{$video:n}}=e,a=(0,r.createElement)("canvas");(0,r.def)(e,"getDataURL",{value:()=>new Promise(((e,r)=>{try{a.width=n.videoWidth,a.height=n.videoHeight,a.getContext("2d").drawImage(n,0,0),e(a.toDataURL("image/png"))}catch(e){t.show=e,r(e)}}))}),(0,r.def)(e,"getBlobUrl",{value:()=>new Promise(((e,r)=>{try{a.width=n.videoWidth,a.height=n.videoHeight,a.getContext("2d").drawImage(n,0,0),a.toBlob((t=>{e(URL.createObjectURL(t))}))}catch(e){t.show=e,r(e)}}))}),(0,r.def)(e,"screenshot",{value:async()=>{const t=await e.getDataURL();return(0,r.download)(t,"artplayer_".concat((0,r.secondToTime)(n.currentTime),".png")),e.emit("screenshot",t),t}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],fKDW8:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../libs/screenfull"),i=r.interopDefault(a),s=e("../utils");n.default=function(e){const{i18n:t,notice:n,template:{$video:r,$player:a}}=e;e.once("video:loadedmetadata",(()=>{i.default.isEnabled?(e=>{i.default.on("change",(()=>{e.emit("fullscreen",i.default.isFullscreen)})),(0,s.def)(e,"fullscreen",{get:()=>i.default.isFullscreen,async set(t){t?(e.state="fullscreen",await i.default.request(a),(0,s.addClass)(a,"art-fullscreen")):(await i.default.exit(),(0,s.removeClass)(a,"art-fullscreen")),e.emit("resize")}})})(e):document.fullscreenEnabled||r.webkitSupportsFullscreen?(e=>{(0,s.def)(e,"fullscreen",{get:()=>r.webkitDisplayingFullscreen,set(t){t?(e.state="fullscreen",r.webkitEnterFullscreen(),e.emit("fullscreen",!0)):(r.webkitExitFullscreen(),e.emit("fullscreen",!1)),e.emit("resize")}})})(e):(0,s.def)(e,"fullscreen",{get:()=>!1,set(){n.show=t.get("Fullscreen Not Supported")}}),(0,s.def)(e,"fullscreen",(0,s.get)(e,"fullscreen"))}))}},{"../libs/screenfull":"lUahW","../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],lUahW:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);const r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=(()=>{if("undefined"==typeof document)return!1;const e=r[0],t={};for(const n of r)if(n[1]in document){for(const[r,a]of n.entries())t[e[r]]=a;return t}return!1})(),i={change:a.fullscreenchange,error:a.fullscreenerror};let s={request:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=arguments.length>1?arguments[1]:void 0;return new Promise(((n,r)=>{const i=()=>{s.off("change",i),n()};s.on("change",i);const o=e[a.requestFullscreen](t);o instanceof Promise&&o.then(i).catch(r)}))},exit:()=>new Promise(((e,t)=>{if(!s.isFullscreen)return void e();const n=()=>{s.off("change",n),e()};s.on("change",n);const r=document[a.exitFullscreen]();r instanceof Promise&&r.then(n).catch(t)})),toggle:(e,t)=>s.isFullscreen?s.exit():s.request(e,t),onchange(e){s.on("change",e)},onerror(e){s.on("error",e)},on(e,t){const n=i[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=i[e];n&&document.removeEventListener(n,t,!1)},raw:a};Object.defineProperties(s,{isFullscreen:{get:()=>Boolean(document[a.fullscreenElement])},element:{enumerable:!0,get:()=>document[a.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>Boolean(document[a.fullscreenEnabled])}}),a||(s={isEnabled:!1}),n.default=s},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],lNvYI:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{constructor:t,template:{$container:n,$player:a}}=e;let i="";(0,r.def)(e,"fullscreenWeb",{get:()=>(0,r.hasClass)(a,"art-fullscreen-web"),set(s){s?(i=a.style.cssText,t.FULLSCREEN_WEB_IN_BODY&&(0,r.append)(document.body,a),e.state="fullscreenWeb",(0,r.setStyle)(a,"width","100%"),(0,r.setStyle)(a,"height","100%"),(0,r.addClass)(a,"art-fullscreen-web"),e.emit("fullscreenWeb",!0)):(t.FULLSCREEN_WEB_IN_BODY&&(0,r.append)(n,a),i&&(a.style.cssText=i,i=""),(0,r.removeClass)(a,"art-fullscreen-web"),e.emit("fullscreenWeb",!1)),e.emit("resize")}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"8j7oC":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,notice:n,template:{$video:a}}=e;document.pictureInPictureEnabled?function(e){const{template:{$video:t},proxy:n,notice:a}=e;t.disablePictureInPicture=!1,(0,r.def)(e,"pip",{get:()=>document.pictureInPictureElement,set(n){n?(e.state="pip",t.requestPictureInPicture().catch((e=>{throw a.show=e,e}))):document.exitPictureInPicture().catch((e=>{throw a.show=e,e}))}}),n(t,"enterpictureinpicture",(()=>{e.emit("pip",!0)})),n(t,"leavepictureinpicture",(()=>{e.emit("pip",!1)}))}(e):a.webkitSupportsPresentationMode?function(e){const{$video:t}=e.template;t.webkitSetPresentationMode("inline"),(0,r.def)(e,"pip",{get:()=>"picture-in-picture"===t.webkitPresentationMode,set(n){n?(e.state="pip",t.webkitSetPresentationMode("picture-in-picture"),e.emit("pip",!0)):(t.webkitSetPresentationMode("inline"),e.emit("pip",!1))}})}(e):(0,r.def)(e,"pip",{get:()=>!1,set(){n.show=t.get("PIP Not Supported")}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],dwVOT:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{$video:t}=e.template;(0,r.def)(e,"loaded",{get:()=>e.loadedTime/t.duration}),(0,r.def)(e,"loadedTime",{get:()=>t.buffered.length?t.buffered.end(t.buffered.length-1):0})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],dDeLx:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){(0,r.def)(e,"played",{get:()=>e.currentTime/e.duration})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],ceoBp:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{$video:t}=e.template;(0,r.def)(e,"playing",{get:()=>!!(t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2)})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],lcWXX:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{$container:t,$player:n,$video:a}=e.template;(0,r.def)(e,"autoSize",{value(){const{videoWidth:i,videoHeight:s}=a,{width:o,height:l}=t.getBoundingClientRect(),c=i/s;if(o/l>c){const e=l*c/o*100;(0,r.setStyle)(n,"width","".concat(e,"%")),(0,r.setStyle)(n,"height","100%")}else{const e=o/c/l*100;(0,r.setStyle)(n,"width","100%"),(0,r.setStyle)(n,"height","".concat(e,"%"))}e.emit("autoSize",{width:e.width,height:e.height})}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],f7y88:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){(0,r.def)(e,"rect",{get:()=>e.template.$player.getBoundingClientRect()});const t=["bottom","height","left","right","top","width"];for(let n=0;n<t.length;n++){const a=t[n];(0,r.def)(e,a,{get:()=>e.rect[a]})}(0,r.def)(e,"x",{get:()=>e.left+window.pageXOffset}),(0,r.def)(e,"y",{get:()=>e.top+window.pageYOffset})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],l4qt5:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{template:{$player:t},i18n:n,notice:a}=e;(0,r.def)(e,"flip",{get:()=>t.dataset.flip||"normal",set(i){i||(i="normal"),"normal"===i?delete t.dataset.flip:t.dataset.flip=i,a.show="".concat(n.get("Video Flip"),": ").concat(n.get((0,r.capitalize)(i))),e.emit("flip",i)}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"9ZPBQ":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{icons:t,proxy:n,storage:a,template:{$player:i,$video:s}}=e;let o=!1,l=0,c=0;function u(){const{$mini:t}=e.template;t&&((0,r.removeClass)(i,"art-mini"),(0,r.setStyle)(t,"display","none"),i.prepend(s),e.emit("mini",!1))}function d(t,n){e.playing?((0,r.setStyle)(t,"display","none"),(0,r.setStyle)(n,"display","flex")):((0,r.setStyle)(t,"display","flex"),(0,r.setStyle)(n,"display","none"))}function h(){const{$mini:t}=e.template,n=t.getBoundingClientRect(),i=window.innerHeight-n.height-50,s=window.innerWidth-n.width-50;a.set("top",i),a.set("left",s),(0,r.setStyle)(t,"top","".concat(i,"px")),(0,r.setStyle)(t,"left","".concat(s,"px"))}(0,r.def)(e,"mini",{get:()=>(0,r.hasClass)(i,"art-mini"),set(f){if(f){e.state="mini",(0,r.addClass)(i,"art-mini");const f=function(){const{$mini:i}=e.template;if(i)return(0,r.append)(i,s),(0,r.setStyle)(i,"display","flex");{const i=(0,r.createElement)("div");(0,r.addClass)(i,"art-mini-popup"),(0,r.append)(document.body,i),e.template.$mini=i,(0,r.append)(i,s);const h=(0,r.append)(i,'<div class="art-mini-close"></div>');(0,r.append)(h,t.close),n(h,"click",u);const f=(0,r.append)(i,'<div class="art-mini-state"></div>'),p=(0,r.append)(f,t.play),m=(0,r.append)(f,t.pause);return n(p,"click",(()=>e.play())),n(m,"click",(()=>e.pause())),d(p,m),e.on("video:playing",(()=>d(p,m))),e.on("video:pause",(()=>d(p,m))),e.on("video:timeupdate",(()=>d(p,m))),n(i,"mousedown",(e=>{o=0===e.button,l=e.pageX,c=e.pageY})),e.on("document:mousemove",(e=>{if(o){(0,r.addClass)(i,"art-mini-droging");const t=e.pageX-l,n=e.pageY-c;(0,r.setStyle)(i,"transform","translate(".concat(t,"px, ").concat(n,"px)"))}})),e.on("document:mouseup",(()=>{if(o){o=!1,(0,r.removeClass)(i,"art-mini-droging");const e=i.getBoundingClientRect();a.set("left",e.left),a.set("top",e.top),(0,r.setStyle)(i,"left","".concat(e.left,"px")),(0,r.setStyle)(i,"top","".concat(e.top,"px")),(0,r.setStyle)(i,"transform",null)}})),i}}(),p=a.get("top"),m=a.get("left");p&&m?((0,r.setStyle)(f,"top","".concat(p,"px")),(0,r.setStyle)(f,"left","".concat(m,"px")),(0,r.isInViewport)(f)||h()):h(),e.emit("mini",!0)}else u()}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"5K8hA":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{template:{$poster:t}}=e;(0,r.def)(e,"poster",{get:()=>{try{return t.style.backgroundImage.match(/"(.*)"/)[1]}catch(e){return""}},set(e){(0,r.setStyle)(t,"backgroundImage","url(".concat(e,")"))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"3T5ls":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{template:{$container:t,$video:n}}=e;(0,r.def)(e,"autoHeight",{value(){const{clientWidth:a}=t,{videoHeight:i,videoWidth:s}=n,o=i*(a/s);(0,r.setStyle)(t,"height",o+"px"),e.emit("autoHeight",o)}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"6KfHs":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{$player:t}=e.template;(0,r.def)(e,"cssVar",{value:(e,n)=>n?t.style.setProperty(e,n):getComputedStyle(t).getPropertyValue(e)})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"7lcSc":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){(0,r.def)(e,"theme",{get:()=>e.cssVar("--art-theme"),set(t){e.cssVar("--art-theme",t)}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"8JgTw":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){(0,r.def)(e,"type",{get:()=>e.option.type,set(t){e.option.type=t}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],cebt1:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const t=["mini","pip","fullscreen","fullscreenWeb"];(0,r.def)(e,"state",{get:()=>t.find((t=>e[t]))||"standard",set(n){for(let r=0;r<t.length;r++){const a=t[r];a!==n&&e[a]&&(e[a]=!1)}}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],hJvIy:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{clamp:t}=e.constructor.utils,{notice:n,template:a,i18n:i}=e;let s=0,o=[];e.on("subtitle:switch",(()=>{o=[]})),(0,r.def)(e,"subtitleOffset",{get:()=>s,set(r){if(a.$track&&a.$track.track){const l=Array.from(a.$track.track.cues);s=t(r,-5,5);for(let n=0;n<l.length;n++){const r=l[n];o[n]||(o[n]={startTime:r.startTime,endTime:r.endTime}),r.startTime=t(o[n].startTime+s,0,e.duration),r.endTime=t(o[n].endTime+s,0,e.duration)}e.subtitle.update(),n.show="".concat(i.get("Subtitle Offset"),": ").concat(r,"s"),e.emit("subtitleOffset",r)}else e.emit("subtitleOffset",0)}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"4Tp0U":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,notice:n,proxy:a,template:{$video:i}}=e;let s=!0;window.WebKitPlaybackTargetAvailabilityEvent&&i.webkitShowPlaybackTargetPicker?a(i,"webkitplaybacktargetavailabilitychanged",(e=>{switch(e.availability){case"available":s=!0;break;case"not-available":s=!1}})):s=!1,(0,r.def)(e,"airplay",{value(){s?(i.webkitShowPlaybackTargetPicker(),e.emit("airplay")):n.show=t.get("AirPlay Not Available")}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"3wZgN":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){(0,r.def)(e,"quality",{set(t){const{controls:n,notice:r,i18n:a}=e,i=t.find((e=>e.default))||t[0];n.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:i?i.html:"",selector:t,async onSelect(t){await e.switchQuality(t.url),r.show="".concat(a.get("Switch Video"),": ").concat(t.html)}})}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],iPdgW:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{option:t,storage:n,template:{$video:a,$poster:i}}=e;for(const r in t.moreVideoAttr)e.attr(r,t.moreVideoAttr[r]);t.muted&&(e.muted=t.muted),t.volume&&(a.volume=(0,r.clamp)(t.volume,0,1));const s=n.get("volume");"number"==typeof s&&(a.volume=(0,r.clamp)(s,0,1)),t.poster&&(0,r.setStyle)(i,"backgroundImage","url(".concat(t.poster,")")),t.autoplay&&(a.autoplay=t.autoplay),t.playsInline&&(a.playsInline=!0,a["webkit-playsinline"]=!0),t.theme&&(t.cssVar["--art-theme"]=t.theme);for(const r in t.cssVar)e.cssVar(r,t.cssVar[r]);e.url=t.url}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"3mj0J":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../config"),i=r.interopDefault(a),s=e("../utils");n.default=function(e){const{i18n:t,notice:n,option:r,constructor:a,proxy:o,template:{$player:l,$video:c,$poster:u}}=e;let d=0;for(let s=0;s<i.default.events.length;s++)o(c,i.default.events[s],(t=>{e.emit("video:".concat(t.type),t)}));e.on("video:canplay",(()=>{d=0,e.loading.show=!1})),e.once("video:canplay",(()=>{e.loading.show=!1,e.controls.show=!0,e.mask.show=!0,e.isReady=!0,e.emit("ready")})),e.on("video:ended",(()=>{r.loop?(e.seek=0,e.play(),e.controls.show=!1,e.mask.show=!1):(e.controls.show=!0,e.mask.show=!0)})),e.on("video:error",(async i=>{d<a.RECONNECT_TIME_MAX?(await(0,s.sleep)(a.RECONNECT_SLEEP_TIME),d+=1,e.url=r.url,n.show="".concat(t.get("Reconnect"),": ").concat(d),e.emit("error",i,d)):(e.mask.show=!0,e.loading.show=!1,e.controls.show=!0,(0,s.addClass)(l,"art-error"),await(0,s.sleep)(a.RECONNECT_SLEEP_TIME),n.show=t.get("Video Load Failed"))})),e.on("video:loadedmetadata",(()=>{e.emit("resize"),s.isMobile&&(e.loading.show=!1,e.controls.show=!0,e.mask.show=!0)})),e.on("video:loadstart",(()=>{e.loading.show=!0,e.mask.show=!1,e.controls.show=!0})),e.on("video:pause",(()=>{e.controls.show=!0,e.mask.show=!0})),e.on("video:play",(()=>{e.mask.show=!1,(0,s.setStyle)(u,"display","none")})),e.on("video:playing",(()=>{e.mask.show=!1})),e.on("video:progress",(()=>{e.playing&&(e.loading.show=!1)})),e.on("video:seeked",(()=>{e.loading.show=!1,e.mask.show=!0})),e.on("video:seeking",(()=>{e.loading.show=!0,e.mask.show=!1})),e.on("video:timeupdate",(()=>{e.mask.show=!1})),e.on("video:waiting",(()=>{e.loading.show=!0,e.mask.show=!1}))}},{"../config":"9Xmqu","../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"14IBq":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../utils"),i=e("../utils/component"),s=r.interopDefault(i),o=e("./fullscreen"),l=r.interopDefault(o),c=e("./fullscreenWeb"),u=r.interopDefault(c),d=e("./pip"),h=r.interopDefault(d),f=e("./playAndPause"),p=r.interopDefault(f),m=e("./progress"),g=r.interopDefault(m),v=e("./time"),y=r.interopDefault(v),b=e("./volume"),E=r.interopDefault(b),T=e("./setting"),w=r.interopDefault(T),S=e("./thumbnails"),k=r.interopDefault(S),x=e("./screenshot"),L=r.interopDefault(x),R=e("./airplay"),A=r.interopDefault(R);class C extends s.default{constructor(e){super(e),this.name="control",this.timer=Date.now();const{constructor:t}=e,{$player:n}=this.art.template;e.on("mousemove",(()=>{a.isMobile||(this.show=!0)})),e.on("click",(()=>{a.isMobile?this.toggle():this.show=!0})),e.on("video:timeupdate",(()=>{!e.isInput&&e.playing&&this.show&&Date.now()-this.timer>=t.CONTROL_HIDE_TIME&&(this.show=!1)})),e.on("control",(e=>{e?((0,a.removeClass)(n,"art-hide-cursor"),(0,a.addClass)(n,"art-hover"),this.timer=Date.now()):((0,a.addClass)(n,"art-hide-cursor"),(0,a.removeClass)(n,"art-hover"))})),this.init()}init(){const{option:e}=this.art;e.isLive||this.add((0,g.default)({name:"progress",position:"top",index:10})),!e.thumbnails.url||e.isLive||a.isMobile||this.add((0,k.default)({name:"thumbnails",position:"top",index:20})),this.add((0,p.default)({name:"playAndPause",position:"left",index:10})),this.add((0,E.default)({name:"volume",position:"left",index:20})),e.isLive||this.add((0,y.default)({name:"time",position:"left",index:30})),e.quality.length&&(0,a.sleep)().then((()=>{this.art.quality=e.quality})),e.screenshot&&!a.isMobile&&this.add((0,L.default)({name:"screenshot",position:"right",index:20})),e.setting&&this.add((0,w.default)({name:"setting",position:"right",index:30})),e.pip&&this.add((0,h.default)({name:"pip",position:"right",index:40})),e.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,A.default)({name:"airplay",position:"right",index:50})),e.fullscreenWeb&&this.add((0,u.default)({name:"fullscreenWeb",position:"right",index:60})),e.fullscreen&&this.add((0,l.default)({name:"fullscreen",position:"right",index:70}));for(let t=0;t<e.controls.length;t++)this.add(e.controls[t])}add(e){const t="function"==typeof e?e(this.art):e,{$progress:n,$controlsLeft:r,$controlsRight:i}=this.art.template;switch(t.position){case"top":this.$parent=n;break;case"left":this.$parent=r;break;case"right":this.$parent=i;break;default:(0,a.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add(t)}}n.default=C},{"../utils":"h3rH9","../utils/component":"guki8","./fullscreen":"cxHNK","./fullscreenWeb":"66eEC","./pip":"kCFkA","./playAndPause":"iRhgD","./progress":"aBBSH","./time":"7H0CE","./volume":"lMwFm","./setting":"8BrCu","./thumbnails":"2HiWx","./screenshot":"c1GeG","./airplay":"6GRju","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],guki8:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./dom"),i=e("./format"),s=e("./error"),o=e("option-validator"),l=r.interopDefault(o),c=e("../scheme");n.default=class{constructor(e){this.id=0,this.art=e,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,a.hasClass)(this.art.template.$player,"art-".concat(this.name,"-show"))}set show(e){const{$player:t}=this.art.template,n="art-".concat(this.name,"-show");e?(0,a.addClass)(t,n):(0,a.removeClass)(t,n),this.art.emit(this.name,e)}toggle(){this.show=!this.show}add(e){const t="function"==typeof e?e(this.art):e;if(t.html=t.html||"",(0,l.default)(t,c.ComponentOption),!this.$parent||!this.name||t.disable)return;const n=t.name||"".concat(this.name).concat(this.id),r=this.cache.get(n);(0,s.errorHandle)(!r,"Can't add an existing [".concat(n,"] to the [").concat(this.name,"]")),this.id+=1;const i=(0,a.createElement)("div");(0,a.addClass)(i,"art-".concat(this.name)),(0,a.addClass)(i,"art-".concat(this.name,"-").concat(n));const o=Array.from(this.$parent.children);i.dataset.index=t.index||this.id;const u=o.find((e=>Number(e.dataset.index)>=Number(i.dataset.index)));u?u.insertAdjacentElement("beforebegin",i):(0,a.append)(this.$parent,i),t.html&&(0,a.append)(i,t.html),t.style&&(0,a.setStyles)(i,t.style),t.tooltip&&(0,a.tooltip)(i,t.tooltip);const d=[];if(t.click){const e=this.art.events.proxy(i,"click",(e=>{e.preventDefault(),t.click.call(this.art,this,e)}));d.push(e)}return t.selector&&["left","right"].includes(t.position)&&this.addSelector(t,i,d),this[n]=i,this.cache.set(n,{$ref:i,events:d,option:t}),t.mounted&&t.mounted.call(this.art,i),i}addSelector(e,t,n){const{hover:r,proxy:s}=this.art.events;(0,a.addClass)(t,"art-control-selector");const o=(0,a.createElement)("div");(0,a.addClass)(o,"art-selector-value"),(0,a.append)(o,e.html),t.innerText="",(0,a.append)(t,o);const l=e.selector.map(((e,t)=>'<div class="art-selector-item '.concat(e.default?"art-current":"",'" data-index="').concat(t,'">').concat(e.html,"</div>"))).join(""),c=(0,a.createElement)("div");(0,a.addClass)(c,"art-selector-list"),(0,a.append)(c,l),(0,a.append)(t,c);const u=()=>{const e=(0,a.getStyle)(t,"width")/2-(0,a.getStyle)(c,"width")/2;c.style.left="".concat(e,"px")};r(t,u);const d=s(c,"click",(async t=>{const n=(t.composedPath()||[]).find((e=>(0,a.hasClass)(e,"art-selector-item")));if(!n)return;(0,a.inverseClass)(n,"art-current");const r=Number(n.dataset.index),s=e.selector[r]||{};if(o.innerText=n.innerText,e.onSelect){const r=await e.onSelect.call(this.art,s,n,t);(0,i.isStringOrNumber)(r)&&(o.innerHTML=r)}u()}));n.push(d)}remove(e){const t=this.cache.get(e);(0,s.errorHandle)(t,"Can't find [".concat(e,"] from the [").concat(this.name,"]")),t.option.beforeUnmount&&t.option.beforeUnmount.call(this.art,t.$ref);for(let n=0;n<t.events.length;n++)this.art.events.remove(t.events[n]);this.cache.delete(e),delete this[e],(0,a.remove)(t.$ref)}update(e){const t=this.cache.get(e.name);return t&&(e=Object.assign(t.option,e),this.remove(e.name)),this.add(e)}}},{"./dom":"XgAQE","./format":"13atT","./error":"2nFlF","option-validator":"bAWi2","../scheme":"AdvwB","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],cxHNK:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,tooltip:t.i18n.get("Fullscreen"),mounted:e=>{const{proxy:n,icons:a,i18n:i}=t,s=(0,r.append)(e,a.fullscreenOn),o=(0,r.append)(e,a.fullscreenOff);(0,r.setStyle)(o,"display","none"),n(e,"click",(()=>{t.fullscreen=!t.fullscreen})),t.on("fullscreen",(t=>{t?((0,r.tooltip)(e,i.get("Exit Fullscreen")),(0,r.setStyle)(s,"display","none"),(0,r.setStyle)(o,"display","inline-flex")):((0,r.tooltip)(e,i.get("Fullscreen")),(0,r.setStyle)(s,"display","inline-flex"),(0,r.setStyle)(o,"display","none"))}))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"66eEC":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,tooltip:t.i18n.get("Web Fullscreen"),mounted:e=>{const{proxy:n,icons:a,i18n:i}=t,s=(0,r.append)(e,a.fullscreenWebOn),o=(0,r.append)(e,a.fullscreenWebOff);(0,r.setStyle)(o,"display","none"),n(e,"click",(()=>{t.fullscreenWeb=!t.fullscreenWeb})),t.on("fullscreenWeb",(t=>{t?((0,r.tooltip)(e,i.get("Exit Web Fullscreen")),(0,r.setStyle)(s,"display","none"),(0,r.setStyle)(o,"display","inline-flex")):((0,r.tooltip)(e,i.get("Web Fullscreen")),(0,r.setStyle)(s,"display","inline-flex"),(0,r.setStyle)(o,"display","none"))}))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],kCFkA:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,tooltip:t.i18n.get("PIP Mode"),mounted:e=>{const{proxy:n,icons:a,i18n:i}=t;(0,r.append)(e,a.pip),n(e,"click",(()=>{t.pip=!t.pip})),t.on("pip",(t=>{(0,r.tooltip)(e,i.get(t?"Exit PIP Mode":"PIP Mode"))}))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],iRhgD:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,mounted:e=>{const{proxy:n,icons:a,i18n:i}=t,s=(0,r.append)(e,a.play),o=(0,r.append)(e,a.pause);function l(){(0,r.setStyle)(s,"display","flex"),(0,r.setStyle)(o,"display","none")}function c(){(0,r.setStyle)(s,"display","none"),(0,r.setStyle)(o,"display","flex")}(0,r.tooltip)(s,i.get("Play")),(0,r.tooltip)(o,i.get("Pause")),n(s,"click",(()=>{t.play()})),n(o,"click",(()=>{t.pause()})),t.playing?c():l(),t.on("video:playing",(()=>{c()})),t.on("video:pause",(()=>{l()}))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],aBBSH:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"getPosFromEvent",(()=>i)),r.export(n,"setCurrentTime",(()=>s));var a=e("../utils");function i(e,t){const{$progress:n}=e.template,{left:r}=n.getBoundingClientRect(),i=a.isMobile?t.touches[0].clientX:t.clientX,s=(0,a.clamp)(i-r,0,n.clientWidth),o=s/n.clientWidth*e.duration;return{second:o,time:(0,a.secondToTime)(o),width:s,percentage:(0,a.clamp)(s/n.clientWidth,0,1)}}function s(e,t){if(e.isRotate){const n=t.touches[0].clientY/e.height,r=n*e.duration;e.emit("setBar","played",n),e.seek=r}else{const{second:n,percentage:r}=i(e,t);e.emit("setBar","played",r),e.seek=n}}n.default=function(e){return t=>{const{icons:n,option:r,proxy:o}=t;return{...e,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:e=>{let l=!1;const c=(0,a.query)(".art-progress-hover",e),u=(0,a.query)(".art-progress-loaded",e),d=(0,a.query)(".art-progress-played",e),h=(0,a.query)(".art-progress-highlight",e),f=(0,a.query)(".art-progress-indicator",e),p=(0,a.query)(".art-progress-tip",e);function m(e,t){"loaded"===e&&(0,a.setStyle)(u,"width",100*t+"%"),"played"===e&&((0,a.setStyle)(d,"width",100*t+"%"),(0,a.setStyle)(f,"left",100*t+"%"))}n.indicator?(0,a.append)(f,n.indicator):(0,a.setStyle)(f,"backgroundColor","var(--art-theme)"),t.on("video:loadedmetadata",(()=>{for(let e=0;e<r.highlight.length;e++){const n=r.highlight[e],i=(0,a.clamp)(n.time,0,t.duration)/t.duration*100,s='<span data-text="'.concat(n.text,'" data-time="').concat(n.time,'" style="left: ').concat(i,'%"></span>');(0,a.append)(h,s)}})),m("loaded",t.loaded),t.on("setBar",((e,t)=>{m(e,t)})),t.on("video:progress",(()=>{m("loaded",t.loaded)})),t.constructor.USE_RAF?t.on("raf",(()=>{m("played",t.played)})):t.on("video:timeupdate",(()=>{m("played",t.played)})),t.on("video:ended",(()=>{m("played",1)})),a.isMobile||(o(e,"click",(e=>{e.target!==f&&s(t,e)})),o(e,"mousemove",(n=>{!function(e){const{width:n}=i(t,e);(0,a.setStyle)(c,"width","".concat(n,"px")),(0,a.setStyle)(c,"display","flex")}(n),(0,a.setStyle)(p,"display","flex"),(0,a.includeFromEvent)(n,h)?function(n){const{width:r}=i(t,n),{text:s}=n.target.dataset;p.innerHTML=s;const o=p.clientWidth;r<=o/2?(0,a.setStyle)(p,"left",0):r>e.clientWidth-o/2?(0,a.setStyle)(p,"left",e.clientWidth-o+"px"):(0,a.setStyle)(p,"left",r-o/2+"px")}(n):function(n){const{width:r,time:s}=i(t,n);p.innerHTML=s;const o=p.clientWidth;r<=o/2?(0,a.setStyle)(p,"left",0):r>e.clientWidth-o/2?(0,a.setStyle)(p,"left",e.clientWidth-o+"px"):(0,a.setStyle)(p,"left",r-o/2+"px")}(n)})),o(e,"mouseleave",(()=>{(0,a.setStyle)(p,"display","none"),(0,a.setStyle)(c,"display","none")})),o(e,"mousedown",(e=>{l=0===e.button})),t.on("document:mousemove",(e=>{if(l){const{second:n,percentage:r}=i(t,e);m("played",r),t.seek=n}})),t.on("document:mouseup",(()=>{l&&(l=!1)})))}}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"7H0CE":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,style:r.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:e=>{function n(){const n="".concat((0,r.secondToTime)(t.currentTime)," / ").concat((0,r.secondToTime)(t.duration));n!==e.innerText&&(e.innerText=n)}n();const a=["video:loadedmetadata","video:timeupdate","video:progress"];for(let r=0;r<a.length;r++)t.on(a[r],n)}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],lMwFm:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,mounted:e=>{const{proxy:n,icons:a}=t,i=(0,r.append)(e,a.volume),s=(0,r.append)(e,a.volumeClose),o=(0,r.append)(e,'<div class="art-volume-panel"></div>'),l=(0,r.append)(o,'<div class="art-volume-inner"></div>'),c=(0,r.append)(l,'<div class="art-volume-val"></div>'),u=(0,r.append)(l,'<div class="art-volume-slider"></div>'),d=(0,r.append)(u,'<div class="art-volume-handle"></div>'),h=(0,r.append)(d,'<div class="art-volume-loaded"></div>'),f=(0,r.append)(u,'<div class="art-volume-indicator"></div>');function p(e){const{top:t,height:n}=u.getBoundingClientRect();return 1-(e.clientY-t)/n}function m(){if(t.muted||0===t.volume)(0,r.setStyle)(i,"display","none"),(0,r.setStyle)(s,"display","flex"),(0,r.setStyle)(f,"top","100%"),(0,r.setStyle)(h,"top","100%"),c.innerText=0;else{const e=100*t.volume;(0,r.setStyle)(i,"display","flex"),(0,r.setStyle)(s,"display","none"),(0,r.setStyle)(f,"top",100-e+"%"),(0,r.setStyle)(h,"top",100-e+"%"),c.innerText=Math.floor(e)}}if(m(),t.on("video:volumechange",m),n(i,"click",(()=>{t.muted=!0})),n(s,"click",(()=>{t.muted=!1})),r.isMobile)(0,r.setStyle)(o,"display","none");else{let e=!1;n(u,"mousedown",(n=>{e=0===n.button,t.volume=p(n)})),t.on("document:mousemove",(n=>{e&&(t.muted=!1,t.volume=p(n))})),t.on("document:mouseup",(()=>{e&&(e=!1)}))}}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"8BrCu":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,tooltip:t.i18n.get("Show Setting"),mounted:e=>{const{proxy:n,icons:a,i18n:i}=t;(0,r.append)(e,a.setting),n(e,"click",(()=>{t.setting.toggle(),t.setting.updateStyle()})),t.on("setting",(t=>{(0,r.tooltip)(e,i.get(t?"Hide Setting":"Show Setting"))}))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2HiWx":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils"),a=e("./progress");n.default=function(e){return t=>({...e,mounted:e=>{const{option:n,template:{$progress:i,$video:s},events:{proxy:o,loadImg:l}}=t;let c=null,u=!1,d=!1;o(i,"mousemove",(async o=>{if(!u){u=!0;const e=await l(n.thumbnails.url);c=e,d=!0}d&&((0,r.setStyle)(e,"display","flex"),function(o){const{width:l}=(0,a.getPosFromEvent)(t,o),{url:u,number:d,column:h,width:f,height:p}=n.thumbnails,m=f||c.naturalWidth/h,g=p||m/(s.videoWidth/s.videoHeight),v=i.clientWidth/d,y=Math.floor(l/v),b=Math.ceil(y/h)-1,E=y%h||h-1;(0,r.setStyle)(e,"backgroundImage","url(".concat(u,")")),(0,r.setStyle)(e,"height","".concat(g,"px")),(0,r.setStyle)(e,"width","".concat(m,"px")),(0,r.setStyle)(e,"backgroundPosition","-".concat(E*m,"px -").concat(b*g,"px")),l<=m/2?(0,r.setStyle)(e,"left",0):l>i.clientWidth-m/2?(0,r.setStyle)(e,"left",i.clientWidth-m+"px"):(0,r.setStyle)(e,"left",l-m/2+"px")}(o))})),o(i,"mouseleave",(()=>{(0,r.setStyle)(e,"display","none")})),t.on("hover",(t=>{t||(0,r.setStyle)(e,"display","none")}))}})}},{"../utils":"h3rH9","./progress":"aBBSH","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],c1GeG:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,tooltip:t.i18n.get("Screenshot"),mounted:e=>{const{proxy:n,icons:a}=t;(0,r.append)(e,a.screenshot),n(e,"click",(()=>{t.screenshot()}))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"6GRju":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>({...e,tooltip:t.i18n.get("AirPlay"),mounted:e=>{const{proxy:n,icons:a}=t;(0,r.append)(e,a.airplay),n(e,"click",(()=>t.airplay()))}})}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"7iUum":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../utils"),i=e("../utils/component"),s=r.interopDefault(i),o=e("./playbackRate"),l=r.interopDefault(o),c=e("./aspectRatio"),u=r.interopDefault(c),d=e("./flip"),h=r.interopDefault(d),f=e("./info"),p=r.interopDefault(f),m=e("./version"),g=r.interopDefault(m),v=e("./close"),y=r.interopDefault(v);class b extends s.default{constructor(e){super(e),this.name="contextmenu",this.$parent=e.template.$contextmenu,a.isMobile||this.init()}init(){const{option:e,proxy:t,template:{$player:n,$contextmenu:r}}=this.art;e.playbackRate&&this.add((0,l.default)({name:"playbackRate",index:10})),e.aspectRatio&&this.add((0,u.default)({name:"aspectRatio",index:20})),e.flip&&this.add((0,h.default)({name:"flip",index:30})),this.add((0,p.default)({name:"info",index:40})),this.add((0,g.default)({name:"version",index:50})),this.add((0,y.default)({name:"close",index:60}));for(let a=0;a<e.contextmenu.length;a++)this.add(e.contextmenu[a]);t(n,"contextmenu",(e=>{if(e.preventDefault(),!this.art.constructor.CONTEXTMENU)return;this.show=!0;const t=e.clientX,i=e.clientY,{height:s,width:o,left:l,top:c}=n.getBoundingClientRect(),{height:u,width:d}=r.getBoundingClientRect();let h=t-l,f=i-c;t+d>l+o&&(h=o-d),i+u>c+s&&(f=s-u),(0,a.setStyles)(r,{top:"".concat(f,"px"),left:"".concat(h,"px")})})),t(n,"click",(e=>{(0,a.includeFromEvent)(e,r)||(this.show=!1)})),this.art.on("blur",(()=>{this.show=!1}))}}n.default=b},{"../utils":"h3rH9","../utils/component":"guki8","./playbackRate":"f1W36","./aspectRatio":"afxZC","./flip":"9jCuX","./info":"k8wIZ","./version":"bb0TU","./close":"9zTkI","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],f1W36:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>{const{i18n:n,constructor:{PLAYBACK_RATE:a}}=t,i=a.map((e=>'<span data-value="'.concat(e,'">').concat(1===e?n.get("Normal"):e.toFixed(1),"</span>"))).join("");return{...e,html:"".concat(n.get("Play Speed"),": ").concat(i),click:(e,n)=>{const{value:r}=n.target.dataset;r&&(t.playbackRate=Number(r),e.show=!1)},mounted:e=>{const n=(0,r.query)('[data-value="1"]',e);n&&(0,r.inverseClass)(n,"art-current"),t.on("video:ratechange",(()=>{const n=(0,r.queryAll)("span",e).find((e=>Number(e.dataset.value)===t.playbackRate));n&&(0,r.inverseClass)(n,"art-current")}))}}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],afxZC:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>{const{i18n:n,constructor:{ASPECT_RATIO:a}}=t,i=a.map((e=>'<span data-value="'.concat(e,'">').concat("default"===e?n.get("Default"):e,"</span>"))).join("");return{...e,html:"".concat(n.get("Aspect Ratio"),": ").concat(i),click:(e,n)=>{const{value:r}=n.target.dataset;r&&(t.aspectRatio=r,e.show=!1)},mounted:e=>{const n=(0,r.query)('[data-value="default"]',e);n&&(0,r.inverseClass)(n,"art-current"),t.on("aspectRatio",(t=>{const n=(0,r.queryAll)("span",e).find((e=>e.dataset.value===t));n&&(0,r.inverseClass)(n,"art-current")}))}}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"9jCuX":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return t=>{const{i18n:n,constructor:{FLIP:a}}=t,i=a.map((e=>'<span data-value="'.concat(e,'">').concat(n.get((0,r.capitalize)(e)),"</span>"))).join("");return{...e,html:"".concat(n.get("Video Flip"),": ").concat(i),click:(e,n)=>{const{value:r}=n.target.dataset;r&&(t.flip=r.toLowerCase(),e.show=!1)},mounted:e=>{const n=(0,r.query)('[data-value="normal"]',e);n&&(0,r.inverseClass)(n,"art-current"),t.on("flip",(t=>{const n=(0,r.queryAll)("span",e).find((e=>e.dataset.value===t));n&&(0,r.inverseClass)(n,"art-current")}))}}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],k8wIZ:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=function(e){return t=>({...e,html:t.i18n.get("Video Info"),click:e=>{t.info.show=!0,e.show=!1}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],bb0TU:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=function(e){return{...e,html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 5.1.0</a>'}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"9zTkI":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=function(e){return t=>({...e,html:t.i18n.get("Close"),click:e=>{e.show=!1}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],hD2Lg:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./utils"),i=e("./utils/component"),s=r.interopDefault(i);class o extends s.default{constructor(e){super(e),this.name="info",a.isMobile||this.init()}init(){const{proxy:e,constructor:t,template:{$infoPanel:n,$infoClose:r,$video:i}}=this.art;e(r,"click",(()=>{this.show=!1}));let s=null;const o=(0,a.queryAll)("[data-video]",n)||[];this.art.on("destroy",(()=>clearTimeout(s))),function e(){for(let t=0;t<o.length;t++){const e=o[t],n=i[e.dataset.video],r="number"==typeof n?n.toFixed(2):n;e.innerText!==r&&(e.innerText=r)}s=setTimeout(e,t.INFO_LOOP_TIME)}()}}n.default=o},{"./utils":"h3rH9","./utils/component":"guki8","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],lum0D:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./utils"),i=e("./utils/component"),s=r.interopDefault(i),o=e("option-validator"),l=r.interopDefault(o),c=e("./scheme"),u=r.interopDefault(c);class d extends s.default{constructor(e){super(e),this.name="subtitle",this.eventDestroy=()=>null,this.init(e.option.subtitle);let t=!1;e.on("video:timeupdate",(()=>{if(!this.url)return;const e=this.art.template.$video.webkitDisplayingFullscreen;"boolean"==typeof e&&e!==t&&(t=e,this.createTrack(e?"subtitles":"metadata",this.url))}))}get url(){return this.art.template.$track.src}set url(e){this.switch(e)}get textTrack(){return this.art.template.$video.textTracks[0]}get activeCue(){return this.textTrack.activeCues[0]}style(e,t){const{$subtitle:n}=this.art.template;return"object"==typeof e?(0,a.setStyles)(n,e):(0,a.setStyle)(n,e,t)}update(){const{$subtitle:e}=this.art.template;e.innerHTML="",this.activeCue&&(this.art.option.subtitle.escape?e.innerHTML=this.activeCue.text.split(/\r?\n/).map((e=>'<div class="art-subtitle-line">'.concat((0,a.escape)(e),"</div>"))).join(""):e.innerHTML=this.activeCue.text,this.art.emit("subtitleUpdate",this.activeCue.text))}async switch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n,notice:r,option:a}=this.art,i={...a.subtitle,...t,url:e},s=await this.init(i);return t.name&&(r.show="".concat(n.get("Switch Subtitle"),": ").concat(t.name)),s}createTrack(e,t){const{template:n,proxy:r,option:i}=this.art,{$video:s,$track:o}=n,l=(0,a.createElement)("track");l.default=!0,l.kind=e,l.src=t,l.label=i.subtitle.name||"Artplayer",l.track.mode="hidden",this.eventDestroy(),(0,a.remove)(o),(0,a.append)(s,l),n.$track=l,this.eventDestroy=r(this.textTrack,"cuechange",(()=>this.update()))}async init(e){const{notice:t,template:{$subtitle:n}}=this.art;if((0,l.default)(e,u.default.subtitle),e.url)return this.style(e.style),fetch(e.url).then((e=>e.arrayBuffer())).then((t=>{const n=new TextDecoder(e.encoding).decode(t);switch(this.art.emit("subtitleLoad",e.url),e.type||(0,a.getExt)(e.url)){case"srt":{const t=(0,a.srtToVtt)(n),r=e.onVttLoad(t);return(0,a.vttToBlob)(r)}case"ass":{const t=(0,a.assToVtt)(n),r=e.onVttLoad(t);return(0,a.vttToBlob)(r)}case"vtt":{const t=e.onVttLoad(n);return(0,a.vttToBlob)(t)}default:return e.url}})).then((e=>(n.innerHTML="",this.url===e||(URL.revokeObjectURL(this.url),this.createTrack("metadata",e),this.art.emit("subtitleSwitch",e)),e))).catch((e=>{throw n.innerHTML="",t.show=e,e}))}}n.default=d},{"./utils":"h3rH9","./utils/component":"guki8","option-validator":"bAWi2","./scheme":"AdvwB","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"1Epl5":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../utils/error"),i=e("./clickInit"),s=r.interopDefault(i),o=e("./hoverInit"),l=r.interopDefault(o),c=e("./moveInit"),u=r.interopDefault(c),d=e("./resizeInit"),h=r.interopDefault(d),f=e("./gestureInit"),p=r.interopDefault(f),m=e("./viewInit"),g=r.interopDefault(m),v=e("./documentInit"),y=r.interopDefault(v),b=e("./updateInit"),E=r.interopDefault(b);n.default=class{constructor(e){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),this.loadImg=this.loadImg.bind(this),(0,s.default)(e,this),(0,l.default)(e,this),(0,u.default)(e,this),(0,h.default)(e,this),(0,p.default)(e,this),(0,g.default)(e,this),(0,y.default)(e,this),(0,E.default)(e,this)}proxy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Array.isArray(t))return t.map((t=>this.proxy(e,t,n,r)));e.addEventListener(t,n,r);const a=()=>e.removeEventListener(t,n,r);return this.destroyEvents.push(a),a}hover(e,t,n){t&&this.proxy(e,"mouseenter",t),n&&this.proxy(e,"mouseleave",n)}loadImg(e){return new Promise(((t,n)=>{let r;if(e instanceof HTMLImageElement)r=e;else{if("string"!=typeof e)return n(new(0,a.ArtPlayerError)("Unable to get Image"));r=new Image,r.src=e}if(r.complete)return t(r);this.proxy(r,"load",(()=>t(r))),this.proxy(r,"error",(()=>n(new(0,a.ArtPlayerError)("Failed to load Image: ".concat(r.src)))))}))}remove(e){const t=this.destroyEvents.indexOf(e);t>-1&&(e(),this.destroyEvents.splice(t,1))}destroy(){for(let e=0;e<this.destroyEvents.length;e++)this.destroyEvents[e]()}}},{"../utils/error":"2nFlF","./clickInit":"gzL6e","./hoverInit":"kpTJf","./moveInit":"ef6qz","./resizeInit":"9TXOX","./gestureInit":"dePMU","./viewInit":"hDyWF","./documentInit":"7RjDP","./updateInit":"8SmBT","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],gzL6e:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e,t){const{constructor:n,template:{$player:a,$video:i}}=e;t.proxy(document,["click","contextmenu"],(t=>{(0,r.includeFromEvent)(t,a)?(e.isInput="INPUT"===t.target.tagName,e.isFocus=!0,e.emit("focus",t)):(e.isInput=!1,e.isFocus=!1,e.emit("blur",t))}));let s=0;t.proxy(i,"click",(t=>{const a=Date.now(),{MOBILE_CLICK_PLAY:i,DBCLICK_TIME:o,MOBILE_DBCLICK_PLAY:l,DBCLICK_FULLSCREEN:c}=n;a-s<=o?(e.emit("dblclick",t),r.isMobile?!e.isLock&&l&&e.toggle():c&&(e.fullscreen=!e.fullscreen)):(e.emit("click",t),r.isMobile?!e.isLock&&i&&e.toggle():e.toggle()),s=a}))}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],kpTJf:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e,t){const{$player:n}=e.template;t.hover(n,(t=>{(0,r.addClass)(n,"art-hover"),e.emit("hover",!0,t)}),(t=>{(0,r.removeClass)(n,"art-hover"),e.emit("hover",!1,t)}))}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],ef6qz:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=function(e,t){const{$player:n}=e.template;t.proxy(n,"mousemove",(t=>{e.emit("mousemove",t)}))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"9TXOX":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e,t){const{option:n,constructor:a}=e;e.on("resize",(()=>{const{aspectRatio:t,notice:r}=e;"standard"===e.state&&n.autoSize&&e.autoSize(),e.aspectRatio=t,r.show=""}));const i=(0,r.debounce)((()=>e.emit("resize")),a.RESIZE_TIME);t.proxy(window,["orientationchange","resize"],(()=>i())),screen&&screen.orientation&&screen.orientation.onchange&&t.proxy(screen.orientation,"change",(()=>i()))}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],dePMU:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils"),a=e("../control/progress");n.default=function(e,t){if(r.isMobile&&!e.option.isLive){const{$video:n,$progress:i}=e.template;let s=null,o=!1,l=0,c=0,u=0;const d=t=>{if(1===t.touches.length&&!e.isLock){s===i&&(0,a.setCurrentTime)(e,t),o=!0;const{pageX:n,pageY:r}=t.touches[0];l=n,c=r,u=e.currentTime}},h=t=>{if(1===t.touches.length&&o&&e.duration){const{pageX:a,pageY:i}=t.touches[0],o=function(e,t,n,r){var a=t-r,i=n-e,s=0;if(Math.abs(i)<2&&Math.abs(a)<2)return s;var o=function(e,t){return 180*Math.atan2(t,e)/Math.PI}(i,a);return o>=-45&&o<45?s=4:o>=45&&o<135?s=1:o>=-135&&o<-45?s=2:(o>=135&&o<=180||o>=-180&&o<-135)&&(s=3),s}(l,c,a,i),d=[3,4].includes(o),h=[1,2].includes(o);if(d&&!e.isRotate||h&&e.isRotate){const t=(0,r.clamp)((a-l)/e.width,-1,1),o=(0,r.clamp)((i-c)/e.height,-1,1),d=e.isRotate?o:t,h=s===n?e.constructor.TOUCH_MOVE_RATIO:1,f=(0,r.clamp)(u+e.duration*d*h,0,e.duration);e.seek=f,e.emit("setBar","played",(0,r.clamp)(f/e.duration,0,1)),e.notice.show="".concat((0,r.secondToTime)(f)," / ").concat((0,r.secondToTime)(e.duration))}}},f=()=>{o&&(l=0,c=0,u=0,o=!1,s=null)};t.proxy(i,"touchstart",(e=>{s=i,d(e)})),t.proxy(n,"touchstart",(e=>{s=n,d(e)})),t.proxy(n,"touchmove",h),t.proxy(i,"touchmove",h),t.proxy(document,"touchend",f)}}},{"../utils":"h3rH9","../control/progress":"aBBSH","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],hDyWF:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e,t){const{option:n,constructor:a,template:{$container:i}}=e,s=(0,r.throttle)((()=>{e.emit("view",(0,r.isInViewport)(i,a.SCROLL_GAP))}),a.SCROLL_TIME);t.proxy(window,"scroll",(()=>s())),e.on("view",(t=>{n.autoMini&&(e.mini=!t)}))}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"7RjDP":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=function(e,t){t.proxy(document,"mousemove",(t=>{e.emit("document:mousemove",t)})),t.proxy(document,"mouseup",(t=>{e.emit("document:mouseup",t)}))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"8SmBT":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=function(e){if(e.constructor.USE_RAF){let t=null;!function n(){e.playing&&e.emit("raf"),e.isDestroy||(t=requestAnimationFrame(n))}(),e.on("destroy",(()=>{cancelAnimationFrame(t)}))}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],eTow4:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("./utils");n.default=class{constructor(e){this.art=e,this.keys={},e.option.hotkey&&!r.isMobile&&this.init()}init(){const{proxy:e,constructor:t}=this.art;this.add(27,(()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)})),this.add(32,(()=>{this.art.toggle()})),this.add(37,(()=>{this.art.backward=t.SEEK_STEP})),this.add(38,(()=>{this.art.volume+=t.VOLUME_STEP})),this.add(39,(()=>{this.art.forward=t.SEEK_STEP})),this.add(40,(()=>{this.art.volume-=t.VOLUME_STEP})),e(window,"keydown",(e=>{if(this.art.isFocus){const t=document.activeElement.tagName.toUpperCase(),n=document.activeElement.getAttribute("contenteditable");if(!("INPUT"===t||"TEXTAREA"===t||""===n||"true"===n||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){const t=this.keys[e.keyCode];if(t){e.preventDefault();for(let n=0;n<t.length;n++)t[n].call(this.art,e);this.art.emit("hotkey",e)}}}}))}add(e,t){return this.keys[e]?this.keys[e].push(t):this.keys[e]=[t],this}remove(e,t){if(this.keys[e]){const n=this.keys[e].indexOf(t);-1!==n&&this.keys[e].splice(n,1)}return this}}},{"./utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"4fDoD":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./utils/component"),i=r.interopDefault(a);class s extends i.default{constructor(e){super(e);const{option:t,template:{$layer:n}}=e;this.name="layer",this.$parent=n;for(let r=0;r<t.layers.length;r++)this.add(t.layers[r])}}n.default=s},{"./utils/component":"guki8","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],fE0Sp:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./utils"),i=e("./utils/component"),s=r.interopDefault(i);class o extends s.default{constructor(e){super(e),this.name="loading",(0,a.append)(e.template.$loading,e.icons.loading)}}n.default=o},{"./utils":"h3rH9","./utils/component":"guki8","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"9PuGy":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("./utils");n.default=class{constructor(e){this.art=e,this.timer=null}set show(e){const{constructor:t,template:{$player:n,$noticeInner:a}}=this.art;e?(a.innerText=e instanceof Error?e.message.trim():e,(0,r.addClass)(n,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout((()=>{a.innerText="",(0,r.removeClass)(n,"art-notice-show")}),t.NOTICE_TIME)):(0,r.removeClass)(n,"art-notice-show")}}},{"./utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2etr0":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./utils"),i=e("./utils/component"),s=r.interopDefault(i);class o extends s.default{constructor(e){super(e),this.name="mask";const{template:t,icons:n,events:r}=e,i=(0,a.append)(t.$state,n.state),s=(0,a.append)(t.$state,n.error);(0,a.setStyle)(s,"display","none"),e.on("destroy",(()=>{(0,a.setStyle)(i,"display","none"),(0,a.setStyle)(s,"display",null)})),r.proxy(t.$state,"click",(()=>e.play()))}}n.default=o},{"./utils":"h3rH9","./utils/component":"guki8","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"6dYSr":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../utils"),i=e("bundle-text:./loading.svg"),s=r.interopDefault(i),o=e("bundle-text:./state.svg"),l=r.interopDefault(o),c=e("bundle-text:./check.svg"),u=r.interopDefault(c),d=e("bundle-text:./play.svg"),h=r.interopDefault(d),f=e("bundle-text:./pause.svg"),p=r.interopDefault(f),m=e("bundle-text:./volume.svg"),g=r.interopDefault(m),v=e("bundle-text:./volume-close.svg"),y=r.interopDefault(v),b=e("bundle-text:./screenshot.svg"),E=r.interopDefault(b),T=e("bundle-text:./setting.svg"),w=r.interopDefault(T),S=e("bundle-text:./arrow-left.svg"),k=r.interopDefault(S),x=e("bundle-text:./arrow-right.svg"),L=r.interopDefault(x),R=e("bundle-text:./playback-rate.svg"),A=r.interopDefault(R),C=e("bundle-text:./aspect-ratio.svg"),I=r.interopDefault(C),D=e("bundle-text:./config.svg"),_=r.interopDefault(D),P=e("bundle-text:./pip.svg"),O=r.interopDefault(P),M=e("bundle-text:./lock.svg"),F=r.interopDefault(M),N=e("bundle-text:./unlock.svg"),B=r.interopDefault(N),U=e("bundle-text:./fullscreen-off.svg"),j=r.interopDefault(U),H=e("bundle-text:./fullscreen-on.svg"),z=r.interopDefault(H),G=e("bundle-text:./fullscreen-web-off.svg"),V=r.interopDefault(G),K=e("bundle-text:./fullscreen-web-on.svg"),W=r.interopDefault(K),Y=e("bundle-text:./switch-on.svg"),q=r.interopDefault(Y),$=e("bundle-text:./switch-off.svg"),X=r.interopDefault($),Z=e("bundle-text:./flip.svg"),Q=r.interopDefault(Z),J=e("bundle-text:./error.svg"),ee=r.interopDefault(J),te=e("bundle-text:./close.svg"),ne=r.interopDefault(te),re=e("bundle-text:./airplay.svg"),ae=r.interopDefault(re);n.default=class{constructor(e){const t={loading:s.default,state:l.default,play:h.default,pause:p.default,check:u.default,volume:g.default,volumeClose:y.default,screenshot:E.default,setting:w.default,pip:O.default,arrowLeft:k.default,arrowRight:L.default,playbackRate:A.default,aspectRatio:I.default,config:_.default,lock:F.default,flip:Q.default,unlock:B.default,fullscreenOff:j.default,fullscreenOn:z.default,fullscreenWebOff:V.default,fullscreenWebOn:W.default,switchOn:q.default,switchOff:X.default,error:ee.default,close:ne.default,airplay:ae.default,...e.option.icons};for(const n in t)(0,a.def)(this,n,{get:()=>(0,a.getIcon)(n,t[n])})}}},{"../utils":"h3rH9","bundle-text:./loading.svg":"fY5Gt","bundle-text:./state.svg":"iNfLt","bundle-text:./check.svg":"jtE9u","bundle-text:./play.svg":"elgfY","bundle-text:./pause.svg":"eKokJ","bundle-text:./volume.svg":"hNB4y","bundle-text:./volume-close.svg":"i9vta","bundle-text:./screenshot.svg":"kB3Mf","bundle-text:./setting.svg":"3MONs","bundle-text:./arrow-left.svg":"iMCpk","bundle-text:./arrow-right.svg":"3oe4L","bundle-text:./playback-rate.svg":"liE22","bundle-text:./aspect-ratio.svg":"8HqYc","bundle-text:./config.svg":"hYAAH","bundle-text:./pip.svg":"jmNrH","bundle-text:./lock.svg":"cIqko","bundle-text:./unlock.svg":"65zy4","bundle-text:./fullscreen-off.svg":"jaJRT","bundle-text:./fullscreen-on.svg":"cRY1X","bundle-text:./fullscreen-web-off.svg":"3aVGL","bundle-text:./fullscreen-web-on.svg":"4DiVn","bundle-text:./switch-on.svg":"kwdKE","bundle-text:./switch-off.svg":"bWfXZ","bundle-text:./flip.svg":"h3zZ9","bundle-text:./error.svg":"7Oyth","bundle-text:./close.svg":"U5Jcy","bundle-text:./airplay.svg":"jK5Fx","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],fY5Gt:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><path fill="none" class="bk" d="M0 0h100v100H0z"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(30 105.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(60 75.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(90 65 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(120 58.66 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(150 54.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(180 50 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-150 45.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-120 41.34 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-90 35 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>'},{}],iNfLt:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path fill="#fff" d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg>'},{}],jtE9u:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width:100%;height:100%"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"/></svg>'},{}],elgfY:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"/></svg>'},{}],eKokJ:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zm8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"/></svg>'},{}],hNB4y:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zm4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"/><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"/></svg>'},{}],i9vta:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"/><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zm5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"/></svg>'},{}],kB3Mf:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10Zm0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8Z"/></svg>'},{}],"3MONs":[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg>'},{}],iMCpk:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6z" fill="#fff"/></svg>'},{}],"3oe4L":[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6z" fill="#fff"/></svg>'},{}],liE22:[function(e,t,n){t.exports='<svg height="24" width="24"><path d="M10 8v8l6-4-6-4zM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2zM5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8zm0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4l.8-.7zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22l.1-1zM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"8HqYc":[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width:100%;height:100%;transform:translate(0,0)"><defs><clipPath id="__lottie_element_216"><path d="M0 0h88v88H0z"/></clipPath></defs><g style="display:block" clip-path="url(\'#__lottie_element_216\')"><path fill="#FFF" d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 0l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31c-.78-.79-2.04-.79-2.83 0zm-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13-2.83-2.82zM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8h56z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></svg>'},{}],hYAAH:[function(e,t,n){t.exports='<svg height="24" width="24"><path d="M15 17h6v1h-6v-1zm-4 0H3v1h8v2h1v-5h-1v2zm3-9h1V3h-1v2H3v1h11v2zm4-3v1h3V5h-3zM6 14h1V9H6v2H3v1h3v2zm4-2h11v-1H10v1z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],jmNrH:[function(e,t,n){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25 17h-8v6h8v-6Zm4 8V10.98C29 9.88 28.1 9 27 9H9c-1.1 0-2 .88-2 1.98V25c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2Zm-2 .02H9V10.97h18v14.05Z"/></svg>'},{}],cIqko:[function(e,t,n){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M298.667 426.667v-85.334a213.333 213.333 0 1 1 426.666 0v85.334H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667zM512 213.333a128 128 0 0 0-128 128v85.334h256v-85.334a128 128 0 0 0-128-128z" fill="#fff"/></svg>'},{}],"65zy4":[function(e,t,n){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.334a213.333 213.333 0 0 1 368.085-146.816z" fill="#fff"/></svg>'},{}],jaJRT:[function(e,t,n){t.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M768 298.667h170.667V384h-256V128H768v170.667zM341.333 384h-256v-85.333H256V128h85.333v256zM768 725.333V896h-85.333V640h256v85.333H768zM341.333 640v256H256V725.333H85.333V640h256z"/></svg>'},{}],cRY1X:[function(e,t,n){t.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M625.778 256H768v142.222h113.778v-256h-256V256zM256 398.222V256h142.222V142.222h-256v256H256zm512 227.556V768H625.778v113.778h256v-256H768zM398.222 768H256V625.778H142.222v256h256V768z"/></svg>'},{}],"3aVGL":[function(e,t,n){t.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384H896zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448H256z"/></svg>'},{}],"4DiVn":[function(e,t,n){t.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448H448zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384H704z"/></svg>'},{}],kwdKE:[function(e,t,n){t.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1664 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#648FFC" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024zm0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448z"/></svg>'},{}],bWfXZ:[function(e,t,n){t.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1740 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898zm-.564-975.36A464.589 464.589 0 1 1 48.026 513.024 463.872 463.872 0 0 1 511.334 48.435v.205z"/></svg>'},{}],h3zZ9:[function(e,t,n){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M554.667 810.667V896h-85.334v-85.333h85.334zm-384-632.662a42.667 42.667 0 0 1 34.986 18.219l203.904 291.328a42.667 42.667 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667zm682.666 0a42.667 42.667 0 0 1 42.368 37.718l.299 4.949v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.667 42.667 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.667 42.667 0 0 1 34.944-18.219zM554.667 640v85.333h-85.334V640h85.334zm-358.4-320.896V716.8L335.957 512 196.31 319.104zm358.4 150.23v85.333h-85.334v-85.334h85.334zm0-170.667V384h-85.334v-85.333h85.334zm0-170.667v85.333h-85.334V128h85.334z" fill="#fff"/></svg>'},{}],"7Oyth":[function(e,t,n){t.exports='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.082 93.082 0 0 1 34.448 33.341zM512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88zm0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2z"/></svg>'},{}],U5Jcy:[function(e,t,n){t.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733-17.066-17.067-42.666-17.067-59.733 0L512 452.267l-268.8-268.8c-17.067-17.067-42.667-17.067-59.733 0-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733L571.733 512z"/></svg>'},{}],jK5Fx:[function(e,t,n){t.exports='<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/><path d="M4 17h10l-5-6z"/></g></svg>'},{}],bRHiA:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("./flip"),i=r.interopDefault(a),s=e("./aspectRatio"),o=r.interopDefault(s),l=e("./playbackRate"),c=r.interopDefault(l),u=e("./subtitleOffset"),d=r.interopDefault(u),h=e("../utils/component"),f=r.interopDefault(h),p=e("../utils/error"),m=e("../utils");class g extends f.default{constructor(e){super(e);const{option:t,controls:n,template:{$setting:r}}=e;this.name="setting",this.$parent=r,this.option=[],this.events=[],this.cache=new Map,t.setting&&(this.init(),e.on("blur",(()=>{this.show&&(this.show=!1,this.render(this.option))})),e.on("focus",(e=>{const t=(0,m.includeFromEvent)(e,n.setting),r=(0,m.includeFromEvent)(e,this.$parent);!this.show||t||r||(this.show=!1,this.render(this.option))})))}static makeRecursion(e,t,n){for(let r=0;r<e.length;r++){const a=e[r];a.$parentItem=t,a.$parentList=n,g.makeRecursion(a.selector||[],a,e)}return e}get defaultSettings(){const e=[],{option:t}=this.art;return t.playbackRate&&e.push((0,c.default)(this.art)),t.aspectRatio&&e.push((0,o.default)(this.art)),t.flip&&e.push((0,i.default)(this.art)),t.subtitleOffset&&e.push((0,d.default)(this.art)),e}init(){const{option:e}=this.art,t=[...this.defaultSettings,...e.settings];this.option=g.makeRecursion(t),this.destroy(),this.render(this.option)}destroy(){for(let e=0;e<this.events.length;e++)this.art.events.remove(this.events[e]);this.$parent.innerHTML="",this.events=[],this.cache=new Map}find(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.option;for(let n=0;n<t.length;n++){const r=t[n];if(r.name===e)return r;{const t=this.find(e,r.selector||[]);if(t)return t}}}remove(e){const t=this.find(e);(0,p.errorHandle)(t,"Can't find [".concat(e,"] from the [setting]"));const n=t.$parentItem?t.$parentItem.selector:this.option;return n.splice(n.indexOf(t),1),this.option=g.makeRecursion(this.option),this.destroy(),this.render(this.option),this.option}update(e){const t=this.find(e.name);return t?(Object.assign(t,e),this.option=g.makeRecursion(this.option),this.destroy(),this.render(this.option)):this.add(e),this.option}add(e){return this.option.push(e),this.option=g.makeRecursion(this.option),this.destroy(),this.render(this.option),this.option}creatHeader(e){const{icons:t,proxy:n,constructor:r}=this.art,a=(0,m.createElement)("div");(0,m.setStyle)(a,"height","".concat(r.SETTING_ITEM_HEIGHT,"px")),(0,m.addClass)(a,"art-setting-item"),(0,m.addClass)(a,"art-setting-item-back");const i=(0,m.append)(a,'<div class="art-setting-item-left"></div>'),s=(0,m.createElement)("div");(0,m.addClass)(s,"art-setting-item-left-icon"),(0,m.append)(s,t.arrowLeft),(0,m.append)(i,s),(0,m.append)(i,e.$parentItem.html);const o=n(a,"click",(()=>this.render(e.$parentList)));return this.events.push(o),a}creatItem(e,t){const{icons:n,proxy:r,constructor:a}=this.art,i=(0,m.createElement)("div");(0,m.addClass)(i,"art-setting-item"),(0,m.setStyle)(i,"height","".concat(a.SETTING_ITEM_HEIGHT,"px")),(0,m.isStringOrNumber)(t.name)&&(i.dataset.name=t.name),(0,m.isStringOrNumber)(t.value)&&(i.dataset.value=t.value);const s=(0,m.append)(i,'<div class="art-setting-item-left"></div>'),o=(0,m.append)(i,'<div class="art-setting-item-right"></div>'),l=(0,m.createElement)("div");switch((0,m.addClass)(l,"art-setting-item-left-icon"),e){case"switch":case"range":(0,m.append)(l,(0,m.isStringOrNumber)(t.icon)||t.icon instanceof Element?t.icon:n.config);break;case"selector":t.selector&&t.selector.length?(0,m.append)(l,(0,m.isStringOrNumber)(t.icon)||t.icon instanceof Element?t.icon:n.config):(0,m.append)(l,n.check)}(0,m.append)(s,l),t.$icon=l,(0,m.def)(t,"icon",{configurable:!0,get:()=>l.innerHTML,set(e){(0,m.isStringOrNumber)(e)&&(l.innerHTML=e)}});const c=(0,m.createElement)("div");(0,m.addClass)(c,"art-setting-item-left-text"),(0,m.append)(c,t.html||""),(0,m.append)(s,c),t.$html=c,(0,m.def)(t,"html",{configurable:!0,get:()=>c.innerHTML,set(e){(0,m.isStringOrNumber)(e)&&(c.innerHTML=e)}});const u=(0,m.createElement)("div");switch((0,m.addClass)(u,"art-setting-item-right-tooltip"),(0,m.append)(u,t.tooltip||""),(0,m.append)(o,u),t.$tooltip=u,(0,m.def)(t,"tooltip",{configurable:!0,get:()=>u.innerHTML,set(e){(0,m.isStringOrNumber)(e)&&(u.innerHTML=e)}}),e){case"switch":{const e=(0,m.createElement)("div");(0,m.addClass)(e,"art-setting-item-right-icon");const r=(0,m.append)(e,n.switchOn),a=(0,m.append)(e,n.switchOff);(0,m.setStyle)(t.switch?a:r,"display","none"),(0,m.append)(o,e),t.$switch=t.switch,(0,m.def)(t,"switch",{configurable:!0,get:()=>t.$switch,set(e){t.$switch=e,e?((0,m.setStyle)(a,"display","none"),(0,m.setStyle)(r,"display",null)):((0,m.setStyle)(a,"display",null),(0,m.setStyle)(r,"display","none"))}});break}case"range":{const e=(0,m.createElement)("div");(0,m.addClass)(e,"art-setting-item-right-icon");const n=(0,m.append)(e,'<input type="range">');n.value=t.range[0]||0,n.min=t.range[1]||0,n.max=t.range[2]||10,n.step=t.range[3]||1,(0,m.addClass)(n,"art-setting-range"),(0,m.append)(o,e),t.$range=n,(0,m.def)(t,"range",{configurable:!0,get:()=>n.valueAsNumber,set(e){n.value=Number(e)}})}break;case"selector":if(t.selector&&t.selector.length){const e=(0,m.createElement)("div");(0,m.addClass)(e,"art-setting-item-right-icon"),(0,m.append)(e,n.arrowRight),(0,m.append)(o,e)}}switch(e){case"switch":if(t.onSwitch){const e=r(i,"click",(async e=>{t.switch=await t.onSwitch.call(this.art,t,i,e)}));this.events.push(e)}break;case"range":if(t.$range){if(t.onRange){const e=r(t.$range,"change",(async e=>{t.tooltip=await t.onRange.call(this.art,t,i,e)}));this.events.push(e)}if(t.onChange){const e=r(t.$range,"input",(async e=>{t.tooltip=await t.onChange.call(this.art,t,i,e)}));this.events.push(e)}}break;case"selector":{const e=r(i,"click",(async e=>{if(t.selector&&t.selector.length)this.render(t.selector,t.width);else{(0,m.inverseClass)(i,"art-current");for(let e=0;e<t.$parentItem.selector.length;e++){const n=t.$parentItem.selector[e];n.default=n===t}if(t.$parentList&&this.render(t.$parentList),t.$parentItem&&t.$parentItem.onSelect){const n=await t.$parentItem.onSelect.call(this.art,t,i,e);t.$parentItem.$tooltip&&(0,m.isStringOrNumber)(n)&&(t.$parentItem.$tooltip.innerHTML=n)}}}));this.events.push(e),t.default&&(0,m.addClass)(i,"art-current")}}return i}updateStyle(e){const{controls:t,constructor:n,template:{$player:r,$setting:a}}=this.art;if(t.setting&&!m.isMobile){const i=e||n.SETTING_WIDTH,{left:s,width:o}=t.setting.getBoundingClientRect(),{left:l,width:c}=r.getBoundingClientRect(),u=s-l+o/2-i/2;u+i>c?((0,m.setStyle)(a,"left",null),(0,m.setStyle)(a,"right",null)):((0,m.setStyle)(a,"left","".concat(u,"px")),(0,m.setStyle)(a,"right","auto"))}}render(e,t){const{constructor:n}=this.art;if(this.cache.has(e)){const t=this.cache.get(e);(0,m.inverseClass)(t,"art-current"),(0,m.setStyle)(this.$parent,"width","".concat(t.dataset.width,"px")),(0,m.setStyle)(this.$parent,"height","".concat(t.dataset.height,"px")),this.updateStyle(Number(t.dataset.width))}else{const r=(0,m.createElement)("div");(0,m.addClass)(r,"art-setting-panel"),r.dataset.width=t||n.SETTING_WIDTH,r.dataset.height=e.length*n.SETTING_ITEM_HEIGHT,e[0]&&e[0].$parentItem&&((0,m.append)(r,this.creatHeader(e[0])),r.dataset.height=Number(r.dataset.height)+n.SETTING_ITEM_HEIGHT);for(let t=0;t<e.length;t++){const n=e[t];(0,m.has)(n,"switch")?(0,m.append)(r,this.creatItem("switch",n)):(0,m.has)(n,"range")?(0,m.append)(r,this.creatItem("range",n)):(0,m.append)(r,this.creatItem("selector",n))}(0,m.append)(this.$parent,r),this.cache.set(e,r),(0,m.inverseClass)(r,"art-current"),(0,m.setStyle)(this.$parent,"width","".concat(r.dataset.width,"px")),(0,m.setStyle)(this.$parent,"height","".concat(r.dataset.height,"px")),this.updateStyle(Number(r.dataset.width)),e[0]&&e[0].$parentItem&&e[0].$parentItem.mounted&&e[0].$parentItem.mounted.call(this.art,r,e[0].$parentItem)}}}n.default=g},{"./flip":"bNOaj","./aspectRatio":"5lAsp","./playbackRate":"e6hsR","./subtitleOffset":"fFNEr","../utils/component":"guki8","../utils/error":"2nFlF","../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],bNOaj:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,icons:n,constructor:{SETTING_ITEM_WIDTH:a,FLIP:i}}=e;function s(e,n,a){n&&(n.innerText=t.get((0,r.capitalize)(a)));const i=(0,r.queryAll)(".art-setting-item",e).find((e=>e.dataset.value===a));i&&(0,r.inverseClass)(i,"art-current")}return{width:a,name:"flip",html:t.get("Video Flip"),tooltip:t.get((0,r.capitalize)(e.flip)),icon:n.flip,selector:i.map((n=>({value:n,name:"aspect-ratio-".concat(n),default:n===e.flip,html:t.get((0,r.capitalize)(n))}))),onSelect:t=>(e.flip=t.value,t.html),mounted:(t,n)=>{s(t,n.$tooltip,e.flip),e.on("flip",(()=>{s(t,n.$tooltip,e.flip)}))}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"5lAsp":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,icons:n,constructor:{SETTING_ITEM_WIDTH:a,ASPECT_RATIO:i}}=e;function s(e){return"default"===e?t.get("Default"):e}function o(e,t,n){t&&(t.innerText=s(n));const a=(0,r.queryAll)(".art-setting-item",e).find((e=>e.dataset.value===n));a&&(0,r.inverseClass)(a,"art-current")}return{width:a,name:"aspect-ratio",html:t.get("Aspect Ratio"),icon:n.aspectRatio,tooltip:s(e.aspectRatio),selector:i.map((t=>({value:t,name:"aspect-ratio-".concat(t),default:t===e.aspectRatio,html:s(t)}))),onSelect:t=>(e.aspectRatio=t.value,t.html),mounted:(t,n)=>{o(t,n.$tooltip,e.aspectRatio),e.on("aspectRatio",(()=>{o(t,n.$tooltip,e.aspectRatio)}))}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],e6hsR:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,icons:n,constructor:{SETTING_ITEM_WIDTH:a,PLAYBACK_RATE:i}}=e;function s(e){return 1===e?t.get("Normal"):e.toFixed(1)}function o(e,t,n){t&&(t.innerText=s(n));const a=(0,r.queryAll)(".art-setting-item",e).find((e=>Number(e.dataset.value)===n));a&&(0,r.inverseClass)(a,"art-current")}return{width:a,name:"playback-rate",html:t.get("Play Speed"),tooltip:s(e.playbackRate),icon:n.playbackRate,selector:i.map((t=>({value:t,name:"aspect-ratio-".concat(t),default:t===e.playbackRate,html:s(t)}))),onSelect:t=>(e.playbackRate=t.value,t.html),mounted:(t,n)=>{o(t,n.$tooltip,e.playbackRate),e.on("video:ratechange",(()=>{o(t,n.$tooltip,e.playbackRate)}))}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],fFNEr:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=function(e){const{i18n:t,icons:n,constructor:r}=e;return{width:r.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:t.get("Subtitle Offset"),icon:n.subtitle,tooltip:"0s",range:[0,-5,5,.1],onChange:t=>(e.subtitleOffset=t.range,t.range+"s")}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],f2Thp:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n),n.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(e){try{const t=JSON.parse(window.localStorage.getItem(this.name))||{};return e?t[e]:t}catch(t){return e?this.settings[e]:this.settings}}set(e,t){try{const n=Object.assign({},this.get(),{[e]:t});window.localStorage.setItem(this.name,JSON.stringify(n))}catch(n){this.settings[e]=t}}del(e){try{const t=this.get();delete t[e],window.localStorage.setItem(this.name,JSON.stringify(t))}catch(t){delete this.settings[e]}}clear(){try{window.localStorage.removeItem(this.name)}catch(e){this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"96ThS":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var a=e("../utils"),i=e("./miniProgressBar"),s=r.interopDefault(i),o=e("./autoOrientation"),l=r.interopDefault(o),c=e("./autoPlayback"),u=r.interopDefault(c),d=e("./fastForward"),h=r.interopDefault(d),f=e("./lock"),p=r.interopDefault(f);n.default=class{constructor(e){this.art=e,this.id=0;const{option:t}=e;t.miniProgressBar&&!t.isLive&&this.add(s.default),t.lock&&a.isMobile&&this.add(p.default),t.autoPlayback&&!t.isLive&&this.add(u.default),t.autoOrientation&&a.isMobile&&this.add(l.default),t.fastForward&&a.isMobile&&!t.isLive&&this.add(h.default);for(let n=0;n<t.plugins.length;n++)this.add(t.plugins[n])}async add(e){this.id+=1;const t=await e.call(this.art,this.art),n=t&&t.name||e.name||"plugin".concat(this.id);return(0,a.errorHandle)(!(0,a.has)(this,n),"Cannot add a plugin that already has the same name: ".concat(n)),(0,a.def)(this,n,{value:t}),this}}},{"../utils":"h3rH9","./miniProgressBar":"iBx4M","./autoOrientation":"2O9qO","./autoPlayback":"iiOc1","./fastForward":"d9NUE","./lock":"5dnKh","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],iBx4M:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){return e.on("control",(t=>{t?(0,r.removeClass)(e.template.$player,"art-mini-progress-bar"):(0,r.addClass)(e.template.$player,"art-mini-progress-bar")})),{name:"mini-progress-bar"}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"2O9qO":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{constructor:t,template:{$player:n,$video:a}}=e;return e.on("fullscreenWeb",(i=>{if(i){const{videoWidth:i,videoHeight:s}=a,{clientWidth:o,clientHeight:l}=document.documentElement;(i>s&&o<l||i<s&&o>l)&&setTimeout((()=>{(0,r.setStyle)(n,"width","".concat(l,"px")),(0,r.setStyle)(n,"height","".concat(o,"px")),(0,r.setStyle)(n,"transform-origin","0 0"),(0,r.setStyle)(n,"transform","rotate(90deg) translate(0, -".concat(o,"px)")),(0,r.addClass)(n,"art-auto-orientation"),e.isRotate=!0,e.emit("resize")}),t.AUTO_ORIENTATION_TIME)}else(0,r.hasClass)(n,"art-auto-orientation")&&((0,r.removeClass)(n,"art-auto-orientation"),e.isRotate=!1,e.emit("resize"))})),e.on("fullscreen",(async e=>{const t=screen.orientation.type;if(e){const{videoWidth:e,videoHeight:i}=a,{clientWidth:s,clientHeight:o}=document.documentElement;if(e>i&&s<o||e<i&&s>o){const e=t.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(e),(0,r.addClass)(n,"art-auto-orientation-fullscreen")}}else(0,r.hasClass)(n,"art-auto-orientation-fullscreen")&&(await screen.orientation.lock(t),(0,r.removeClass)(n,"art-auto-orientation-fullscreen"))})),{name:"autoOrientation",get state(){return(0,r.hasClass)(n,"art-auto-orientation")}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],iiOc1:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{i18n:t,icons:n,storage:a,constructor:i,proxy:s,template:{$poster:o}}=e,l=e.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),c=(0,r.query)(".art-auto-playback-last",l),u=(0,r.query)(".art-auto-playback-jump",l),d=(0,r.query)(".art-auto-playback-close",l);return e.on("video:timeupdate",(()=>{if(e.playing){const t=a.get("times")||{},n=Object.keys(t);n.length>i.AUTO_PLAYBACK_MAX&&delete t[n[0]],t[e.option.id||e.option.url]=e.currentTime,a.set("times",t)}})),e.on("ready",(()=>{const h=(a.get("times")||{})[e.option.id||e.option.url];h&&h>=i.AUTO_PLAYBACK_MIN&&((0,r.append)(d,n.close),(0,r.setStyle)(l,"display","flex"),c.innerText="".concat(t.get("Last Seen")," ").concat((0,r.secondToTime)(h)),u.innerText=t.get("Jump Play"),s(d,"click",(()=>{(0,r.setStyle)(l,"display","none")})),s(u,"click",(()=>{e.seek=h,e.play(),(0,r.setStyle)(o,"display","none"),(0,r.setStyle)(l,"display","none")})),e.once("video:timeupdate",(()=>{setTimeout((()=>{(0,r.setStyle)(l,"display","none")}),i.AUTO_PLAYBACK_TIMEOUT)})))})),{name:"auto-playback",get times(){return a.get("times")||{}},clear:()=>a.del("times"),delete(e){const t=a.get("times")||{};return delete t[e],a.set("times",t),t}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],d9NUE:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{constructor:t,proxy:n,template:{$player:a,$video:i}}=e;let s=null,o=!1,l=1;const c=()=>{clearTimeout(s),o&&(o=!1,e.playbackRate=l,(0,r.removeClass)(a,"art-fast-forward"))};return n(i,"touchstart",(n=>{1===n.touches.length&&e.playing&&!e.isLock&&(s=setTimeout((()=>{o=!0,l=e.playbackRate,e.playbackRate=t.FAST_FORWARD_VALUE,(0,r.addClass)(a,"art-fast-forward")}),t.FAST_FORWARD_TIME))})),n(document,"touchmove",c),n(document,"touchend",c),{name:"fastForward",get state(){return(0,r.hasClass)(a,"art-fast-forward")}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}],"5dnKh":[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("../utils");n.default=function(e){const{layers:t,icons:n,template:{$player:a}}=e;return t.add({name:"lock",mounted(t){const a=(0,r.append)(t,n.lock),i=(0,r.append)(t,n.unlock);(0,r.setStyle)(a,"display","none"),e.on("lock",(e=>{e?((0,r.setStyle)(a,"display","inline-flex"),(0,r.setStyle)(i,"display","none")):((0,r.setStyle)(a,"display","none"),(0,r.setStyle)(i,"display","inline-flex"))}))},click(){(0,r.hasClass)(a,"art-lock")?((0,r.removeClass)(a,"art-lock"),this.isLock=!1,e.emit("lock",!1)):((0,r.addClass)(a,"art-lock"),this.isLock=!0,e.emit("lock",!0))}}),{name:"lock",get state(){return(0,r.hasClass)(a,"art-lock")}}}},{"../utils":"h3rH9","@parcel/transformer-js/src/esmodule-helpers.js":"guZOB"}]},["abjMI"],"abjMI","parcelRequireb749")},888:(e,t,n)=>{"use strict";var r=n(47);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),a=n(296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var F,N=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case x:return"Profiler";case k:return"StrictMode";case C:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case L:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,ke=null;function xe(e){if(e=ba(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=Ta(t),we(e.stateNode,e.type,t))}}function Le(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Re(){if(Se){var e=Se,t=ke;if(ke=Se=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Ie=!1;function De(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ae(e,t,n)}finally{Ie=!1,(null!==Se||null!==ke)&&(Ce(),Re())}}function _e(e,t){var n=e.stateNode;if(null===n)return null;var r=Ta(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Me(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Ne=null,Be=!1,Ue=null,je={onError:function(e){Fe=!0,Ne=e}};function He(e,t,n,r,a,i,s,o,l){Fe=!1,Ne=null,Me.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(ze(e)!==e)throw Error(i(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return Ve(a),e;if(s===r)return Ve(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ye=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,$e=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Ze=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~a;0!==o?r=dt(o):0!==(i&=s)&&(r=dt(i))}else 0!==(s=n&~a)?r=dt(s):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-st(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Tt,wt,St,kt,xt,Lt=!1,Rt=[],At=null,Ct=null,It=null,Dt=new Map,_t=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Ft(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Nt(e){var t=ya(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void xt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function Ut(e,t,n){Bt(e)&&n.delete(t)}function jt(){Lt=!1,null!==At&&Bt(At)&&(At=null),null!==Ct&&Bt(Ct)&&(Ct=null),null!==It&&Bt(It)&&(It=null),Dt.forEach(Ut),_t.forEach(Ut)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Lt||(Lt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Ht(t,e)}if(0<Rt.length){Ht(Rt[0],e);for(var n=1;n<Rt.length;n++){var r=Rt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Ht(At,e),null!==Ct&&Ht(Ct,e),null!==It&&Ht(It,e),Dt.forEach(t),_t.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Nt(n),null===n.blockedOn&&Pt.shift()}var Gt=E.ReactCurrentBatchConfig,Vt=!0;function Kt(e,t,n,r){var a=bt,i=Gt.transition;Gt.transition=null;try{bt=1,Yt(e,t,n,r)}finally{bt=a,Gt.transition=i}}function Wt(e,t,n,r){var a=bt,i=Gt.transition;Gt.transition=null;try{bt=4,Yt(e,t,n,r)}finally{bt=a,Gt.transition=i}}function Yt(e,t,n,r){if(Vt){var a=$t(e,t,n,r);if(null===a)Vr(e,t,r,qt,n),Mt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return At=Ft(At,e,t,n,r,a),!0;case"dragenter":return Ct=Ft(Ct,e,t,n,r,a),!0;case"mouseover":return It=Ft(It,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Dt.set(i,Ft(Dt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,_t.set(i,Ft(_t.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&Tt(i),null===(i=$t(e,t,n,r))&&Vr(e,t,r,qt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var qt=null;function $t(e,t,n,r){if(qt=null,null!==(e=ya(e=Te(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,a="value"in Zt?Zt.value:Zt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=N({},cn,{view:0,detail:0}),hn=an(dn),fn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),mn=an(N({},fn,{dataTransfer:0})),gn=an(N({},dn,{relatedTarget:0})),vn=an(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),En=an(N({},cn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function xn(){return kn}var Ln=N({},dn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=an(Ln),An=an(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),In=an(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=N({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_n=an(Dn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Mn,Nn=u&&(!On||Mn&&8<Mn&&11>=Mn),Bn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Kn(e,t,n,r){Le(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Yn=null;function qn(e){Br(e,0)}function $n(e){if(Y(Ea(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Yn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];Kn(t,Yn,e,Te(e)),De(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ir(e,t){if("click"===e)return $n(t)}function sr(e,t){if("input"===e||"change"===e)return $n(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=ur(n,i);var s=ur(n,r);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionend:Tr("Transition","TransitionEnd")},Sr={},kr={};function xr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Lr=xr("animationend"),Rr=xr("animationiteration"),Ar=xr("animationstart"),Cr=xr("transitionend"),Ir=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];_r(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}_r(Lr,"onAnimationEnd"),_r(Rr,"onAnimationIteration"),_r(Ar,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,s,o,l,c){if(He.apply(this,arguments),Fe){if(!Fe)throw Error(i(198));var u=Ne;Fe=!1,Ne=null,Be||(Be=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;Nr(a,o,c),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;Nr(a,o,c),i=l}}}if(Be)throw e=Ue,Be=!1,Ue=null,e}function Ur(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Hr]){e[Hr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,jr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Xt(t)){case 1:var a=Kt;break;case 4:a=Wt;break;default:a=Yt}n=a.bind(null,t,n,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=ya(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}De((function(){var r=i,a=Te(n),s=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Rn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Lr:case Rr:case Ar:l=vn;break;case Cr:l=In;break;case"scroll":l=hn;break;case"wheel":l=_n;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=_e(p,h))&&u.push(Kr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,a),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Ee||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ea(l),f=null==c?o:Ea(c),(o=new u(m,p+"leave",l,n,a)).target=d,o.relatedTarget=f,m=null,ya(a)===r&&((u=new u(h,p+"enter",c,n,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=h;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&qr(s,o,l,u,!1),null!==c&&null!==d&&qr(s,d,c,u,!0)}if("select"===(l=(o=r?Ea(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Vn(o))if(Zn)g=sr;else{g=ar;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Kn(s,g,n,a):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?Ea(r):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,Er(s,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Er(s,n,a)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Qt="value"in(Zt=a)?Zt.value:Zt.textContent,zn=!0)),0<(v=Wr(r,b)).length&&(b=new En(b,e,null,n,a),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Jt=Qt=Zt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(a=new En("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=y))}Br(s,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=_e(e,n))&&r.unshift(Kr(e,i,a)),null!=(i=_e(e,t))&&r.push(Kr(e,i,a))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=_e(n,i))&&s.unshift(Kr(n,l,o)):a||null!=(l=_e(n,i))&&s.push(Kr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ea(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Ta(e){return e[fa]||null}var wa=[],Sa=-1;function ka(e){return{current:e}}function xa(e){0>Sa||(e.current=wa[Sa],wa[Sa]=null,Sa--)}function La(e,t){Sa++,wa[Sa]=e.current,e.current=t}var Ra={},Aa=ka(Ra),Ca=ka(!1),Ia=Ra;function Da(e,t){var n=e.type.contextTypes;if(!n)return Ra;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function _a(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){xa(Ca),xa(Aa)}function Oa(e,t,n){if(Aa.current!==Ra)throw Error(i(168));La(Aa,t),La(Ca,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,G(e)||"Unknown",a));return N({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ra,Ia=Aa.current,La(Aa,e),La(Ca,Ca.current),!0}function Na(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ma(e,t,Ia),r.__reactInternalMemoizedMergedChildContext=e,xa(Ca),xa(Aa),La(Aa,e)):xa(Ca),La(Ca,n)}var Ba=null,Ua=!1,ja=!1;function Ha(e){null===Ba?Ba=[e]:Ba.push(e)}function za(){if(!ja&&null!==Ba){ja=!0;var e=0,t=bt;try{var n=Ba;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ba=null,Ua=!1}catch(a){throw null!==Ba&&(Ba=Ba.slice(e+1)),Ye(Je,za),a}finally{bt=t,ja=!1}}return null}var Ga=[],Va=0,Ka=null,Wa=0,Ya=[],qa=0,$a=null,Xa=1,Za="";function Qa(e,t){Ga[Va++]=Wa,Ga[Va++]=Ka,Ka=e,Wa=t}function Ja(e,t,n){Ya[qa++]=Xa,Ya[qa++]=Za,Ya[qa++]=$a,$a=e;var r=Xa;e=Za;var a=32-st(r)-1;r&=~(1<<a),n+=1;var i=32-st(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Xa=1<<32-st(t)+a|n<<a|r,Za=i+e}else Xa=1<<i|n<<a|r,Za=e}function ei(e){null!==e.return&&(Qa(e,1),Ja(e,1,0))}function ti(e){for(;e===Ka;)Ka=Ga[--Va],Ga[Va]=null,Wa=Ga[--Va],Ga[Va]=null;for(;e===$a;)$a=Ya[--qa],Ya[qa]=null,Za=Ya[--qa],Ya[qa]=null,Xa=Ya[--qa],Ya[qa]=null}var ni=null,ri=null,ai=!1,ii=null;function si(e,t){var n=_c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$a?{id:Xa,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_c(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&oi(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ui(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)si(e,t),t=ca(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=ca(e.nextSibling)}function fi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=E.ReactCurrentBatchConfig;function gi(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vi=ka(null),yi=null,bi=null,Ei=null;function Ti(){Ei=bi=yi=null}function wi(e){var t=vi.current;xa(vi),e._currentValue=t}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t){yi=e,Ei=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Eo=!0),e.firstContext=null)}function xi(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Li=null;function Ri(e){null===Li?Li=[e]:Li.push(e)}function Ai(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ri(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ci(e,r)}function Ci(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ii=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _i(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ci(e,n)}return null===(a=r.interleaved)?(t.next=t,Ri(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ci(e,n)}function Mi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ni(e,t,n,r){var a=e.updateQueue;Ii=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=N({},d,h);break e;case 2:Ii=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Nl|=s,e.lanes=s,e.memoizedState=d}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Ui=(new r.Component).refs;function ji(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Hi={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=Pi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,a))&&(rc(t,e,a,r),Mi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=Pi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,a))&&(rc(t,e,a,r),Mi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=Pi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Oi(e,a,r))&&(rc(t,e,r,n),Mi(t,e,r))}};function zi(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function Gi(e,t,n){var r=!1,a=Ra,i=t.contextType;return"object"===typeof i&&null!==i?i=xi(i):(a=_a(t)?Ia:Aa.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):Ra),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Hi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Vi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hi.enqueueReplaceState(t,t.state,null)}function Ki(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Ui,Di(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=xi(i):(i=_a(t)?Ia:Aa.current,a.context=Da(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ji(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Hi.enqueueReplaceState(a,a.state,null),Ni(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Wi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;t===Ui&&(t=a.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qi(e){return(0,e._init)(e._payload)}function $i(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===_&&qi(i)===t.type)?((r=a(t,n.props)).ref=Wi(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Wi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case T:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Wi(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case _:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Yi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===a?c(e,t,n,r):null;case w:return n.key===a?u(e,t,n,r):null;case _:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||M(n))return null!==a?null:d(e,t,n,r,null);Yi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case T:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case _:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,a,null);Yi(t,r)}return null}function m(a,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(a,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),i=s(v,i,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(a,d),ai&&Qa(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(i=s(d,i,m),null===u?c=d:u.sibling=d,u=d);return ai&&Qa(a,m),c}for(d=r(a,d);m<o.length;m++)null!==(g=p(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=s(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(a,e)})),ai&&Qa(a,m),c}function g(a,o,l,c){var u=M(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(a,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),o=s(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(a,m),ai&&Qa(a,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return ai&&Qa(a,g),u}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ai&&Qa(a,g),u}return function e(r,i,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case T:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(i=a(u,s.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===_&&qi(c)===u.type){n(r,u.sibling),(i=a(u,s.props)).ref=Wi(r,u,s),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((i=Fc(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=Mc(s.type,s.key,s.props,null,r.mode,l)).ref=Wi(r,i,s),l.return=r,r=l)}return o(r);case w:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=a(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(s,r.mode,l)).return=r,r=i}return o(r);case _:return e(r,i,(u=s._init)(s._payload),l)}if(te(s))return m(r,i,s,l);if(M(s))return g(r,i,s,l);Yi(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,s)).return=r,r=i):(n(r,i),(i=Bc(s,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var Xi=$i(!0),Zi=$i(!1),Qi={},Ji=ka(Qi),es=ka(Qi),ts=ka(Qi);function ns(e){if(e===Qi)throw Error(i(174));return e}function rs(e,t){switch(La(ts,t),La(es,e),La(Ji,Qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xa(Ji),La(Ji,t)}function as(){xa(Ji),xa(es),xa(ts)}function is(e){ns(ts.current);var t=ns(Ji.current),n=le(t,e.type);t!==n&&(La(es,e),La(Ji,n))}function ss(e){es.current===e&&(xa(Ji),xa(es))}var os=ka(0);function ls(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cs=[];function us(){for(var e=0;e<cs.length;e++)cs[e]._workInProgressVersionPrimary=null;cs.length=0}var ds=E.ReactCurrentDispatcher,hs=E.ReactCurrentBatchConfig,fs=0,ps=null,ms=null,gs=null,vs=!1,ys=!1,bs=0,Es=0;function Ts(){throw Error(i(321))}function ws(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function Ss(e,t,n,r,a,s){if(fs=s,ps=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?so:oo,e=n(r,a),ys){s=0;do{if(ys=!1,bs=0,25<=s)throw Error(i(301));s+=1,gs=ms=null,t.updateQueue=null,ds.current=lo,e=n(r,a)}while(ys)}if(ds.current=io,t=null!==ms&&null!==ms.next,fs=0,gs=ms=ps=null,vs=!1,t)throw Error(i(300));return e}function ks(){var e=0!==bs;return bs=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gs?ps.memoizedState=gs=e:gs=gs.next=e,gs}function Ls(){if(null===ms){var e=ps.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===gs?ps.memoizedState:gs.next;if(null!==t)gs=t,ms=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===gs?ps.memoizedState=gs=e:gs=gs.next=e}return gs}function Rs(e,t){return"function"===typeof t?t(e):t}function As(e){var t=Ls(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ms,a=r.baseQueue,s=n.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(null!==a){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((fs&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ps.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(Eo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{s=a.lane,ps.lanes|=s,Nl|=s,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cs(e){var t=Ls(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);or(s,t.memoizedState)||(Eo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function Ds(e,t){var n=ps,r=Ls(),a=t(),s=!or(r.memoizedState,a);if(s&&(r.memoizedState=a,Eo=!0),r=r.queue,Gs(Os.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==gs&&1&gs.memoizedState.tag){if(n.flags|=2048,Bs(9,Ps.bind(null,n,r,a,t),void 0,null),null===Il)throw Error(i(349));0!==(30&fs)||_s(n,t,a)}return a}function _s(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ps(e,t,n,r){t.value=n,t.getSnapshot=r,Ms(t)&&Fs(e)}function Os(e,t,n){return n((function(){Ms(t)&&Fs(e)}))}function Ms(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Fs(e){var t=Ci(e,1);null!==t&&rc(t,e,1,-1)}function Ns(e){var t=xs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,ps,e),[t.memoizedState,e]}function Bs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Us(){return Ls().memoizedState}function js(e,t,n,r){var a=xs();ps.flags|=e,a.memoizedState=Bs(1|t,n,void 0,void 0===r?null:r)}function Hs(e,t,n,r){var a=Ls();r=void 0===r?null:r;var i=void 0;if(null!==ms){var s=ms.memoizedState;if(i=s.destroy,null!==r&&ws(r,s.deps))return void(a.memoizedState=Bs(t,n,i,r))}ps.flags|=e,a.memoizedState=Bs(1|t,n,i,r)}function zs(e,t){return js(8390656,8,e,t)}function Gs(e,t){return Hs(2048,8,e,t)}function Vs(e,t){return Hs(4,2,e,t)}function Ks(e,t){return Hs(4,4,e,t)}function Ws(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hs(4,4,Ws.bind(null,t,e),n)}function qs(){}function $s(e,t){var n=Ls();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xs(e,t){var n=Ls();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,Eo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ps.lanes|=n,Nl|=n,e.baseState=!0),t)}function Qs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=hs.transition;hs.transition={};try{e(!1),t()}finally{bt=n,hs.transition=r}}function Js(){return Ls().memoizedState}function eo(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=Ai(e,t,n,r))){rc(n,e,r,tc()),ao(n,t,r)}}function to(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(a.next=a,Ri(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ai(e,t,a,r))&&(rc(n,e,r,a=tc()),ao(n,t,r))}}function no(e){var t=e.alternate;return e===ps||null!==t&&t===ps}function ro(e,t){ys=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ao(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var io={readContext:xi,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useInsertionEffect:Ts,useLayoutEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useMutableSource:Ts,useSyncExternalStore:Ts,useId:Ts,unstable_isNewReconciler:!1},so={readContext:xi,useCallback:function(e,t){return xs().memoizedState=[e,void 0===t?null:t],e},useContext:xi,useEffect:zs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){return js(4,2,e,t)},useMemo:function(e,t){var n=xs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,ps,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xs().memoizedState=e},useState:Ns,useDebugValue:qs,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=Ns(!1),t=e[0];return e=Qs.bind(null,e[1]),xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ps,a=xs();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Il)throw Error(i(349));0!==(30&fs)||_s(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,zs(Os.bind(null,r,s,e),[e]),r.flags|=2048,Bs(9,Ps.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=xs(),t=Il.identifierPrefix;if(ai){var n=Za;t=":"+t+"R"+(n=(Xa&~(1<<32-st(Xa)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Es++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:xi,useCallback:$s,useContext:xi,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:Vs,useLayoutEffect:Ks,useMemo:Xs,useReducer:As,useRef:Us,useState:function(){return As(Rs)},useDebugValue:qs,useDeferredValue:function(e){return Zs(Ls(),ms.memoizedState,e)},useTransition:function(){return[As(Rs)[0],Ls().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ds,useId:Js,unstable_isNewReconciler:!1},lo={readContext:xi,useCallback:$s,useContext:xi,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:Vs,useLayoutEffect:Ks,useMemo:Xs,useReducer:Cs,useRef:Us,useState:function(){return Cs(Rs)},useDebugValue:qs,useDeferredValue:function(e){var t=Ls();return null===ms?t.memoizedState=e:Zs(t,ms.memoizedState,e)},useTransition:function(){return[Cs(Rs)[0],Ls().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ds,useId:Js,unstable_isNewReconciler:!1};function co(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Pi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Wl=r),ho(0,t)},n}function mo(e,t,n){(n=Pi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ho(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Lc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pi(-1,1)).tag=2,Oi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bo=E.ReactCurrentOwner,Eo=!1;function To(e,t,n,r){t.child=null===e?Zi(t,null,n,r):Xi(t,e.child,n,r)}function wo(e,t,n,r,a){n=n.render;var i=t.ref;return ki(t,a),r=Ss(e,t,n,r,i,a),n=ks(),null===e||Eo?(ai&&n&&ei(t),t.flags|=1,To(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function So(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ko(e,t,a)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(Eo=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Ko(e,t,a);0!==(131072&e.flags)&&(Eo=!0)}}return Ro(e,t,n,r,a)}function xo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},La(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,La(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,La(Ol,Pl),Pl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,La(Ol,Pl),Pl|=r;return To(e,t,a,n),t.child}function Lo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ro(e,t,n,r,a){var i=_a(n)?Ia:Aa.current;return i=Da(t,i),ki(t,a),n=Ss(e,t,n,r,i,a),r=ks(),null===e||Eo?(ai&&r&&ei(t),t.flags|=1,To(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function Ao(e,t,n,r,a){if(_a(n)){var i=!0;Fa(t)}else i=!1;if(ki(t,a),null===t.stateNode)Vo(e,t),Gi(t,n,r),Ki(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=xi(c):c=Da(t,c=_a(n)?Ia:Aa.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&Vi(t,s,r,c),Ii=!1;var h=t.memoizedState;s.state=h,Ni(t,r,s,a),l=t.memoizedState,o!==r||h!==l||Ca.current||Ii?("function"===typeof u&&(ji(t,n,u,r),l=t.memoizedState),(o=Ii||zi(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,_i(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:gi(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=xi(l):l=Da(t,l=_a(n)?Ia:Aa.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&Vi(t,s,r,l),Ii=!1,h=t.memoizedState,s.state=h,Ni(t,r,s,a);var p=t.memoizedState;o!==d||h!==p||Ca.current||Ii?("function"===typeof f&&(ji(t,n,f,r),p=t.memoizedState),(c=Ii||zi(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,i,a)}function Co(e,t,n,r,a,i){Lo(e,t);var s=0!==(128&t.flags);if(!r&&!s)return a&&Na(t,n,!1),Ko(e,t,i);r=t.stateNode,bo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Xi(t,e.child,null,i),t.child=Xi(t,null,o,i)):To(e,t,o,i),t.memoizedState=r.state,a&&Na(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),rs(e,t.containerInfo)}function Do(e,t,n,r,a){return fi(),pi(a),t.flags|=256,To(e,t,n,r),t.child}var _o,Po,Oo,Mo,Fo={dehydrated:null,treeContext:null,retryLane:0};function No(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bo(e,t,n){var r,a=t.pendingProps,s=os.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),La(os,1&s),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Nc(l,a,0,null),e=Fc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=No(n),t.memoizedState=Fo,e):Uo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,a,s,o){if(n)return 256&t.flags?(t.flags&=-257,jo(e,t,o,r=uo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=Nc({mode:"visible",children:r.children},a,0,null),(s=Fc(s,a,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Xi(t,e.child,null,o),t.child.memoizedState=No(o),t.memoizedState=Fo,s);if(0===(1&t.mode))return jo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,jo(e,t,o,r=uo(s=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),Eo||l){if(null!==(r=Il)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Ci(e,a),rc(r,e,a,-1))}return gc(),jo(e,t,o,r=uo(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Ya[qa++]=Xa,Ya[qa++]=Za,Ya[qa++]=$a,Xa=e.id,Za=e.overflow,$a=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,s,n);if(o){o=a.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Oc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Oc(r,o):(o=Fc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?No(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Fo,a}return e=(o=e.child).sibling,a=Oc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Uo(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jo(e,t,n,r){return null!==r&&pi(r),Xi(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ho(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function zo(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Go(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(To(e,t,r.children,n),0!==(2&(r=os.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ho(e,n,t);else if(19===e.tag)Ho(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(La(os,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ls(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),zo(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ls(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}zo(t,!0,n,null,i);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qo(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return _a(t.type)&&Pa(),Yo(t),null;case 3:return r=t.stateNode,as(),xa(Ca),xa(Aa),us(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Po(e,t),Yo(t),null;case 5:ss(t);var a=ns(ts.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Yo(t),null}if(e=ns(Ji.current),di(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ha]=t,r[fa]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(a=0;a<Mr.length;a++)Ur(Mr[a],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ae(r,s),Ur("invalid",r)}for(var l in ye(n,s),a=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),J(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=r,_o(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),a=r;break;case"iframe":case"object":case"embed":Ur("load",e),a=r;break;case"video":case"audio":for(a=0;a<Mr.length;a++)Ur(Mr[a],e);a=r;break;case"source":Ur("error",e),a=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=r;break;case"details":Ur("toggle",e),a=r;break;case"input":X(e,r),a=$(e,r),Ur("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=N({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Ur("invalid",e)}for(s in ye(n,a),c=a)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ur("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":W(e),J(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ns(ts.current),ns(Ji.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(s=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Yo(t),null;case 13:if(xa(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,s=!1;else if(s=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[ha]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),s=!1}else null!==ii&&(oc(ii),ii=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===Ml&&(Ml=3):gc())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return as(),Po(e,t),null===e&&zr(t.stateNode.containerInfo),Yo(t),null;case 10:return wi(t.type._context),Yo(t),null;case 19:if(xa(os),null===(s=t.memoizedState))return Yo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wo(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ls(e))){for(t.flags|=128,Wo(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return La(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>Gl&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ls(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ai)return Yo(t),null}else 2*Ze()-s.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=os.current,La(os,r?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function $o(e,t){switch(ti(t),t.tag){case 1:return _a(t.type)&&Pa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return as(),xa(Ca),xa(Aa),us(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(xa(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xa(os),null;case 4:return as(),null;case 10:return wi(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}_o=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ns(Ji.current);var i,s=null;switch(n){case"input":a=$(e,a),r=$(e,r),s=[];break;case"select":a=N({},a,{value:void 0}),r=N({},r,{value:void 0}),s=[];break;case"textarea":a=re(e,a),r=re(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Zo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){xc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tl(t,n,i)}a=a.next}while(a!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Zo||el(n,t);case 6:var r=dl,a=hl;dl=null,fl(e,t,n),hl=a,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),zt(e)):la(dl,n.stateNode));break;case 4:r=dl,a=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=a;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&tl(n,t,s),a=a.next}while(a!==r)}fl(e,t,n);break;case 1:if(!Zo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){xc(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Zo=(r=Zo)||null!==n.memoizedState,fl(e,t,n),Zo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(s,o,a),dl=null,hl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){xc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(g){xc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){xc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){xc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(a,s),be(l,o);var u=be(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":Q(a,s);break;case"textarea":ie(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(a,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(a,!!s.multiple,s.defaultValue,!0):ne(a,!!s.multiple,s.multiple?[]:"",!1))}a[fa]=s}catch(g){xc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(g){xc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){xc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(zl=Ze())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zo=(u=Zo)||d,gl(t,e),Zo=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Jo=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){xc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){xc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),ul(e,ll(e),a);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(i(161))}}catch(o){xc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Jo=e,El(e,t,n)}function El(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var a=Jo,i=a.child;if(22===a.tag&&r){var s=null!==a.memoizedState||Xo;if(!s){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Xo;var c=Zo;if(Xo=s,(Zo=l)&&!c)for(Jo=a;null!==Jo;)l=(s=Jo).child,22===s.tag&&null!==s.memoizedState?Sl(a):null!==l?(l.return=s,Jo=l):Sl(a);for(;null!==i;)Jo=i,El(i,t,n),i=i.sibling;Jo=a,Xo=o,Zo=c}Tl(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Jo=i):Tl(e)}}function Tl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:gi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bi(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(i(163))}Zo||512&t.flags&&il(t)}catch(f){xc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function Sl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){xc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){xc(t,a,l)}}var i=t.return;try{il(t)}catch(l){xc(t,i,l)}break;case 5:var s=t.return;try{il(t)}catch(l){xc(t,s,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var kl,xl=Math.ceil,Ll=E.ReactCurrentDispatcher,Rl=E.ReactCurrentOwner,Al=E.ReactCurrentBatchConfig,Cl=0,Il=null,Dl=null,_l=0,Pl=0,Ol=ka(0),Ml=0,Fl=null,Nl=0,Bl=0,Ul=0,jl=null,Hl=null,zl=0,Gl=1/0,Vl=null,Kl=!1,Wl=null,Yl=null,ql=!1,$l=null,Xl=0,Zl=0,Ql=null,Jl=-1,ec=0;function tc(){return 0!==(6&Cl)?Ze():-1!==Jl?Jl:Jl=Ze()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==_l?_l&-_l:null!==mi.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Zl)throw Zl=0,Ql=null,Error(i(185));vt(e,n,r),0!==(2&Cl)&&e===Il||(e===Il&&(0===(2&Cl)&&(Bl|=n),4===Ml&&lc(e,_l)),ac(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Gl=Ze()+500,Ua&&za()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Il?_l:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Ua=!0,Ha(e)}(cc.bind(null,e)):Ha(cc.bind(null,e)),sa((function(){0===(6&Cl)&&za()})),n=null;else{switch(Et(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,ec=0,0!==(6&Cl))throw Error(i(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?_l:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Cl;Cl|=2;var s=mc();for(Il===e&&_l===t||(Vl=null,Gl=Ze()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}Ti(),Ll.current=s,Cl=a,null!==Dl?t=0:(Il=null,_l=0,t=Ml)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Fl,fc(e,0),lc(e,r),ac(e,Ze()),n;if(6===t)lc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!or(i(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Fl,fc(e,0),lc(e,r),ac(e,Ze()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Hl,Vl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Ze())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,Hl,Vl),t);break}wc(e,Hl,Vl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>a&&(a=o),r&=~s}if(r=a,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,Hl,Vl),r);break}wc(e,Hl,Vl);break;default:throw Error(i(329))}}}return ac(e,Ze()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Hl,Hl=n,null!==t&&oc(t)),e}function oc(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function lc(e,t){for(t&=~Ul,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cl))throw Error(i(327));Sc();var t=ht(e,0);if(0===(1&t))return ac(e,Ze()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Fl,fc(e,0),lc(e,t),ac(e,Ze()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Hl,Vl),ac(e,Ze()),null}function uc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Gl=Ze()+500,Ua&&za())}}function dc(e){null!==$l&&0===$l.tag&&0===(6&Cl)&&Sc();var t=Cl;Cl|=1;var n=Al.transition,r=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=r,Al.transition=n,0===(6&(Cl=t))&&za()}}function hc(){Pl=Ol.current,xa(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pa();break;case 3:as(),xa(Ca),xa(Aa),us();break;case 5:ss(r);break;case 4:as();break;case 13:case 19:xa(os);break;case 10:wi(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Dl=e=Oc(e.current,null),_l=Pl=t,Ml=0,Fl=null,Ul=Bl=Nl=0,Hl=jl=null,null!==Li){for(t=0;t<Li.length;t++)if(null!==(r=(n=Li[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=a,r.next=s}n.pending=r}Li=null}return e}function pc(e,t){for(;;){var n=Dl;try{if(Ti(),ds.current=io,vs){for(var r=ps.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}vs=!1}if(fs=0,gs=ms=ps=null,ys=!1,bs=0,Rl.current=null,null===n||null===n.return){Ml=1,Fl=t,Dl=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=_l,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vo(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&go(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(s,u,t),gc();break e}c=Error(i(426))}else if(ai&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),yo(v,o,l,0,t),pi(co(c,l));break e}}s=c=co(c,l),4!==Ml&&(Ml=2),null===jl?jl=[s]:jl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fi(s,po(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Fi(s,mo(s,l,t));break e}}s=s.return}while(null!==s)}Tc(n)}catch(E){t=E,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function mc(){var e=Ll.current;return Ll.current=io,null===e?io:e}function gc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Il||0===(268435455&Nl)&&0===(268435455&Bl)||lc(Il,_l)}function vc(e,t){var n=Cl;Cl|=2;var r=mc();for(Il===e&&_l===t||(Vl=null,fc(e,t));;)try{yc();break}catch(a){pc(e,a)}if(Ti(),Cl=n,Ll.current=r,null!==Dl)throw Error(i(261));return Il=null,_l=0,Ml}function yc(){for(;null!==Dl;)Ec(Dl)}function bc(){for(;null!==Dl&&!$e();)Ec(Dl)}function Ec(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?Tc(e):Dl=t,Rl.current=null}function Tc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qo(n,t,Pl)))return void(Dl=n)}else{if(null!==(n=$o(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ml=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,n){var r=bt,a=Al.transition;try{Al.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==$l);if(0!==(6&Cl))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-st(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,s),e===Il&&(Dl=Il=null,_l=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Ic(tt,(function(){return Sc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Al.transition,Al.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,Rl.current=null,function(e,t){if(ea=Vt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(T){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Vt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gi(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(i(163))}}catch(T){xc(t,t.return,T)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ta),Vt=!!ea,ta=ea=null,e.current=n,bl(n,e,a),Xe(),Cl=l,bt=o,Al.transition=s}else e.current=n;if(ql&&(ql=!1,$l=e,Xl=a),s=e.pendingLanes,0===s&&(Yl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Kl)throw Kl=!1,e=Wl,Wl=null,e;0!==(1&Xl)&&0!==e.tag&&Sc(),s=e.pendingLanes,0!==(1&s)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,za()}(e,t,n,r)}finally{Al.transition=a,bt=r}return null}function Sc(){if(null!==$l){var e=Et(Xl),t=Al.transition,n=bt;try{if(Al.transition=null,bt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Xl=0,0!==(6&Cl))throw Error(i(331));var a=Cl;for(Cl|=4,Jo=e.current;null!==Jo;){var s=Jo,o=s.child;if(0!==(16&Jo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,p=d.return;if(sl(d),d===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(s=Jo).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Jo=y;break e}Jo=s.return}}var b=e.current;for(Jo=b;null!==Jo;){var E=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==E)E.return=o,Jo=E;else e:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(w){xc(l,l.return,w)}if(l===o){Jo=null;break e}var T=l.sibling;if(null!==T){T.return=l.return,Jo=T;break e}Jo=l.return}}if(Cl=a,za(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{bt=n,Al.transition=t}}return!1}function kc(e,t,n){e=Oi(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ac(e,t))}function xc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Oi(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ac(t,e));break}}t=t.return}}function Lc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(_l&n)===n&&(4===Ml||3===Ml&&(130023424&_l)===_l&&500>Ze()-zl?fc(e,0):Ul|=n),ac(e,t)}function Rc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ci(e,t))&&(vt(e,t,n),ac(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Rc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Rc(e,n)}function Ic(e,t){return Ye(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=_c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,a,s){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Fc(n.children,a,s,t);case k:o=8,a|=8;break;case x:return(e=_c(12,n,t,2|a)).elementType=x,e.lanes=s,e;case C:return(e=_c(13,n,t,a)).elementType=C,e.lanes=s,e;case I:return(e=_c(19,n,t,a)).elementType=I,e.lanes=s,e;case P:return Nc(n,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case L:o=10;break e;case R:o=9;break e;case A:o=11;break e;case D:o=14;break e;case _:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=_c(o,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Fc(e,t,n,r){return(e=_c(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=_c(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=_c(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=_c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,a,i,s,o,l){return e=new jc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=_c(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function zc(e){if(!e)return Ra;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_a(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(_a(n))return Ma(e,n,t)}return t}function Gc(e,t,n,r,a,i,s,o,l){return(e=Hc(n,r,!0,e,0,i,0,o,l)).context=zc(null),n=e.current,(i=Pi(r=tc(),a=nc(n))).callback=void 0!==t&&null!==t?t:null,Oi(n,i,a),e.current.lanes=a,vt(e,a,r),ac(e,r),e}function Vc(e,t,n,r){var a=t.current,i=tc(),s=nc(a);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pi(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oi(a,t,s))&&(rc(e,a,s,i),Mi(e,a,s)),s}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ca.current)Eo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Eo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fi();break;case 5:is(t);break;case 1:_a(t.type)&&Fa(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;La(vi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(La(os,1&os.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(La(os,1&os.current),null!==(e=Ko(e,t,n))?e.sibling:null);La(os,1&os.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Go(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),La(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,xo(e,t,n)}return Ko(e,t,n)}(e,t,n);Eo=0!==(131072&e.flags)}else Eo=!1,ai&&0!==(1048576&t.flags)&&Ja(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var a=Da(t,Aa.current);ki(t,n),a=Ss(null,t,r,e,a,n);var s=ks();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_a(r)?(s=!0,Fa(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Di(t),a.updater=Hi,t.stateNode=a,a._reactInternals=t,Ki(t,r,e,n),t=Co(null,t,r,!0,s,n)):(t.tag=0,ai&&s&&ei(t),To(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(r),e=gi(r,e),a){case 0:t=Ro(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=So(null,t,r,gi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ro(e,t,r,a=t.elementType===r?a:gi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ao(e,t,r,a=t.elementType===r?a:gi(r,a),n);case 3:e:{if(Io(t),null===e)throw Error(i(387));r=t.pendingProps,a=(s=t.memoizedState).element,_i(e,t),Ni(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Do(e,t,r,n,a=co(Error(i(423)),t));break e}if(r!==a){t=Do(e,t,r,n,a=co(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Zi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===a){t=Ko(e,t,n);break e}To(e,t,r,n)}t=t.child}return t;case 5:return is(t),null===e&&ci(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==s&&na(r,s)&&(t.flags|=32),Lo(e,t),To(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Bo(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xi(t,null,r,n):To(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,wo(e,t,r,a=t.elementType===r?a:gi(r,a),n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,La(vi,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===a.children&&!Ca.current){t=Ko(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Pi(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Si(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Si(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}To(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ki(t,n),r=r(a=xi(a)),t.flags|=1,To(e,t,r,n),t.child;case 14:return a=gi(r=t.type,t.pendingProps),So(e,t,r,a=gi(r.type,a),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gi(r,a),Vo(e,t),t.tag=1,_a(r)?(e=!0,Fa(t)):e=!1,ki(t,n),Gi(t,r,a),Ki(t,r,a,n),Co(null,t,r,!0,e,n);case 19:return Go(e,t,n);case 22:return xo(e,t,n)}throw Error(i(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if("function"===typeof a){var o=a;a=function(){var e=Kc(s);o.call(e)}}Vc(t,s,e,a)}else s=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Kc(s);i.call(e)}}var s=Gc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[pa]=s.current,zr(8===e.nodeType?e.parentNode:e),dc(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Kc(l);o.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pa]=l.current,zr(8===e.nodeType?e.parentNode:e),dc((function(){Vc(t,l,n,r)})),l}(n,t,e,a,r);return Kc(s)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Vc(null,e,null,null)})),t[pa]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Nt(e)}},Tt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ac(t,Ze()),0===(6&Cl)&&(Gl=Ze()+500,za()))}break;case 13:dc((function(){var t=Ci(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Yc(e,1)}},wt=function(e){if(13===e.tag){var t=Ci(e,134217728);if(null!==t)rc(t,e,134217728,tc());Yc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Ci(e,t);if(null!==n)rc(n,e,t,tc());Yc(e,t)}},kt=function(){return bt},xt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ta(r);if(!a)throw Error(i(90));Y(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uc,Ce=dc;var tu={usingClientEntryPoint:!1,Events:[ba,Ea,Ta,Le,Re,uc]},nu={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{at=au.inject(ru),it=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(i(299));var n=!1,r="",a=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,s="",o=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,a,0,s,o),e[pa]=t.current,zr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Xc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var E=b.prototype=new y;E.constructor=b,m(E,v.prototype),E.isPureReactComponent=!0;var T=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var a,i={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,a)&&!k.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:s,ref:o,props:i,_owner:S.current}}function L(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===i?"."+A(l,0):i,T(s)?(a="",null!=e&&(a=e.replace(R,"$&/")+"/"),C(s,t,a,"",(function(e){return e}))):null!=s&&(L(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(R,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",T(e))for(var c=0;c<e.length;c++){var u=i+A(o=e[c],c);l+=C(o,t,a,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,a,u=i+A(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _={current:null},P={transition:null},O={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!L(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=L,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return _.current.useCallback(e,t)},t.useContext=function(e){return _.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return _.current.useDeferredValue(e)},t.useEffect=function(e,t){return _.current.useEffect(e,t)},t.useId=function(){return _.current.useId()},t.useImperativeHandle=function(e,t,n){return _.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.current.useMemo(e,t)},t.useReducer=function(e,t,n){return _.current.useReducer(e,t,n)},t.useRef=function(e){return _.current.useRef(e)},t.useState=function(e){return _.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function T(e){if(g=!1,E(e),!m)if(null!==r(c))m=!0,P(w);else{var t=r(u);null!==t&&O(T,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(L),L=-1),p=!0;var i=f;try{for(E(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),E(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(T,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,x=null,L=-1,R=5,A=-1;function C(){return!(t.unstable_now()-A<R)}function I(){if(null!==x){var e=t.unstable_now();A=e;var n=!0;try{n=x(!0,e)}finally{n?S():(k=!1,x=null)}}else k=!1}if("function"===typeof b)S=function(){b(I)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,_=D.port2;D.port1.onmessage=I,S=function(){_.postMessage(null)}}else S=function(){v(I,0)};function P(e){x=e,k||(k=!0,S())}function O(e,n){L=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(L),L=-1):g=!0,O(T,i-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(w))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(i,s),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".d9914164.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="minazuki:";n.l=(r,a,i,s)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[a];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=i);var s=n.p+n.u(t),o=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,i,s=r[0],o=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkminazuki=self.webpackChunkminazuki||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(791),r=n.t(t,2),a=n(250),i=n(164),s=n.t(i,2);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(t,n,r,a){void 0===a&&(a={});let{window:i=document.defaultView,v5Compat:s=!1}=a,u=i.history,p=e.Pop,m=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){p=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:p,location:E.location,delta:n})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let E={get action(){return p},get location(){return t(i,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(l,y),m=e,()=>{i.removeEventListener(l,y),m=null}},createHref:e=>n(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let a=h(E.location,t,n);r&&r(a,t),g=v()+1;let o=d(a,g),l=E.createHref(a);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}s&&m&&m({action:p,location:E.location,delta:1})},replace:function(t,n){p=e.Replace;let a=h(E.location,t,n);r&&r(a,t),g=v();let i=d(a,g),o=E.createHref(a);u.replaceState(i,"",o),s&&m&&m({action:p,location:E.location,delta:0})},go:e=>u.go(e)};return E}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=D(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let a=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let i=null;for(let s=0;null==i&&s<a.length;++s)i=A(a[s],I(r));return i}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=F([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),y(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:R(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))a(e,t,r);else a(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let s=b(r.join("/")),o=[];return o.push(...s.map((e=>""===e?i:[i,e].join("/")))),a&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const E=/^:\w+$/,T=3,w=2,S=1,k=10,x=-2,L=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=x),t&&(r+=w),n.filter((e=>!L(e))).reduce(((e,t)=>e+(E.test(t)?T:""===t?S:k)),r)}function A(e,t){let{routesMeta:n}=e,r={},a="/",i=[];for(let s=0;s<n.length;++s){let e=n[s],o=s===n.length-1,l="/"===a?t:t.slice(a.length)||"/",c=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;i.push({params:r,pathname:F([a,c.pathname]),pathnameBase:N(F([a,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(a=F([a,c.pathnameBase]))}return i}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return u(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{});return{params:l,pathname:i,pathnameBase:s,pattern:e}}function I(e){try{return decodeURI(e)}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function _(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=P(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=p(e):(a=o({},e),c(!a.pathname||!a.pathname.includes("?"),_("?","pathname","search",a)),c(!a.pathname||!a.pathname.includes("#"),_("#","pathname","hash",a)),c(!a.search||!a.search.includes("#"),_("#","search","hash",a)));let i,s=""===e||""===a.pathname,l=s?"/":a.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?p(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:B(r),hash:U(a)}}(a,i),d=l&&"/"!==l&&l.endsWith("/"),h=(s||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const F=e=>e.join("/").replace(/\/\/+/g,"/"),N=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],z=(new Set(H),["get",...H]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const V=t.createContext(null);const K=t.createContext(null);const W=t.createContext(null);const Y=t.createContext(null);const q=t.createContext({outlet:null,matches:[],isDataRoute:!1});const $=t.createContext(null);function X(){return null!=t.useContext(Y)}function Z(){return X()||c(!1),t.useContext(Y).location}function Q(e){t.useContext(W).static||t.useLayoutEffect(e)}function J(){let{isDataRoute:e}=t.useContext(q);return e?function(){let{router:e}=ue(le.UseNavigateStable),n=he(ce.UseNavigateStable),r=t.useRef(!1);return Q((()=>{r.current=!0})),t.useCallback((function(t,a){void 0===a&&(a={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,G({fromRouteId:n},a)))}),[e,n])}():function(){X()||c(!1);let e=t.useContext(V),{basename:n,future:r,navigator:a}=t.useContext(W),{matches:i}=t.useContext(q),{pathname:s}=Z(),o=JSON.stringify(O(i,r.v7_relativeSplatPath)),l=t.useRef(!1);return Q((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void a.go(t);let i=M(t,JSON.parse(o),s,"path"===r.relative);null==e&&"/"!==n&&(i.pathname="/"===i.pathname?n:F([n,i.pathname])),(r.replace?a.replace:a.push)(i,r.state,r)}),[n,a,o,s,e])}()}function ee(){let{matches:e}=t.useContext(q),n=e[e.length-1];return n?n.params:{}}function te(e,n){let{relative:r}=void 0===n?{}:n,{future:a}=t.useContext(W),{matches:i}=t.useContext(q),{pathname:s}=Z(),o=JSON.stringify(O(i,a.v7_relativeSplatPath));return t.useMemo((()=>M(e,JSON.parse(o),s,"path"===r)),[e,o,s,r])}function ne(n,r,a,i){X()||c(!1);let{navigator:s}=t.useContext(W),{matches:o}=t.useContext(q),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=Z();if(r){var m;let e="string"===typeof r?p(r):r;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",y=v(n,{pathname:"/"===d?g:g.slice(d.length)||"/"});let b=oe(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:F([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:F([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,a,i);return r&&b?t.createElement(Y.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},b):b}function re(){let e=function(){var e;let n=t.useContext($),r=de(ce.UseRouteError),a=he(ce.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[a]}(),n=j(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,null)}const ae=t.createElement(re,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(q.Provider,{value:this.props.routeContext},t.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:n,match:r,children:a}=e,i=t.useContext(V);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(q.Provider,{value:n},a)}function oe(e,n,r,a){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===a&&(a=null),null==e){var s;if(null==(s=r)||!s.errors)return null;e=r.matches}let o=e,l=null==(i=r)?void 0:i.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight(((e,a,i)=>{let s,c=!1,h=null,f=null;var p;r&&(s=l&&a.route.id?l[a.route.id]:void 0,h=a.route.errorElement||ae,u&&(d<0&&0===i?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,f=null):d===i&&(c=!0,f=a.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,i+1)),g=()=>{let n;return n=s?h:c?f:a.route.Component?t.createElement(a.route.Component,null):a.route.element?a.route.element:e,t.createElement(se,{match:a,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===i)?t.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let n=t.useContext(V);return n||c(!1),n}function de(e){let n=t.useContext(K);return n||c(!1),n}function he(e){let n=function(e){let n=t.useContext(q);return n||c(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}const fe={};r.startTransition;function pe(e){c(!1)}function me(n){let{basename:r="/",children:a=null,location:i,navigationType:s=e.Pop,navigator:o,static:l=!1,future:u}=n;X()&&c(!1);let d=r.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:d,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},u)})),[d,u,o,l]);"string"===typeof i&&(i=p(i));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:y="default"}=i,b=t.useMemo((()=>{let e=D(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:s}}),[d,f,m,g,v,y,s]);return null==b?null:t.createElement(W.Provider,{value:h},t.createElement(Y.Provider,{children:a,value:b}))}function ge(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise((()=>{}));t.Component;function ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,a)=>{if(!t.isValidElement(e))return;let i=[...n,a];if(e.type===t.Fragment)return void r.push.apply(r,ve(e.props.children,i));e.type!==pe&&c(!1),e.props.index&&e.props.children&&c(!1);let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,i)),r.push(s)})),r}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Te=r.startTransition;s.flushSync;function we(e){let{basename:n,children:r,future:a,window:i}=e,s=t.useRef();var o;null==s.current&&(s.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),m((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return h("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,o)));let l=s.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},p=t.useCallback((e=>{d&&Te?Te((()=>u(e))):u(e)}),[u,d]);return t.useLayoutEffect((()=>l.listen(p)),[l,p]),t.createElement(me,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:a})}const Se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=t.forwardRef((function(e,n){let r,{onClick:a,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:d,preventScrollReset:h,unstable_viewTransition:p}=e,m=be(e,Ee),{basename:g}=t.useContext(W),v=!1;if("string"===typeof d&&ke.test(d)&&(r=d,Se))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(E){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;X()||c(!1);let{basename:a,navigator:i}=t.useContext(W),{hash:s,pathname:o,search:l}=te(e,{relative:r}),u=o;return"/"!==a&&(u="/"===o?a:F([a,o])),i.createHref({pathname:u,search:l,hash:s})}(d,{relative:i}),b=function(e,n){let{target:r,replace:a,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:l}=void 0===n?{}:n,c=J(),u=Z(),d=te(e,{relative:o});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==a?a:f(u)===f(d);c(e,{replace:n,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:l})}}),[u,c,d,a,i,r,e,s,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,unstable_viewTransition:p});return t.createElement("a",ye({},m,{href:r||y,onClick:v||s?a:function(e){a&&a(e),e.defaultPrevented||b(e)},ref:n,target:u}))}));var Le,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Le||(Le={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||Me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"===typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=function(){},Be={},Ue={},je=null,He={mark:Ne,measure:Ne};try{"undefined"!==typeof window&&(Be=window),"undefined"!==typeof document&&(Ue=document),"undefined"!==typeof MutationObserver&&(je=MutationObserver),"undefined"!==typeof performance&&(He=performance)}catch(Hu){}var ze,Ge,Ve,Ke,We,Ye=(Be.navigator||{}).userAgent,qe=void 0===Ye?"":Ye,$e=Be,Xe=Ue,Ze=je,Qe=He,Je=($e.document,!!Xe.documentElement&&!!Xe.head&&"function"===typeof Xe.addEventListener&&"function"===typeof Xe.createElement),et=~qe.indexOf("MSIE")||~qe.indexOf("Trident/"),tt="___FONT_AWESOME___",nt=16,rt="fa",at="svg-inline--fa",it="data-fa-i2svg",st="data-fa-pseudo-element",ot="data-fa-pseudo-element-pending",lt="data-prefix",ct="data-icon",ut="fontawesome-i2svg",dt="async",ht=["HTML","HEAD","STYLE","SCRIPT"],ft=function(){try{return!0}catch(Hu){return!1}}(),pt="classic",mt="sharp",gt=[pt,mt];function vt(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[pt]}})}var yt=vt((_e(ze={},pt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),_e(ze,mt,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),ze)),bt=vt((_e(Ge={},pt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_e(Ge,mt,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Ge)),Et=vt((_e(Ve={},pt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_e(Ve,mt,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Ve)),Tt=vt((_e(Ke={},pt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_e(Ke,mt,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Ke)),wt=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,St="fa-layers-text",kt=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,xt=vt((_e(We={},pt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_e(We,mt,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),We)),Lt=[1,2,3,4,5,6,7,8,9,10],Rt=Lt.concat([11,12,13,14,15,16,17,18,19,20]),At=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ct={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},It=new Set;Object.keys(bt[pt]).map(It.add.bind(It)),Object.keys(bt[mt]).map(It.add.bind(It));var Dt=[].concat(gt,Oe(It),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ct.GROUP,Ct.SWAP_OPACITY,Ct.PRIMARY,Ct.SECONDARY]).concat(Lt.map((function(e){return"".concat(e,"x")}))).concat(Rt.map((function(e){return"w-".concat(e)}))),_t=$e.FontAwesomeConfig||{};if(Xe&&"function"===typeof Xe.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Pe(e,2),n=t[0],r=t[1],a=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Xe.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==a&&null!==a&&(_t[r]=a)}))}var Pt={styleDefault:"solid",familyDefault:"classic",cssPrefix:rt,replacementClass:at,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};_t.familyPrefix&&(_t.cssPrefix=_t.familyPrefix);var Ot=Ce(Ce({},Pt),_t);Ot.autoReplaceSvg||(Ot.observeMutations=!1);var Mt={};Object.keys(Pt).forEach((function(e){Object.defineProperty(Mt,e,{enumerable:!0,set:function(t){Ot[e]=t,Ft.forEach((function(e){return e(Mt)}))},get:function(){return Ot[e]}})})),Object.defineProperty(Mt,"familyPrefix",{enumerable:!0,set:function(e){Ot.cssPrefix=e,Ft.forEach((function(e){return e(Mt)}))},get:function(){return Ot.cssPrefix}}),$e.FontAwesomeConfig=Mt;var Ft=[];var Nt=nt,Bt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var Ut="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function jt(){for(var e=12,t="";e-- >0;)t+=Ut[62*Math.random()|0];return t}function Ht(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function zt(e){return e.classList?Ht(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function Gt(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Vt(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function Kt(e){return e.size!==Bt.size||e.x!==Bt.x||e.y!==Bt.y||e.rotate!==Bt.rotate||e.flipX||e.flipY}var Wt=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function Yt(){var e=rt,t=at,n=Mt.cssPrefix,r=Mt.replacementClass,a=Wt;if(n!==e||r!==t){var i=new RegExp("\\.".concat(e,"\\-"),"g"),s=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");a=a.replace(i,".".concat(n,"-")).replace(s,"--".concat(n,"-")).replace(o,".".concat(r))}return a}var qt=!1;function $t(){Mt.autoAddCss&&!qt&&(!function(e){if(e&&Je){var t=Xe.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Xe.head.childNodes,r=null,a=n.length-1;a>-1;a--){var i=n[a],s=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=i)}Xe.head.insertBefore(t,r)}}(Yt()),qt=!0)}var Xt={mixout:function(){return{dom:{css:Yt,insertCss:$t}}},hooks:function(){return{beforeDOMElementCreation:function(){$t()},beforeI2svg:function(){$t()}}}},Zt=$e||{};Zt[tt]||(Zt[tt]={}),Zt[tt].styles||(Zt[tt].styles={}),Zt[tt].hooks||(Zt[tt].hooks={}),Zt[tt].shims||(Zt[tt].shims=[]);var Qt=Zt[tt],Jt=[],en=!1;function tn(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,a=e.children,i=void 0===a?[]:a;return"string"===typeof e?Gt(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Gt(e[n]),'" ')}),"").trim()}(r),">").concat(i.map(tn).join(""),"</").concat(t,">")}function nn(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}Je&&((en=(Xe.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Xe.readyState))||Xe.addEventListener("DOMContentLoaded",(function e(){Xe.removeEventListener("DOMContentLoaded",e),en=1,Jt.map((function(e){return e()}))})));var rn=function(e,t,n,r){var a,i,s,o=Object.keys(e),l=o.length,c=void 0!==r?function(e,t){return function(n,r,a,i){return e.call(t,n,r,a,i)}}(t,r):t;for(void 0===n?(a=1,s=e[o[0]]):(a=0,s=n);a<l;a++)s=c(s,e[i=o[a]],i,e);return s};function an(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),n--)}else t.push(a)}return t}(e);return 1===t.length?t[0].toString(16):null}function sn(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function on(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,a=sn(t);"function"!==typeof Qt.hooks.addPack||r?Qt.styles[e]=Ce(Ce({},Qt.styles[e]||{}),a):Qt.hooks.addPack(e,sn(t)),"fas"===e&&on("fa",t)}var ln,cn,un,dn=Qt.styles,hn=Qt.shims,fn=(_e(ln={},pt,Object.values(Et[pt])),_e(ln,mt,Object.values(Et[mt])),ln),pn=null,mn={},gn={},vn={},yn={},bn={},En=(_e(cn={},pt,Object.keys(yt[pt])),_e(cn,mt,Object.keys(yt[mt])),cn);function Tn(e,t){var n,r=t.split("-"),a=r[0],i=r.slice(1).join("-");return a!==e||""===i||(n=i,~Dt.indexOf(n))?null:i}var wn,Sn=function(){var e=function(e){return rn(dn,(function(t,n,r){return t[r]=rn(n,e,{}),t}),{})};mn=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"===typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),gn=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"===typeof e})).forEach((function(t){e[t]=n}));return e})),bn=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in dn||Mt.autoFetchSvg,n=rn(hn,(function(e,n){var r=n[0],a=n[1],i=n[2];return"far"!==a||t||(a="fas"),"string"===typeof r&&(e.names[r]={prefix:a,iconName:i}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:a,iconName:i}),e}),{names:{},unicodes:{}});vn=n.names,yn=n.unicodes,pn=Cn(Mt.styleDefault,{family:Mt.familyDefault})};function kn(e,t){return(mn[e]||{})[t]}function xn(e,t){return(bn[e]||{})[t]}function Ln(e){return vn[e]||{prefix:null,iconName:null}}function Rn(){return pn}wn=function(e){pn=Cn(e.styleDefault,{family:Mt.familyDefault})},Ft.push(wn),Sn();var An=function(){return{prefix:null,iconName:null,rest:[]}};function Cn(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?pt:t,r=yt[n][e],a=bt[n][e]||bt[n][r],i=e in Qt.styles?e:null;return a||i||null}var In=(_e(un={},pt,Object.keys(Et[pt])),_e(un,mt,Object.keys(Et[mt])),un);function Dn(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,a=(_e(t={},pt,"".concat(Mt.cssPrefix,"-").concat(pt)),_e(t,mt,"".concat(Mt.cssPrefix,"-").concat(mt)),t),i=null,s=pt;(e.includes(a[pt])||e.some((function(e){return In[pt].includes(e)})))&&(s=pt),(e.includes(a[mt])||e.some((function(e){return In[mt].includes(e)})))&&(s=mt);var o=e.reduce((function(e,t){var n=Tn(Mt.cssPrefix,t);if(dn[t]?(t=fn[s].includes(t)?Tt[s][t]:t,i=t,e.prefix=t):En[s].indexOf(t)>-1?(i=t,e.prefix=Cn(t,{family:s})):n?e.iconName=n:t!==Mt.replacementClass&&t!==a[pt]&&t!==a[mt]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var o="fa"===i?Ln(e.iconName):{},l=xn(e.prefix,e.iconName);o.prefix&&(i=null),e.iconName=o.iconName||l||e.iconName,e.prefix=o.prefix||e.prefix,"far"!==e.prefix||dn.far||!dn.fas||Mt.autoFetchSvg||(e.prefix="fas")}return e}),An());return(e.includes("fa-brands")||e.includes("fab"))&&(o.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(o.prefix="fad"),o.prefix||s!==mt||!dn.fass&&!Mt.autoFetchSvg||(o.prefix="fass",o.iconName=xn(o.prefix,o.iconName)||o.iconName),"fa"!==o.prefix&&"fa"!==i||(o.prefix=Rn()||"fas"),o}var _n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.reduce(this._pullDefinitions,{});Object.keys(a).forEach((function(t){e.definitions[t]=Ce(Ce({},e.definitions[t]||{}),a[t]),on(t,a[t]);var n=Et[pt][t];n&&on(n,a[t]),Sn()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],a=r.prefix,i=r.iconName,s=r.icon,o=s[2];e[a]||(e[a]={}),o.length>0&&o.forEach((function(t){"string"===typeof t&&(e[a][t]=s)})),e[a][i]=s})),e}}],n&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Pn=[],On={},Mn={},Fn=Object.keys(Mn);function Nn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return(On[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function Bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(On[e]||[]).forEach((function(e){e.apply(null,n)}))}function Un(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Mn[e]?Mn[e].apply(null,t):void 0}function jn(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||Rn();if(t)return t=xn(n,t)||t,nn(Hn.definitions,n,t)||nn(Qt.styles,n,t)}var Hn=new _n,zn={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Je?(Bn("beforeI2svg",e),Un("pseudoElements2svg",e),Un("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===Mt.autoReplaceSvg&&(Mt.autoReplaceSvg=!0),Mt.observeMutations=!0,e=function(){Kn({autoReplaceSvgRoot:n}),Bn("watch",t)},Je&&(en?setTimeout(e,0):Jt.push(e))}},Gn={icon:function(e){if(null===e)return null;if("object"===Ie(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:xn(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=Cn(e[0]);return{prefix:n,iconName:xn(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(Mt.cssPrefix,"-"))>-1||e.match(wt))){var r=Dn(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||Rn(),iconName:xn(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var a=Rn();return{prefix:a,iconName:xn(a,e)||e}}}},Vn={noAuto:function(){Mt.autoReplaceSvg=!1,Mt.observeMutations=!1,Bn("noAuto")},config:Mt,dom:zn,parse:Gn,library:Hn,findIconDefinition:jn,toHtml:tn},Kn=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?Xe:e;(Object.keys(Qt.styles).length>0||Mt.autoFetchSvg)&&Je&&Mt.autoReplaceSvg&&Vn.dom.i2svg({node:t})};function Wn(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return tn(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(Je){var t=Xe.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Yn(e){var t=e.icons,n=t.main,r=t.mask,a=e.prefix,i=e.iconName,s=e.transform,o=e.symbol,l=e.title,c=e.maskId,u=e.titleId,d=e.extra,h=e.watchable,f=void 0!==h&&h,p=r.found?r:n,m=p.width,g=p.height,v="fak"===a,y=[Mt.replacementClass,i?"".concat(Mt.cssPrefix,"-").concat(i):""].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),b={children:[],attributes:Ce(Ce({},d.attributes),{},{"data-prefix":a,"data-icon":i,class:y,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},E=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(b.attributes[it]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||jt())},children:[l]}),delete b.attributes.title);var T=Ce(Ce({},b),{},{prefix:a,iconName:i,main:n,mask:r,maskId:c,transform:s,symbol:o,styles:Ce(Ce({},E),d.styles)}),w=r.found&&n.found?Un("generateAbstractMask",T)||{children:[],attributes:{}}:Un("generateAbstractIcon",T)||{children:[],attributes:{}},S=w.children,k=w.attributes;return T.children=S,T.attributes=k,o?function(e){var t=e.prefix,n=e.iconName,r=e.children,a=e.attributes,i=e.symbol,s=!0===i?"".concat(t,"-").concat(Mt.cssPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ce(Ce({},a),{},{id:s}),children:r}]}]}(T):function(e){var t=e.children,n=e.main,r=e.mask,a=e.attributes,i=e.styles,s=e.transform;if(Kt(s)&&n.found&&!r.found){var o={x:n.width/n.height/2,y:.5};a.style=Vt(Ce(Ce({},i),{},{"transform-origin":"".concat(o.x+s.x/16,"em ").concat(o.y+s.y/16,"em")}))}return[{tag:"svg",attributes:a,children:t}]}(T)}function qn(e){var t=e.content,n=e.width,r=e.height,a=e.transform,i=e.title,s=e.extra,o=e.watchable,l=void 0!==o&&o,c=Ce(Ce(Ce({},s.attributes),i?{title:i}:{}),{},{class:s.classes.join(" ")});l&&(c[it]="");var u=Ce({},s.styles);Kt(a)&&(u.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?nt:n,a=e.height,i=void 0===a?nt:a,s=e.startCentered,o=void 0!==s&&s,l="";return l+=o&&et?"translate(".concat(t.x/Nt-r/2,"em, ").concat(t.y/Nt-i/2,"em) "):o?"translate(calc(-50% + ".concat(t.x/Nt,"em), calc(-50% + ").concat(t.y/Nt,"em)) "):"translate(".concat(t.x/Nt,"em, ").concat(t.y/Nt,"em) "),l+="scale(".concat(t.size/Nt*(t.flipX?-1:1),", ").concat(t.size/Nt*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:a,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var d=Vt(u);d.length>0&&(c.style=d);var h=[];return h.push({tag:"span",attributes:c,children:[t]}),i&&h.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),h}var $n=Qt.styles;function Xn(e){var t=e[0],n=e[1],r=Pe(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Mt.cssPrefix,"-").concat(Ct.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Mt.cssPrefix,"-").concat(Ct.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Mt.cssPrefix,"-").concat(Ct.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var Zn={found:!1,width:512,height:512};function Qn(e,t){var n=t;return"fa"===t&&null!==Mt.styleDefault&&(t=Rn()),new Promise((function(r,a){Un("missingIconAbstract");if("fa"===n){var i=Ln(e)||{};e=i.iconName||e,t=i.prefix||t}if(e&&t&&$n[t]&&$n[t][e])return r(Xn($n[t][e]));!function(e,t){ft||Mt.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(Ce(Ce({},Zn),{},{icon:Mt.showMissingIcons&&e&&Un("missingIconAbstract")||{}}))}))}var Jn=function(){},er=Mt.measurePerformance&&Qe&&Qe.mark&&Qe.measure?Qe:{mark:Jn,measure:Jn},tr='FA "6.5.1"',nr=function(e){er.mark("".concat(tr," ").concat(e," ends")),er.measure("".concat(tr," ").concat(e),"".concat(tr," ").concat(e," begins"),"".concat(tr," ").concat(e," ends"))},rr={begin:function(e){return er.mark("".concat(tr," ").concat(e," begins")),function(){return nr(e)}},end:nr},ar=function(){};function ir(e){return"string"===typeof(e.getAttribute?e.getAttribute(it):null)}function sr(e){return Xe.createElementNS("http://www.w3.org/2000/svg",e)}function or(e){return Xe.createElement(e)}function lr(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?sr:or:t;if("string"===typeof e)return Xe.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(lr(e,{ceFn:n}))})),r}var cr={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(lr(e),t)})),null===t.getAttribute(it)&&Mt.keepOriginalSource){var n=Xe.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~zt(t).indexOf(Mt.replacementClass))return cr.replace(e);var r=new RegExp("".concat(Mt.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var a=n[0].attributes.class.split(" ").reduce((function(e,t){return t===Mt.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=a.toSvg.join(" "),0===a.toNode.length?t.removeAttribute("class"):t.setAttribute("class",a.toNode.join(" "))}var i=n.map((function(e){return tn(e)})).join("\n");t.setAttribute(it,""),t.innerHTML=i}};function ur(e){e()}function dr(e,t){var n="function"===typeof t?t:ar;if(0===e.length)n();else{var r=ur;Mt.mutateApproach===dt&&(r=$e.requestAnimationFrame||ur),r((function(){var t=!0===Mt.autoReplaceSvg?cr.replace:cr[Mt.autoReplaceSvg]||cr.replace,r=rr.begin("mutate");e.map(t),r(),n()}))}}var hr=!1;function fr(){hr=!0}function pr(){hr=!1}var mr=null;function gr(e){if(Ze&&Mt.observeMutations){var t=e.treeCallback,n=void 0===t?ar:t,r=e.nodeCallback,a=void 0===r?ar:r,i=e.pseudoElementsCallback,s=void 0===i?ar:i,o=e.observeMutationsRoot,l=void 0===o?Xe:o;mr=new Ze((function(e){if(!hr){var t=Rn();Ht(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!ir(e.addedNodes[0])&&(Mt.searchPseudoElements&&s(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&Mt.searchPseudoElements&&s(e.target.parentNode),"attributes"===e.type&&ir(e.target)&&~At.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(lt):null,n=e.getAttribute?e.getAttribute(ct):null;return t&&n}(e.target)){var r=Dn(zt(e.target)),i=r.prefix,o=r.iconName;e.target.setAttribute(lt,i||t),o&&e.target.setAttribute(ct,o)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(Mt.replacementClass)&&a(e.target);var l}))}})),Je&&mr.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function vr(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",a=Dn(zt(e));return a.prefix||(a.prefix=Rn()),t&&n&&(a.prefix=t,a.iconName=n),a.iconName&&a.prefix||(a.prefix&&r.length>0&&(a.iconName=function(e,t){return(gn[e]||{})[t]}(a.prefix,e.innerText)||kn(a.prefix,an(e.innerText))),!a.iconName&&Mt.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(a.iconName=e.firstChild.data)),a}function yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=vr(e),r=n.iconName,a=n.prefix,i=n.rest,s=function(e){var t=Ht(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Mt.autoA11y&&(n?t["aria-labelledby"]="".concat(Mt.replacementClass,"-title-").concat(r||jt()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),o=Nn("parseNodeAttributes",{},e),l=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],a=n.slice(1);return r&&a.length>0&&(e[r]=a.join(":").trim()),e}),{})),n}(e):[];return Ce({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:a,transform:Bt,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:l,attributes:s}},o)}var br=Qt.styles;function Er(e){var t="nest"===Mt.autoReplaceSvg?yr(e,{styleParser:!1}):yr(e);return~t.extra.classes.indexOf(St)?Un("generateLayersText",e,t):Un("generateSvgReplacementMutation",e,t)}var Tr=new Set;function wr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Je)return Promise.resolve();var n=Xe.documentElement.classList,r=function(e){return n.add("".concat(ut,"-").concat(e))},a=function(e){return n.remove("".concat(ut,"-").concat(e))},i=Mt.autoFetchSvg?Tr:gt.map((function(e){return"fa-".concat(e)})).concat(Object.keys(br));i.includes("fa")||i.push("fa");var s=[".".concat(St,":not([").concat(it,"])")].concat(i.map((function(e){return".".concat(e,":not([").concat(it,"])")}))).join(", ");if(0===s.length)return Promise.resolve();var o=[];try{o=Ht(e.querySelectorAll(s))}catch(Hu){}if(!(o.length>0))return Promise.resolve();r("pending"),a("complete");var l=rr.begin("onTree"),c=o.reduce((function(e,t){try{var n=Er(t);n&&e.push(n)}catch(Hu){ft||"MissingIcon"===Hu.name&&console.error(Hu)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){dr(n,(function(){r("active"),r("complete"),a("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((function(e){l(),n(e)}))}))}function Sr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Er(e).then((function(e){e&&dr([e],t)}))}gt.map((function(e){Tr.add("fa-".concat(e))})),Object.keys(yt[pt]).map(Tr.add.bind(Tr)),Object.keys(yt[mt]).map(Tr.add.bind(Tr)),Tr=Oe(Tr);var kr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Bt:n,a=t.symbol,i=void 0!==a&&a,s=t.mask,o=void 0===s?null:s,l=t.maskId,c=void 0===l?null:l,u=t.title,d=void 0===u?null:u,h=t.titleId,f=void 0===h?null:h,p=t.classes,m=void 0===p?[]:p,g=t.attributes,v=void 0===g?{}:g,y=t.styles,b=void 0===y?{}:y;if(e){var E=e.prefix,T=e.iconName,w=e.icon;return Wn(Ce({type:"icon"},e),(function(){return Bn("beforeDOMElementCreation",{iconDefinition:e,params:t}),Mt.autoA11y&&(d?v["aria-labelledby"]="".concat(Mt.replacementClass,"-title-").concat(f||jt()):(v["aria-hidden"]="true",v.focusable="false")),Yn({icons:{main:Xn(w),mask:o?Xn(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:T,transform:Ce(Ce({},Bt),r),symbol:i,title:d,maskId:c,titleId:f,extra:{attributes:v,styles:b,classes:m}})}))}},xr={mixout:function(){return{icon:(e=kr,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:jn(t||{}),a=n.mask;return a&&(a=(a||{}).icon?a:jn(a||{})),e(r,Ce(Ce({},n),{},{mask:a}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=wr,e.nodeCallback=Sr,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?Xe:t,r=e.callback;return wr(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,a=t.titleId,i=t.prefix,s=t.transform,o=t.symbol,l=t.mask,c=t.maskId,u=t.extra;return new Promise((function(t,d){Promise.all([Qn(n,i),l.iconName?Qn(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var d=Pe(l,2),h=d[0],f=d[1];t([e,Yn({icons:{main:h,mask:f},prefix:i,iconName:n,transform:s,symbol:o,maskId:c,title:r,titleId:a,extra:u,watchable:!0})])})).catch(d)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,a=e.main,i=e.transform,s=Vt(e.styles);return s.length>0&&(r.style=s),Kt(i)&&(t=Un("generateAbstractTransformGrouping",{main:a,transform:i,containerWidth:a.width,iconWidth:a.width})),n.push(t||a.icon),{children:n,attributes:r}}}},Lr={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return Wn({type:"layer"},(function(){Bn("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(Mt.cssPrefix,"-layers")].concat(Oe(r)).join(" ")},children:n}]}))}}}},Rr={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,a=t.classes,i=void 0===a?[]:a,s=t.attributes,o=void 0===s?{}:s,l=t.styles,c=void 0===l?{}:l;return Wn({type:"counter",content:e},(function(){return Bn("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,r=e.extra,a=Ce(Ce(Ce({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),i=Vt(r.styles);i.length>0&&(a.style=i);var s=[];return s.push({tag:"span",attributes:a,children:[t]}),n&&s.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),s}({content:e.toString(),title:r,extra:{attributes:o,styles:c,classes:["".concat(Mt.cssPrefix,"-layers-counter")].concat(Oe(i))}})}))}}}},Ar={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Bt:n,a=t.title,i=void 0===a?null:a,s=t.classes,o=void 0===s?[]:s,l=t.attributes,c=void 0===l?{}:l,u=t.styles,d=void 0===u?{}:u;return Wn({type:"text",content:e},(function(){return Bn("beforeDOMElementCreation",{content:e,params:t}),qn({content:e,transform:Ce(Ce({},Bt),r),title:i,extra:{attributes:c,styles:d,classes:["".concat(Mt.cssPrefix,"-layers-text")].concat(Oe(o))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,a=t.extra,i=null,s=null;if(et){var o=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();i=l.width/o,s=l.height/o}return Mt.autoA11y&&!n&&(a.attributes["aria-hidden"]="true"),Promise.resolve([e,qn({content:e.innerHTML,width:i,height:s,transform:r,title:n,extra:a,watchable:!0})])}}},Cr=new RegExp('"',"ug"),Ir=[1105920,1112319];function Dr(e,t){var n="".concat(ot).concat(t.replace(":","-"));return new Promise((function(r,a){if(null!==e.getAttribute(n))return r();var i=Ht(e.children).filter((function(e){return e.getAttribute(st)===t}))[0],s=$e.getComputedStyle(e,t),o=s.getPropertyValue("font-family").match(kt),l=s.getPropertyValue("font-weight"),c=s.getPropertyValue("content");if(i&&!o)return e.removeChild(i),r();if(o&&"none"!==c&&""!==c){var u=s.getPropertyValue("content"),d=~["Sharp"].indexOf(o[2])?mt:pt,h=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(o[2])?bt[d][o[2].toLowerCase()]:xt[d][l],f=function(e){var t=e.replace(Cr,""),n=function(e,t){var n,r=e.length,a=e.charCodeAt(t);return a>=55296&&a<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(a-55296)+n-56320+65536:a}(t,0),r=n>=Ir[0]&&n<=Ir[1],a=2===t.length&&t[0]===t[1];return{value:an(a?t[0]:t),isSecondary:r||a}}(u),p=f.value,m=f.isSecondary,g=o[0].startsWith("FontAwesome"),v=kn(h,p),y=v;if(g){var b=function(e){var t=yn[e],n=kn("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);b.iconName&&b.prefix&&(v=b.iconName,h=b.prefix)}if(!v||m||i&&i.getAttribute(lt)===h&&i.getAttribute(ct)===y)r();else{e.setAttribute(n,y),i&&e.removeChild(i);var E={iconName:null,title:null,titleId:null,prefix:null,transform:Bt,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},T=E.extra;T.attributes[st]=t,Qn(v,h).then((function(a){var i=Yn(Ce(Ce({},E),{},{icons:{main:a,mask:An()},prefix:h,iconName:y,extra:T,watchable:!0})),s=Xe.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(s,e.firstChild):e.appendChild(s),s.outerHTML=i.map((function(e){return tn(e)})).join("\n"),e.removeAttribute(n),r()})).catch(a)}}else r()}))}function _r(e){return Promise.all([Dr(e,"::before"),Dr(e,"::after")])}function Pr(e){return e.parentNode!==document.head&&!~ht.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(st)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function Or(e){if(Je)return new Promise((function(t,n){var r=Ht(e.querySelectorAll("*")).filter(Pr).map(_r),a=rr.begin("searchPseudoElements");fr(),Promise.all(r).then((function(){a(),pr(),t()})).catch((function(){a(),pr(),n()}))}))}var Mr=!1,Fr=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],a=n.slice(1).join("-");if(r&&"h"===a)return e.flipX=!0,e;if(r&&"v"===a)return e.flipY=!0,e;if(a=parseFloat(a),isNaN(a))return e;switch(r){case"grow":e.size=e.size+a;break;case"shrink":e.size=e.size-a;break;case"left":e.x=e.x-a;break;case"right":e.x=e.x+a;break;case"up":e.y=e.y-a;break;case"down":e.y=e.y+a;break;case"rotate":e.rotate=e.rotate+a}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Nr={mixout:function(){return{parse:{transform:function(e){return Fr(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=Fr(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,a=e.iconWidth,i={transform:"translate(".concat(r/2," 256)")},s="translate(".concat(32*n.x,", ").concat(32*n.y,") "),o="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:i,inner:{transform:"".concat(s," ").concat(o," ").concat(l)},path:{transform:"translate(".concat(a/2*-1," -256)")}};return{tag:"g",attributes:Ce({},c.outer),children:[{tag:"g",attributes:Ce({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:Ce(Ce({},t.icon.attributes),c.path)}]}]}}}},Br={x:0,y:0,width:"100%",height:"100%"};function Ur(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var jr={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?Dn(n.split(" ").map((function(e){return e.trim()}))):An();return r.prefix||(r.prefix=Rn()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,a=e.main,i=e.mask,s=e.maskId,o=e.transform,l=a.width,c=a.icon,u=i.width,d=i.icon,h=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,a={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),s="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:a,inner:{transform:"".concat(i," ").concat(s," ").concat(o)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:o,containerWidth:u,iconWidth:l}),f={tag:"rect",attributes:Ce(Ce({},Br),{},{fill:"white"})},p=c.children?{children:c.children.map(Ur)}:{},m={tag:"g",attributes:Ce({},h.inner),children:[Ur(Ce({tag:c.tag,attributes:Ce(Ce({},c.attributes),h.path)},p))]},g={tag:"g",attributes:Ce({},h.outer),children:[m]},v="mask-".concat(s||jt()),y="clip-".concat(s||jt()),b={tag:"mask",attributes:Ce(Ce({},Br),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,g]},E={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=d,"g"===t.tag?t.children:[t])},b]};return n.push(E,{tag:"rect",attributes:Ce({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},Br)}),{children:n,attributes:r}}}},Hr={provides:function(e){var t=!1;$e.matchMedia&&(t=$e.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:Ce(Ce({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=Ce(Ce({},r),{},{attributeName:"opacity"}),i={tag:"circle",attributes:Ce(Ce({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||i.children.push({tag:"animate",attributes:Ce(Ce({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ce(Ce({},a),{},{values:"1;0;1;1;0;1;"})}),e.push(i),e.push({tag:"path",attributes:Ce(Ce({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ce(Ce({},a),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:Ce(Ce({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ce(Ce({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;Pn=e,On={},Object.keys(Mn).forEach((function(e){-1===Fn.indexOf(e)&&delete Mn[e]})),Pn.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===Ie(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){On[e]||(On[e]=[]),On[e].push(r[e])}))}e.provides&&e.provides(Mn)}))}([Xt,xr,Lr,Rr,Ar,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=Or,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?Xe:t;Mt.searchPseudoElements&&Or(n)}}},{mixout:function(){return{dom:{unwatch:function(){fr(),Mr=!0}}}},hooks:function(){return{bootstrap:function(){gr(Nn("mutationObserverCallbacks",{}))},noAuto:function(){mr&&mr.disconnect()},watch:function(e){var t=e.observeMutationsRoot;Mr?pr():gr(Nn("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},Nr,jr,Hr,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:Vn});var zr=Vn.parse,Gr=Vn.icon,Vr=n(7),Kr=n.n(Vr);function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){$r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Zr(e){return function(e){if(Array.isArray(e))return Qr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jr(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var ea=["style"];var ta=!1;try{ta=!0}catch(Hu){}function na(e){return e&&"object"===qr(e)&&e.prefix&&e.iconName&&e.icon?e:zr.icon?zr.icon(e):null===e?null:e&&"object"===qr(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function ra(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?$r({},e,t):{}}var aa=t.forwardRef((function(e,t){var n=e.icon,r=e.mask,a=e.symbol,i=e.className,s=e.title,o=e.titleId,l=e.maskId,c=na(n),u=ra("classes",[].concat(Zr(function(e){var t,n=e.beat,r=e.fade,a=e.beatFade,i=e.bounce,s=e.shake,o=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,d=e.pulse,h=e.fixedWidth,f=e.inverse,p=e.border,m=e.listItem,g=e.flip,v=e.size,y=e.rotation,b=e.pull,E=($r(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":a,"fa-bounce":i,"fa-shake":s,"fa-flash":o,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":h,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(v),"undefined"!==typeof v&&null!==v),$r(t,"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),$r(t,"fa-pull-".concat(b),"undefined"!==typeof b&&null!==b),$r(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(E).map((function(e){return E[e]?e:null})).filter((function(e){return e}))}(e)),Zr(i.split(" ")))),d=ra("transform","string"===typeof e.transform?zr.transform(e.transform):e.transform),h=ra("mask",na(r)),f=Gr(c,Yr(Yr(Yr(Yr({},u),d),h),{},{symbol:a,title:s,titleId:o,maskId:l}));if(!f)return function(){var e;!ta&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var p=f.abstract,m={ref:t};return Object.keys(e).forEach((function(t){aa.defaultProps.hasOwnProperty(t)||(m[t]=e[t])})),ia(p[0],m)}));aa.displayName="FontAwesomeIcon",aa.propTypes={beat:Kr().bool,border:Kr().bool,beatFade:Kr().bool,bounce:Kr().bool,className:Kr().string,fade:Kr().bool,flash:Kr().bool,mask:Kr().oneOfType([Kr().object,Kr().array,Kr().string]),maskId:Kr().string,fixedWidth:Kr().bool,inverse:Kr().bool,flip:Kr().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Kr().oneOfType([Kr().object,Kr().array,Kr().string]),listItem:Kr().bool,pull:Kr().oneOf(["right","left"]),pulse:Kr().bool,rotation:Kr().oneOf([0,90,180,270]),shake:Kr().bool,size:Kr().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Kr().bool,spinPulse:Kr().bool,spinReverse:Kr().bool,symbol:Kr().oneOfType([Kr().bool,Kr().string]),title:Kr().string,titleId:Kr().string,transform:Kr().oneOfType([Kr().string,Kr().object]),swapOpacity:Kr().bool},aa.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var ia=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var a=(n.children||[]).map((function(n){return e(t,n)})),i=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),a=Jr(t.slice(0,r)),i=t.slice(r+1).trim();return a.startsWith("webkit")?e[(n=a,n.charAt(0).toUpperCase()+n.slice(1))]=i:e[a]=i,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Jr(t)]=r}return e}),{attrs:{}}),s=r.style,o=void 0===s?{}:s,l=Xr(r,ea);return i.attrs.style=Yr(Yr({},i.attrs.style),o),t.apply(void 0,[n.tag,Yr(Yr({},i.attrs),l)].concat(Zr(a)))}.bind(null,t.createElement),sa={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},oa=sa,la=n(184);const ca=function(){const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)("");return(0,t.useEffect)((()=>{""===e&&l(!0);const t="https://api-shig.vercel.app/anime/gogoanime/".concat(e,"?page=").concat(r);fetch(t).then((e=>e.json())).then((e=>{const t=e.results;s(t)})).catch((e=>console.error("Error fetching data:",e)))}),[e]),(0,la.jsxs)("div",{className:"nav",children:[(0,la.jsx)("strong",{className:"minazuki",children:"Minazuki"}),(0,la.jsxs)("div",{className:"searchContainer",children:[(0,la.jsx)("input",{className:"searchBar",type:"text",value:e,onChange:e=>{n(e.target.value),l(!1)},onBlur:()=>{setTimeout((()=>{l(!0)}),200)},onFocus:()=>{""!==e&&l(!1)},placeholder:"Search"}),(0,la.jsx)("div",{className:"searchBarLine",children:" | "}),(0,la.jsx)(aa,{icon:oa,className:"searchBarIcon"}),(0,la.jsx)("div",{className:"searchResults",style:{display:o?"none":"block"},children:i&&i.length>0?i.map((e=>(0,la.jsxs)(xe,{className:"resultItem",to:"/watch/".concat(e.id),children:[" ",(0,la.jsx)(aa,{icon:oa,className:"searchResultsIcon"}),e.title]},e.id))):(0,la.jsx)("div",{className:"noResultItem",children:"No results found."})})]})]})};var ua=n(935),da=n.n(ua);function ha(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fa,pa={exports:{}};fa=pa,function(e){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var a=i.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=i.normalizePath(a.path),i.buildURLFromParts(a)}var s=i.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return r.alwaysNormalize?(s.path=i.normalizePath(s.path),i.buildURLFromParts(s)):t;var o=i.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=n.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(c.netLoc=o.netLoc,"/"!==s.path[0]))if(s.path){var u=o.path,d=u.substring(0,u.lastIndexOf("/")+1)+s.path;c.path=i.normalizePath(d)}else c.path=o.path,s.params||(c.params=o.params,s.query||(c.query=o.query));return null===c.path&&(c.path=r.alwaysNormalize?i.normalizePath(s.path):s.path),i.buildURLFromParts(c)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};fa.exports=i}();var ma=pa.exports;function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){ya(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ya(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ba.apply(this,arguments)}const Ea=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},Ta=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=wa},wa=Number.MAX_SAFE_INTEGER||9007199254740991;let Sa=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e}({}),ka=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),xa=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown",e}({});const La=function(){},Ra={trace:La,debug:La,log:La,warn:La,info:La,error:La};let Aa=Ra;function Ca(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){Aa[t]=e[t]?e[t].bind(e):function(e){const t=self.console[e];return t?t.bind(self.console,"[".concat(e,"] >")):La}(t)}))}const Ia=Aa,Da=/^(\d+)x(\d+)$/,_a=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Pa{constructor(e){"string"===typeof e&&(e=Pa.parseAttrList(e));for(const t in e)e.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return"YES"===this[e]}decimalResolution(e){const t=Da.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={};for(_a.lastIndex=0;null!==(t=_a.exec(e));){let e=t[2];0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1));n[t[1].trim()]=e}return n}}function Oa(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e}class Ma{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){Ia.warn('DATERANGE tag attribute: "'.concat(t,'" does not match for tags with ID: "').concat(e.ID,'"')),this._badValueForSameId=t;break}e=ba(new Pa({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=new Date(this.attr["END-DATE"]);Ea(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ea(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Ea(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Fa{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Na="audio",Ba="video",Ua="audiovideo";class ja{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Na]:null,[Ba]:null,[Ua]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=ma.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Ha extends ja{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Fa,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!Ea(this.programDateTime))return null;const e=Ea(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{elementaryStreams:s}=this,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,r),o.endDTS=Math.max(o.endDTS,a)):s[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:a,partial:i}}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Na]=null,e[Ba]=null,e[Ua]=null}}class za extends ja{constructor(e,t,n,r,a){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Fa,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const i=e.enumeratedString("BYTERANGE");i&&this.setByteRange(i,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}class Ga{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&Ea(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Va(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function Ka(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],a=r[1];t?(e.splice(-1,1),n=Va(a)):n=function(e){const t=Wa(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(a)}}return n}function Wa(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}var Ya={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},qa="org.w3.clearkey",$a="com.apple.streamingkeydelivery",Xa="com.microsoft.playready",Za="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Qa(e){switch(e){case $a:return Ya.FAIRPLAY;case Xa:return Ya.PLAYREADY;case Za:return Ya.WIDEVINE;case qa:return Ya.CLEARKEY}}var Ja="edef8ba979d64acea3c827dcd51d21ed";function ei(e){switch(e){case Ya.FAIRPLAY:return $a;case Ya.PLAYREADY:return Xa;case Ya.WIDEVINE:return Za;case Ya.CLEARKEY:return qa}}function ti(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[Ya.FAIRPLAY,Ya.WIDEVINE,Ya.PLAYREADY,Ya.CLEARKEY].filter((e=>!!t[e])):[];return!r[Ya.WIDEVINE]&&n&&r.push(Ya.WIDEVINE),r}const ni="undefined"!==typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function ri(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}const ai=(e,t)=>t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,ii=(e,t)=>t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128,si=(e,t)=>{const n=t;let r=0;for(;ai(e,t);){r+=10;r+=oi(e,t+6),ii(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)},oi=(e,t)=>{let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n},li=(e,t)=>ai(e,t)&&oi(e,t+6)+10<=e.length-t,ci=e=>e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info,ui=e=>{const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=oi(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},di=e=>{let t=0;const n=[];for(;ai(e,t);){const r=oi(e,t+6);t+=10;const a=t+r;for(;t+8<a;){const r=ui(e.subarray(t)),a=hi(r);a&&n.push(a),t+=r.size+10}ii(e,t)&&(t+=10)}return n},hi=e=>"PRIV"===e.type?fi(e):"W"===e.type[0]?mi(e):pi(e),fi=e=>{if(e.size<2)return;const t=vi(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}},pi=e=>{if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=vi(e.data.subarray(t),!0);t+=n.length+1;const r=vi(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=vi(e.data.subarray(1));return{key:e.type,data:t}},mi=e=>{if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=vi(e.data.subarray(t),!0);t+=n.length+1;const r=vi(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=vi(e.data);return{key:e.type,data:t}},gi=e=>{if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},vi=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=bi();if(n){const r=n.decode(e);if(t){const e=r.indexOf("\0");return-1!==e?r.substring(0,e):r}return r.replace(/\0/g,"")}const r=e.length;let a,i,s,o="",l=0;for(;l<r;){if(a=e[l++],0===a&&t)return o;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(a);break;case 12:case 13:i=e[l++],o+=String.fromCharCode((31&a)<<6|63&i);break;case 14:i=e[l++],s=e[l++],o+=String.fromCharCode((15&a)<<12|(63&i)<<6|(63&s)<<0)}}return o};let yi;function bi(){if(!navigator.userAgent.includes("PlayStation 4"))return yi||"undefined"===typeof self.TextDecoder||(yi=new self.TextDecoder("utf-8")),yi}const Ei=function(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t},Ti=Math.pow(2,32)-1,wi=[].push,Si={video:1,audio:2,id3:3,text:4};function ki(e){return String.fromCharCode.apply(null,e)}function xi(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function Li(e,t){const n=Ri(e,t);return n<0?4294967296+n:n}function Ri(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Ai(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function Ci(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let a=0;a<r;){const i=Li(e,a),s=i>1?a+i:r;if(ki(e.subarray(a+4,a+8))===t[0])if(1===t.length)n.push(e.subarray(a+8,s));else{const r=Ci(e.subarray(a+8,s),t.slice(1));r.length&&wi.apply(n,r)}a=s}return n}function Ii(e){const t=[],n=e[0];let r=8;const a=Li(e,r);r+=4;r+=0===n?8:16,r+=2;let i=e.length+0;const s=xi(e,r);r+=2;for(let o=0;o<s;o++){let n=r;const s=Li(e,n);n+=4;const o=2147483647&s;if(1===(2147483648&s)>>>31)return Ia.warn("SIDX has hierarchical references (not supported)"),null;const l=Li(e,n);n+=4,t.push({referenceSize:o,subsegmentDuration:l,info:{duration:l/a,start:i,end:i+o-1}}),i+=o,n+=4,r=n}return{earliestPresentationTime:0,timescale:a,version:n,referencesCount:s,references:t}}function Di(e){const t=[],n=Ci(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],a=Ci(e,["tkhd"])[0];if(a){let n=a[0],r=0===n?12:20;const i=Li(a,r),s=Ci(e,["mdia","mdhd"])[0];if(s){n=s[0],r=0===n?12:20;const a=Li(s,r),o=Ci(e,["mdia","hdlr"])[0];if(o){const n=ki(o.subarray(8,12)),r={soun:Na,vide:Ba}[n];if(r){const n=Ci(e,["mdia","minf","stbl","stsd"])[0];let s;n&&(s=ki(n.subarray(12,16))),t[i]={timescale:a,type:r},t[r]={timescale:a,id:i,codec:s}}}}}}return Ci(e,["moov","mvex","trex"]).forEach((e=>{const n=Li(e,4),r=t[n];r&&(r.default={duration:Li(e,12),flags:Li(e,20)})})),t}function _i(e){const t=Ci(e,["schm"])[0];if(t){const n=ki(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return Ci(e,["schi","tenc"])[0]}return Ia.error("[eme] missing 'schm' box"),null}function Pi(e){const t=Li(e,0);let n=8;1&t&&(n+=4),4&t&&(n+=4);let r=0;const a=Li(e,4);for(let i=0;i<a;i++){if(256&t){r+=Li(e,n),n+=4}512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4)}return r}function Oi(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Mi(e,t){const n=[],r=t.samples,a=t.timescale,i=t.id;let s=!1;return Ci(r,["moof"]).map((o=>{const l=o.byteOffset-8;Ci(o,["traf"]).map((o=>{const c=Ci(o,["tfdt"]).map((e=>{const t=e[0];let n=Li(e,4);return 1===t&&(n*=Math.pow(2,32),n+=Li(e,8)),n/a}))[0];return void 0!==c&&(e=c),Ci(o,["tfhd"]).map((c=>{const u=Li(c,4),d=16777215&Li(c,0);let h=0;const f=0!==(16&d);let p=0;const m=0!==(32&d);let g=8;u===i&&(0!==(1&d)&&(g+=8),0!==(2&d)&&(g+=4),0!==(8&d)&&(h=Li(c,g),g+=4),f&&(p=Li(c,g),g+=4),m&&(g+=4),"video"===t.type&&(s=function(e){if(!e)return!1;const t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),Ci(o,["trun"]).map((i=>{const o=i[0],c=16777215&Li(i,0),u=0!==(1&c);let d=0;const f=0!==(4&c),m=0!==(256&c);let g=0;const v=0!==(512&c);let y=0;const b=0!==(1024&c),E=0!==(2048&c);let T=0;const w=Li(i,4);let S=8;u&&(d=Li(i,S),S+=4),f&&(S+=4);let k=d+l;for(let l=0;l<w;l++){if(m?(g=Li(i,S),S+=4):g=h,v?(y=Li(i,S),S+=4):y=p,b&&(S+=4),E&&(T=0===o?Li(i,S):Ri(i,S),S+=4),t.type===Ba){let t=0;for(;t<y;){const i=Li(r,k);if(k+=4,Fi(s,r[k])){Ni(r.subarray(k,k+i),s?2:1,e+T/a,n)}k+=i,t+=i+4}}e+=g/a}})))}))}))})),n}function Fi(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function Ni(e,t,n,r){const a=Bi(e);let i=0;i+=t;let s=0,o=0,l=!1,c=0;for(;i<a.length;){s=0;do{if(i>=a.length)break;c=a[i++],s+=c}while(255===c);o=0;do{if(i>=a.length)break;c=a[i++],o+=c}while(255===c);const e=a.length-i;if(!l&&4===s&&i<a.length){l=!0;if(181===a[i++]){const e=xi(a,i);if(i+=2,49===e){const e=Li(a,i);if(i+=4,1195456820===e){const e=a[i++];if(3===e){const t=a[i++],o=64&t,l=o?2+3*(31&t):0,c=new Uint8Array(l);if(o){c[0]=t;for(let e=1;e<l;e++)c[e]=a[i++]}r.push({type:e,payloadType:s,pts:n,bytes:c})}}}}}else if(5===s&&o<e){if(l=!0,o>16){const e=[];for(let n=0;n<16;n++){const t=a[i++].toString(16);e.push(1==t.length?"0"+t:t),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const t=o-16,l=new Uint8Array(t);for(let n=0;n<t;n++)l[n]=a[i++];r.push({payloadType:s,pts:n,uuid:e.join(""),userData:vi(l),userDataBytes:l})}}else if(o<e)i+=o;else if(o>e)break}}function Bi(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const a=t-n.length,i=new Uint8Array(a);let s=0;for(r=0;r<a;s++,r++)s===n[0]&&(s++,n.shift()),i[r]=e[s];return i}function Ui(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,a,i;if(t){r=1,a=new Uint8Array(16*t.length);for(let e=0;e<t.length;e++){const n=t[e];if(16!==n.byteLength)throw new RangeError("Invalid key");a.set(n,16*e)}}else r=0,a=new Uint8Array;r>0?(i=new Uint8Array(4),t.length>0&&new DataView(i.buffer).setUint32(0,t.length,!1)):i=new Uint8Array;const s=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(s.buffer).setUint32(0,n.byteLength,!1),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.length;let i=8,s=a;for(;s--;)i+=n[s].byteLength;const o=new Uint8Array(i);for(o[0]=i>>24&255,o[1]=i>>16&255,o[2]=i>>8&255,o[3]=255&i,o.set(e,4),s=0,i=8;s<a;s++)o.set(n[s],i),i+=n[s].byteLength;return o}([112,115,115,104],new Uint8Array([r,0,0,0]),e,i,a,s,n||new Uint8Array)}let ji={};class Hi{static clearKeyUriToKeyIdMap(){ji={}}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=a,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case $a:case Za:case Xa:case qa:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!==typeof e&&("AES-128"!==this.method||this.iv||Ia.warn('missing IV for initialization segment with method="'.concat(this.method,'" - compliance issue')),e=0);const t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e);return new Hi(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=Ka(this.uri);if(t)switch(this.keyFormat){case Za:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Xa:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Ui(e,null,t);const n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=String.fromCharCode.apply(null,Array.from(n)),a=r.substring(r.indexOf("<"),r.length),i=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=Va(e).subarray(0,16);!function(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=ji[this.uri];if(!e){const t=Object.keys(ji).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);new DataView(e.buffer,12,4).setUint32(0,t),ji[this.uri]=e}this.keyId=e}return this}}const zi=/\{\$([a-zA-Z0-9-_]+)\}/g;function Gi(e){return zi.test(e)}function Vi(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(let r=n.length;r--;){const a=n[r],i=t[a];i&&(t[a]=Ki(e,i))}}function Ki(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(zi,(t=>{const r=t.substring(2,t.length-1),a=null==n?void 0:n[r];return void 0===a?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'.concat(r,'"'))),t):a}))}return t}function Wi(e,t,n){let r,a,i=e.variableList;if(i||(e.variableList=i={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error('"'.concat(r,'" does not match any query parameter in URI: "').concat(n,'"'));a=e.get(r)}catch(s){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: ".concat(s.message)))}}else r=t.NAME,a=t.VALUE;r in i?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'.concat(r,'"'))):i[r]=a||""}function Yi(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'.concat(r,'"')))}function qi(){if("undefined"!==typeof self)return self.MediaSource||self.WebKitMediaSource}const $i={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},Xi=qi();function Zi(e,t){var n;return null!=(n=null==Xi?void 0:Xi.isTypeSupported("".concat(t||"video",'/mp4;codecs="').concat(e,'"')))&&n}const Qi=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Ji=/#EXT-X-MEDIA:(.*)/g,es=/^#EXT(?:INF|-X-TARGETDURATION):/m,ts=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),ns=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class rs{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static convertAVC1ToAVCOTI(e){const t=e.split(".");if(t.length>2){let e=t.shift()+".";return e+=parseInt(t.shift()).toString(16),e+=("000"+parseInt(t.shift()).toString(16)).slice(-4),e}return e}static resolve(e,t){return ma.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return es.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Gi(e)},r=[];let a;for(Qi.lastIndex=0;null!=(a=Qi.exec(e));)if(a[1]){var i;const e=new Pa(a[1]);Vi(n,e,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const s=Ki(n,a[2]),o={attrs:e,bitrate:e.decimalInteger("AVERAGE-BANDWIDTH")||e.decimalInteger("BANDWIDTH"),name:e.NAME,url:rs.resolve(s,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),ss((e.CODECS||"").split(/[ ,]+/).filter((e=>e)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=rs.convertAVC1ToAVCOTI(o.videoCodec)),null!=(i=o.unknownCodecs)&&i.length||r.push(o),n.levels.push(o)}else if(a[3]){const e=a[3],r=a[4];switch(e){case"SESSION-DATA":{const e=new Pa(r);Vi(n,e,["DATA-ID","LANGUAGE","VALUE","URI"]);const t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=as(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):Ia.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'.concat(r,'"'));break}case"DEFINE":{const e=new Pa(r);Vi(n,e,["NAME","VALUE","QUERYPARAM"]),Wi(n,e,t)}break;case"CONTENT-STEERING":{const e=new Pa(r);Vi(n,e,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:rs.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=is(r)}}const s=r.length>0&&r.length<n.levels.length;return n.levels=s?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const a={},i=n.levels,s={AUDIO:i.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:i.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(Ji.lastIndex=0;null!==(r=Ji.exec(e));){const e=new Pa(r[1]),i=e.TYPE;if(i){const r=s[i],l=a[i]||[];a[i]=l,Vi(n,e,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const c={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",instreamId:e["INSTREAM-ID"],name:e.NAME||e.LANGUAGE||"",type:i,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:e.LANGUAGE,url:e.URI?rs.resolve(e.URI,t):""};if(null!=r&&r.length){const e=rs.findGroup(r,c.groupId)||r[0];os(c,e,"audioCodec"),os(c,e,"textCodec")}l.push(c)}}return a}static parseLevelPlaylist(e,t,n,r,a,i){const s=new Ga(t),o=s.fragments;let l,c,u,d=null,h=0,f=0,p=0,m=0,g=null,v=new Ha(r,t),y=-1,b=!1;for(ts.lastIndex=0,s.m3u8=e,s.hasVariableRefs=Gi(e);null!==(l=ts.exec(e));){b&&(b=!1,v=new Ha(r,t),v.start=p,v.sn=h,v.cc=m,v.level=n,d&&(v.initSegment=d,v.rawProgramDateTime=d.rawProgramDateTime,d.rawProgramDateTime=null));const e=l[1];if(e){v.duration=parseFloat(e);const t=(" "+l[2]).slice(1);v.title=t||null,v.tagList.push(t?["INF",e,t]:["INF",e])}else if(l[3]){if(Ea(v.duration)){v.start=p,u&&us(v,u,s),v.sn=h,v.level=n,v.cc=m,v.urlId=a,o.push(v);const e=(" "+l[3]).slice(1);v.relurl=Ki(s,e),ls(v,g),g=v,p+=v.duration,h++,f=0,b=!0}}else if(l[4]){const e=(" "+l[4]).slice(1);g?v.setByteRange(e,g):v.setByteRange(e)}else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===y&&(y=o.length);else{if(l=l[0].match(ns),!l){Ia.warn("No matches on slow regex match for level playlist!");continue}for(c=1;c<l.length&&"undefined"===typeof l[c];c++);const e=(" "+l[c]).slice(1),a=(" "+l[c+1]).slice(1),p=l[c+2]?(" "+l[c+2]).slice(1):"";switch(e){case"PLAYLIST-TYPE":s.type=a.toUpperCase();break;case"MEDIA-SEQUENCE":h=s.startSN=parseInt(a);break;case"SKIP":{const e=new Pa(a);Vi(s,e,["RECENTLY-REMOVED-DATERANGES"]);const t=e.decimalInteger("SKIPPED-SEGMENTS");if(Ea(t)){s.skippedSegments=t;for(let e=t;e--;)o.unshift(null);h+=t}const n=e.enumeratedString("RECENTLY-REMOVED-DATERANGES");n&&(s.recentlyRemovedDateranges=n.split("\t"));break}case"TARGETDURATION":s.targetduration=Math.max(parseInt(a),1);break;case"VERSION":s.version=parseInt(a);break;case"EXTM3U":break;case"ENDLIST":s.live=!1;break;case"#":(a||p)&&v.tagList.push(p?[a,p]:[a]);break;case"DISCONTINUITY":m++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([e]);break;case"BITRATE":v.tagList.push([e,a]);break;case"DATERANGE":{const e=new Pa(a);Vi(s,e,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Vi(s,e,e.clientAttrs);const t=new Ma(e,s.dateRanges[e.ID]);t.isValid||s.skippedSegments?s.dateRanges[t.id]=t:Ia.warn('Ignoring invalid DATERANGE tag: "'.concat(a,'"')),v.tagList.push(["EXT-X-DATERANGE",a]);break}case"DEFINE":{const e=new Pa(a);Vi(s,e,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in e?Yi(s,e,i):Wi(s,e,t)}break;case"DISCONTINUITY-SEQUENCE":m=parseInt(a);break;case"KEY":{const e=as(a,t,s);if(e.isSupported()){if("NONE"===e.method){u=void 0;break}u||(u={}),u[e.keyFormat]&&(u=ba({},u)),u[e.keyFormat]=e}else Ia.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'.concat(a,'"'));break}case"START":s.startTimeOffset=is(a);break;case"MAP":{const e=new Pa(a);if(Vi(s,e,["BYTERANGE","URI"]),v.duration){const a=new Ha(r,t);cs(a,e,n,u),d=a,v.initSegment=d,d.rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=d.rawProgramDateTime)}else cs(v,e,n,u),d=v,b=!0;break}case"SERVER-CONTROL":{const e=new Pa(a);s.canBlockReload=e.bool("CAN-BLOCK-RELOAD"),s.canSkipUntil=e.optionalFloat("CAN-SKIP-UNTIL",0),s.canSkipDateRanges=s.canSkipUntil>0&&e.bool("CAN-SKIP-DATERANGES"),s.partHoldBack=e.optionalFloat("PART-HOLD-BACK",0),s.holdBack=e.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const e=new Pa(a);s.partTarget=e.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=s.partList;e||(e=s.partList=[]);const n=f>0?e[e.length-1]:void 0,r=f++,i=new Pa(a);Vi(s,i,["BYTERANGE","URI"]);const o=new za(i,v,t,r,n);e.push(o),v.duration+=o.duration;break}case"PRELOAD-HINT":{const e=new Pa(a);Vi(s,e,["URI"]),s.preloadHint=e;break}case"RENDITION-REPORT":{const e=new Pa(a);Vi(s,e,["URI"]),s.renditionReports=s.renditionReports||[],s.renditionReports.push(e);break}default:Ia.warn("line parsed but not handled: ".concat(l))}}}g&&!g.relurl?(o.pop(),p-=g.duration,s.partList&&(s.fragmentHint=g)):s.partList&&(ls(v,g),v.cc=m,s.fragmentHint=v,u&&us(v,u,s));const E=o.length,T=o[0],w=o[E-1];if(p+=s.skippedSegments*s.targetduration,p>0&&E&&w){s.averagetargetduration=p/E;const e=w.sn;s.endSN="initSegment"!==e?e:0,s.live||(w.endList=!0),T&&(s.startCC=T.cc)}else s.endSN=0,s.startCC=0;return s.fragmentHint&&(p+=s.fragmentHint.duration),s.totalduration=p,s.endCC=m,y>0&&function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(o,y),s}}function as(e,t,n){var r,a;const i=new Pa(e);Vi(n,i,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const s=null!=(r=i.METHOD)?r:"",o=i.URI,l=i.hexadecimalInteger("IV"),c=i.KEYFORMATVERSIONS,u=null!=(a=i.KEYFORMAT)?a:"identity";o&&i.IV&&!l&&Ia.error("Invalid IV: ".concat(i.IV));const d=o?rs.resolve(o,t):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Hi(s,d,u,h,l)}function is(e){const t=new Pa(e).decimalFloatingPoint("TIME-OFFSET");return Ea(t)?t:null}function ss(e,t){["video","audio","text"].forEach((n=>{const r=e.filter((e=>function(e,t){const n=$i[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)));if(r.length){const a=r.filter((e=>0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)));t["".concat(n,"Codec")]=a.length>0?a[0]:r[0],e=e.filter((e=>-1===r.indexOf(e)))}})),t.unknownCodecs=e}function os(e,t,n){const r=t[n];r&&(e[n]=r)}function ls(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Ea(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function cs(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function us(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||r.push(e)}var ds="manifest",hs="level",fs="audioTrack",ps="subtitleTrack",ms="main",gs="audio",vs="subtitle";function ys(e){const{type:t}=e;switch(t){case fs:return gs;case ps:return vs;default:return ms}}function bs(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class Es{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.LEVEL_LOADING,this.onLevelLoading,this),e.on(Sa.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Sa.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.LEVEL_LOADING,this.onLevelLoading,this),e.off(Sa.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Sa.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,a=new(n||r)(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:ds,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:r,url:a,deliveryDirectives:i}=t;this.load({id:n,level:r,responseType:"text",type:hs,url:a,deliveryDirectives:i})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:a,deliveryDirectives:i}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:fs,url:a,deliveryDirectives:i})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:a,deliveryDirectives:i}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:ps,url:a,deliveryDirectives:i})}load(e){var t;const n=this.hls.config;let r,a=this.getInternalLoader(e);if(a){const t=a.context;if(t&&t.url===e.url)return void Ia.trace("[playlist-loader]: playlist request ongoing");Ia.log("[playlist-loader]: aborting previous loader for type: ".concat(e.type)),a.abort()}if(r=e.type===ds?n.manifestLoadPolicy.default:ba({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),a=this.createInternalLoader(e),null!=(t=e.deliveryDirectives)&&t.part){let t;if(e.type===hs&&null!==e.level?t=this.hls.levels[e.level].details:e.type===fs&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===ps&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);r=ba({},r,{maxTimeToFirstByteMs:Math.min(t,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,r.maxTimeToFirstByteMs)})}}}const i=r.errorRetry||r.timeoutRetry||{},s={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:i.maxNumRetry||0,retryDelay:i.retryDelayMs||0,maxRetryDelay:i.maxRetryDelayMs||0},o={onSuccess:(e,t,n,r)=>{const a=this.getInternalLoader(n);this.resetInternalLoader(n.type);const i=e.data;0===i.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),rs.isMediaPlaylist(i)?this.handleTrackOrLevelPlaylist(e,t,n,r||null,a):this.handleMasterPlaylist(e,t,n,r)):this.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),r||null,t)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};a.load(e,s,o)}handleMasterPlaylist(e,t,n,r){const a=this.hls,i=e.data,s=bs(e,n),o=rs.parseMasterPlaylist(i,s);if(o.playlistParsingError)return void this.handleManifestParsingError(e,n,o.playlistParsingError,r,t);const{contentSteering:l,levels:c,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f}=o;this.variableList=f;const{AUDIO:p=[],SUBTITLES:m,"CLOSED-CAPTIONS":g}=rs.parseMasterPlaylistMedia(i,s,o);if(p.length){p.some((e=>!e.url))||!c[0].audioCodec||c[0].attrs.AUDIO||(Ia.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Pa({}),bitrate:0,url:""}))}a.trigger(Sa.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:m,captions:g,contentSteering:l,url:s,stats:t,networkDetails:r,sessionData:u,sessionKeys:d,startTimeOffset:h,variableList:f})}handleTrackOrLevelPlaylist(e,t,n,r,a){const i=this.hls,{id:s,level:o,type:l}=n,c=bs(e,n),u=Ea(s)?s:0,d=Ea(o)?o:u,h=ys(n),f=rs.parseLevelPlaylist(e.data,c,d,h,u,this.variableList);if(l===ds){const e={attrs:new Pa({}),bitrate:0,details:f,name:"",url:c};i.trigger(Sa.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=f,this.handlePlaylistLoaded(f,e,t,n,r,a)}handleManifestParsingError(e,t,n,r,a){this.hls.trigger(Sa.ERROR,{type:ka.NETWORK_ERROR,details:xa.MANIFEST_PARSING_ERROR,fatal:t.type===ds,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:a})}handleNetworkError(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i="A network ".concat(n?"timeout":"error"+(r?" (status "+r.code+")":"")," occurred while loading ").concat(e.type);e.type===hs?i+=": ".concat(e.level," id: ").concat(e.id):e.type!==fs&&e.type!==ps||(i+=" id: ".concat(e.id,' group-id: "').concat(e.groupId,'"'));const s=new Error(i);Ia.warn("[playlist-loader]: ".concat(i));let o=xa.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case ds:o=n?xa.MANIFEST_LOAD_TIMEOUT:xa.MANIFEST_LOAD_ERROR,l=!0;break;case hs:o=n?xa.LEVEL_LOAD_TIMEOUT:xa.LEVEL_LOAD_ERROR,l=!1;break;case fs:o=n?xa.AUDIO_TRACK_LOAD_TIMEOUT:xa.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case ps:o=n?xa.SUBTITLE_TRACK_LOAD_TIMEOUT:xa.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(e.type);const u={type:ka.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:c,context:e,error:s,networkDetails:t,stats:a};if(r){const n=(null==t?void 0:t.url)||e.url;u.response=va({url:n,data:void 0},r)}this.hls.trigger(Sa.ERROR,u)}handlePlaylistLoaded(e,t,n,r,a,i){const s=this.hls,{type:o,level:l,id:c,groupId:u,deliveryDirectives:d}=r,h=bs(t,r),f=ys(r),p="number"===typeof r.level&&f===ms?l:void 0;if(!e.fragments.length){const e=new Error("No Segments found in Playlist");return void s.trigger(Sa.ERROR,{type:ka.NETWORK_ERROR,details:xa.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:e,reason:e.message,response:t,context:r,level:p,parent:f,networkDetails:a,stats:n})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m)s.trigger(Sa.ERROR,{type:ka.NETWORK_ERROR,details:xa.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:t,context:r,level:p,parent:f,networkDetails:a,stats:n});else switch(e.live&&i&&(i.getCacheAge&&(e.ageHeader=i.getCacheAge()||0),i.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case ds:case hs:s.trigger(Sa.LEVEL_LOADED,{details:e,level:p||0,id:c||0,stats:n,networkDetails:a,deliveryDirectives:d});break;case fs:s.trigger(Sa.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:a,deliveryDirectives:d});break;case ps:s.trigger(Sa.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:u||"",stats:n,networkDetails:a,deliveryDirectives:d})}}}function Ts(e,t){let n;try{n=new Event("addtrack")}catch(r){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function ws(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: ".concat(t))}catch(r){Ia.debug("[texttrack-utils]: ".concat(r));try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(a){Ia.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: ".concat(a))}}"disabled"===n&&(e.mode=n)}function Ss(e){const t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(let n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function ks(e,t,n,r){const a=e.mode;if("disabled"===a&&(e.mode="hidden"),e.cues&&e.cues.length>0){const a=function(e,t,n){const r=[],a=function(e,t){if(t<e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r=0,a=n;for(;r<=a;){const i=Math.floor((a+r)/2);if(t<e[i].startTime)a=i-1;else{if(!(t>e[i].startTime&&r<n))return i;r=i+1}}return e[r].startTime-t<t-e[a].startTime?r:a}(e,t);if(a>-1)for(let i=a,s=e.length;i<s;i++){const a=e[i];if(a.startTime>=t&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<a.length;t++)r&&!r(a[t])||e.removeCue(a[t])}"disabled"===a&&(e.mode=a)}var xs="org.id3",Ls="com.apple.quicktime.HLS",Rs="https://aomedia.org/emsg/ID3";function As(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function Cs(e,t,n,r,a){let i=new e(t,n,"");try{i.value=r,a&&(i.type=a)}catch(Hu){i=new e(t,n,JSON.stringify(a?va({type:a},r):r))}return i}const Is=(()=>{const e=As();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(Hu){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Ds(e,t){return e.getTime()/1e3-t}class _s{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Sa.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Sa.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(Ss(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Ts(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:r}}}=this;if(!n&&!r)return;const{samples:a}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const i=As();if(i)for(let s=0;s<a.length;s++){const e=a[s].type;if(e===Rs&&!n||!r)continue;const t=di(a[s].data);if(t){const n=a[s].pts;let r=n+a[s].duration;r>Is&&(r=Is);r-n<=0&&(r=n+.25);for(let a=0;a<t.length;a++){const s=t[a];if(!ci(s)){this.updateId3CueEnds(n,e);const t=Cs(i,n,r,s,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let a=r.length;a--;){const n=r[a];n.type===t&&n.startTime<e&&n.endTime===Is&&(n.endTime=e)}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,type:a}=t;const{id3Track:i,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=s;if(i&&(o||l)){let e;e="audio"===a?e=>e.type===xs&&l:"video"===a?e=>e.type===Rs&&o:e=>e.type===xs&&l||e.type===Rs&&o,ks(i,n,r,e)}}onLevelUpdated(e,t){let{details:n}=t;if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:a}=this,{dateRanges:i}=n,s=Object.keys(i);if(a){const e=Object.keys(r).filter((e=>!s.includes(e)));for(let t=e.length;t--;){const n=e[t];Object.keys(r[n].cues).forEach((e=>{a.removeCue(r[n].cues[e])})),delete r[n]}}const o=n.fragments[n.fragments.length-1];if(0===s.length||!Ea(null==o?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=o.programDateTime/1e3-o.start,c=As();for(let h=0;h<s.length;h++){const e=s[h],t=i[e],n=r[e],a=(null==n?void 0:n.cues)||{};let o=(null==n?void 0:n.durationKnown)||!1;const f=Ds(t.startDate,l);let p=Is;const m=t.endDate;if(m)p=Ds(m,l),o=!0;else if(t.endOnNext&&!o){const e=s.reduce(((e,n)=>{const r=i[n];return r.class===t.class&&r.id!==n&&r.startDate>t.startDate&&e.push(r),e}),[]).sort(((e,t)=>e.startDate.getTime()-t.startDate.getTime()))[0];e&&(p=Ds(e.startDate,l),o=!0)}const g=Object.keys(t.attr);for(let r=0;r<g.length;r++){const i=g[r];if("ID"===(d=i)||"CLASS"===d||"START-DATE"===d||"DURATION"===d||"END-DATE"===d||"END-ON-NEXT"===d)continue;const s=a[i];if(s)o&&!n.durationKnown&&(s.endTime=p);else if(c){let n=t.attr[i];Oa(i)&&(u=n,n=Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const r=Cs(c,f,p,{key:i,data:n},Ls);r&&(r.id=e,this.id3Track.addCue(r),a[i]=r)}}r[e]={cues:a,dateRange:t,durationKnown:o}}var u,d}}class Ps{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(null===e)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:a,liveSyncDurationCount:i,lowLatencyMode:s}=this.config,o=this.hls.userConfig;let l=s&&n||t;(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==a?a:i*r);const c=r;return l+Math.min(1*this.stallCount,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;const r=n.edge,a=e-t-this.edgeStalled,i=r-n.totalduration,s=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(i,a),s)}get drift(){const{levelDetails:e}=this;return null===e?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Sa.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Sa.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Sa.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(Sa.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,t){let{details:n}=t;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===xa.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(n=this.levelDetails)&&n.live&&Ia.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:a}=this.config;if(!r||1===a)return;const i=this.targetLatency;if(null===i)return;const s=n-i,o=s<Math.min(this.maxLatency,i+t.targetduration);if(t.live&&o&&s>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,a)),n=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(t,Math.max(1,n))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}const Os=["NONE","TYPE-0","TYPE-1",null];var Ms="",Fs="YES",Ns="v2";class Bs{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Us{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>e)).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const t=e%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var e;return null==(e=this.audioGroupIds)?void 0:e[this.urlId]}get textGroupId(){var e;return null==(e=this.textGroupIds)?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function js(e,t){const n=t.startPTS;if(Ea(n)){let r,a=0;t.sn>e.sn?(a=n-e.start,r=e):(a=e.start-n,r=t),r.duration!==a&&(r.duration=a)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function Hs(e,t,n,r,a,i){r-n<=0&&(Ia.warn("Fragment should have a positive duration",t),r=n+t.duration,i=a+t.duration);let s=n,o=r;const l=t.startPTS,c=t.endPTS;if(Ea(l)){const e=Math.abs(l-n);Ea(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,s=Math.max(n,l),n=Math.min(n,l),a=Math.min(a,t.startDTS),o=Math.min(r,c),r=Math.max(r,c),i=Math.max(i,t.endDTS)}const u=n-t.start;0!==t.start&&(t.start=n),t.duration=r-t.start,t.startPTS=n,t.maxStartPTS=s,t.startDTS=a,t.endPTS=r,t.minEndPTS=o,t.endDTS=i;const d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;let h;const f=d-e.startSN,p=e.fragments;for(p[f]=t,h=f;h>0;h--)js(p[h],p[h-1]);for(h=f;h<p.length-1;h++)js(p[h],p[h+1]);return e.fragmentHint&&js(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,u}function zs(e,t){let n=null;const r=e.fragments;for(let l=r.length-1;l>=0;l--){const e=r[l].initSegment;if(e){n=e;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;let a,i=0;if(function(e,t,n){const r=t.skippedSegments,a=Math.max(e.startSN,t.startSN)-t.startSN,i=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=a;c<=i;c++){const e=l[s+c];let a=o[c];r&&!a&&c<r&&(a=t.fragments[c]=e),e&&a&&n(e,a)}}(e,t,((e,r)=>{e.relurl&&(i=e.cc-r.cc),Ea(e.startPTS)&&Ea(e.endPTS)&&(r.start=r.startPTS=e.startPTS,r.startDTS=e.startDTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.duration=e.endPTS-e.startPTS,r.duration&&(a=r),t.PTSKnown=t.alignedSliding=!0),r.elementaryStreams=e.elementaryStreams,r.loader=e.loader,r.stats=e.stats,r.urlId=e.urlId,e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)})),n){(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((e=>{var t;e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}))}if(t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((e=>!e)),t.deltaUpdateFailed){Ia.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const r=ba({},e);n&&n.forEach((e=>{delete r[e]}));return Object.keys(t).forEach((e=>{const n=new Ma(t[e].attr,r[e]);n.isValid?r[e]=n:Ia.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'.concat(JSON.stringify(t[e].attr),'"'))})),r}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));const s=t.fragments;if(i){Ia.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<s.length;e++)s[e].cc+=i}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,n){if(e&&t){let r=0;for(let a=0,i=e.length;a<=i;a++){const i=e[a],s=t[a+r];i&&s&&i.index===s.index&&i.fragment.sn===s.fragment.sn?n(i,s):r--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),a?Hs(t,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):Gs(e,t),s.length&&(t.totalduration=t.edge-s[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const o=t.advancedDateTime;if(t.advanced&&o){const e=t.edge;t.driftStart||(t.driftStartTime=o,t.driftStart=e),t.driftEndTime=o,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function Gs(e,t){const n=t.startSN+t.skippedSegments-e.startSN,r=e.fragments;n<0||n>=r.length||Vs(t,r[n].start)}function Vs(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function Ks(e,t,n){var r;return null!=e&&e.details?Ws(null==(r=e.details)?void 0:r.partList,t,n):null}function Ws(e,t,n){if(e)for(let r=e.length;r--;){const a=e[r];if(a.index===n&&a.fragment.sn===t)return a}return null}function Ys(e){switch(e.details){case xa.FRAG_LOAD_TIMEOUT:case xa.KEY_LOAD_TIMEOUT:case xa.LEVEL_LOAD_TIMEOUT:case xa.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function qs(e,t){const n=Ys(t);return e.default["".concat(n?"timeout":"error","Retry")]}function $s(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function Xs(e){return va(va({},e),{errorRetry:null,timeoutRetry:null})}function Zs(e,t,n,r){return!!e&&t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(r)||!!n)}const Qs={search:function(e,t){let n=0,r=e.length-1,a=null,i=null;for(;n<=r;){a=(n+r)/2|0,i=e[a];const s=t(i);if(s>0)n=a+1;else{if(!(s<0))return i;r=a-1}}return null}};function Js(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=null;if(e?a=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(a=t[0]),a&&0===eo(n,r,a))return a;const i=Qs.search(t,eo.bind(null,n,r));return!i||i===e&&a?a:i}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function to(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}var no=0,ro=2,ao=5,io=0,so=1,oo=2;function lo(e,t,n){if(performance.now()-e.lastErrorPerfMs>3e5)return!0;const r=e.details;if(t.details===xa.FRAG_GAP&&r&&t.frag){const e=t.frag.start,n=Js(null,r.fragments,e);if(n&&!n.gap)return!0}if(n&&e.errors.length<n.errors.length){const n=e.errors[e.errors.length-1];if(r&&n.frag&&t.frag&&Math.abs(n.frag.start-t.frag.start)>3*r.targetduration)return!0}return!1}class co{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Ia.log.bind(Ia,"".concat(t,":")),this.warn=Ia.warn.bind(Ia,"".concat(t,":")),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t){const n=null==t?void 0:t.renditionReports;if(n){let a=-1;for(let i=0;i<n.length;i++){const s=n[i];let o;try{o=new self.URL(s.URI,t.url).href}catch(r){Ia.warn("Could not construct new URL for Rendition Report: ".concat(r)),o=s.URI||""}if(o===e){a=i;break}o===e.substring(0,o.length)&&(a=i)}if(-1!==a){const e=n[a],r=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let i=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);i>=0&&e>t.partTarget&&(i+=1)}return new Bs(r,i>=0?i:void 0,Ms)}}}loadPlaylist(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:r,stats:a}=t,i=self.performance.now(),s=a.loading.first?Math.max(0,i-a.loading.first):0;if(r.advancedDateTime=Date.now()-s,r.live||null!=n&&n.live){if(r.reloaded(n),n&&this.log("live playlist ".concat(e," ").concat(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED")),n&&r.fragments.length>0&&zs(n,r),!this.canLoad||!r.live)return;let s,o,l;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,a=r.lastPartSn,i=r.endSN,c=r.lastPartIndex,u=a===i;-1!==c?(o=u?i+1:a,l=u?e?0:c:c+1):o=i+1;const d=r.age,h=d+r.ageHeader;let f=Math.min(h-r.partTarget,1.5*r.targetduration);if(f>0){if(n&&f>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: ".concat(n.tuneInGoal," to: ").concat(f," with playlist age: ").concat(r.age)),f=0;else{const e=Math.floor(f/r.targetduration);if(o+=e,void 0!==l){l+=Math.round(f%r.targetduration/r.partTarget)}this.log("CDN Tune-in age: ".concat(r.ageHeader,"s last advanced ").concat(d.toFixed(2),"s goal: ").concat(f," skip sn ").concat(e," to part ").concat(l))}r.tuneInGoal=f}if(s=this.getDeliveryDirectives(r,t.deliveryDirectives,o,l),e||!u)return void this.loadPlaylist(s)}else(r.canBlockReload||r.canSkipUntil)&&(s=this.getDeliveryDirectives(r,t.deliveryDirectives,o,l));const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=1e3*e.targetduration;if(e.updated){const r=e.fragments,a=4;if(r.length&&n*a>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}(r,1e3*(r.edge-u));r.updated&&i>this.requestScheduled+d&&(this.requestScheduled=a.loading.start),void 0!==o&&r.canBlockReload?this.requestScheduled=a.loading.first+d-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+d<i?this.requestScheduled=i:this.requestScheduled-i<=0&&(this.requestScheduled+=d);let h=this.requestScheduled-i;h=Math.max(0,h),this.log("reload live playlist ".concat(e," in ").concat(Math.round(h)," ms")),this.timer=self.setTimeout((()=>this.loadPlaylist(s)),h)}else this.clearTimer()}getDeliveryDirectives(e,t,n,r){let a=function(e,t){const{canSkipUntil:n,canSkipDateRanges:r,endSN:a}=e;return n&&(void 0!==t?t-a:0)<n?r?Ns:Fs:Ms}(e,n);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,a=Ms),new Bs(n,r,a)}checkRetry(e){const t=e.details,n=Ys(e),r=e.errorAction,{action:a,retryCount:i=0,retryConfig:s}=r||{},o=!!r&&!!s&&(a===ao||!r.resolved&&a===ro);if(o){var l;if(this.requestScheduled=-1,i>=s.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn("Retrying playlist loading ".concat(i+1,"/").concat(s.maxNumRetry,' after "').concat(t,'" without delivery-directives')),this.loadPlaylist();else{const e=$s(s,i);this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn("Retrying playlist loading ".concat(i+1,"/").concat(s.maxNumRetry,' after "').concat(t,'" in ').concat(e,"ms"))}e.levelRetry=!0,r.resolved=!0}return o}}let uo;class ho extends co{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Sa.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Sa.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Sa.FRAG_LOADED,this.onFragLoaded,this),e.on(Sa.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Sa.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Sa.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Sa.FRAG_LOADED,this.onFragLoaded,this),e.off(Sa.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=[],r={};let a;t.levels.forEach((e=>{var t;const i=e.attrs;-1!==(null==(t=e.audioCodec)?void 0:t.indexOf("mp4a.40.34"))&&(uo||(uo=/chrome|firefox/i.test(navigator.userAgent)),uo&&(e.audioCodec=void 0));const{AUDIO:s,CODECS:o,"FRAME-RATE":l,"PATHWAY-ID":c,RESOLUTION:u,SUBTITLES:d}=i,h="".concat(c||".","-"),f="".concat(h).concat(e.bitrate,"-").concat(u,"-").concat(l,"-").concat(o);a=r[f],a?a.addFallback(e):(a=new Us(e),r[f]=a,n.push(a)),fo(a,"audio",s),fo(a,"text",d)})),this.filterAndSortMediaOptions(n,t)}filterAndSortMediaOptions(e,t){let n=[],r=[],a=!1,i=!1,s=!1,o=e.filter((e=>{let{audioCodec:t,videoCodec:n,width:r,height:o,unknownCodecs:l}=e;return a||(a=!(!r||!o)),i||(i=!!n),s||(s=!!t),!(null!=l&&l.length)&&(!t||Zi(t,"audio"))&&(!n||Zi(n,"video"))}));if((a||i)&&s&&(o=o.filter((e=>{let{videoCodec:t,width:n,height:r}=e;return!!t||!(!n||!r)}))),0===o.length)return void Promise.resolve().then((()=>{if(this.hls){const e=new Error("no level with compatible codecs found in manifest");this.hls.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:e,reason:e.message})}}));t.audioTracks&&(n=t.audioTracks.filter((e=>!e.audioCodec||Zi(e.audioCodec,"audio"))),po(n)),t.subtitles&&(r=t.subtitles,po(r));const l=o.slice(0);o.sort(((e,t)=>e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs["FRAME-RATE"]!==t.attrs["FRAME-RATE"]?e.attrs.decimalFloatingPoint("FRAME-RATE")-t.attrs.decimalFloatingPoint("FRAME-RATE"):e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):a&&e.height!==t.height?e.height-t.height:0));let c=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let h=0;h<l.length;h++)if(l[h].pathwayId===o[0].pathwayId){c=l[h];break}this._levels=o;for(let h=0;h<o.length;h++)if(o[h]===c){this._firstLevel=h,this.log("manifest loaded, ".concat(o.length," level(s) found, first bitrate: ").concat(c.bitrate));break}const u=s&&!i,d={levels:o,audioTracks:n,subtitleTracks:r,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:i,altAudio:!u&&n.some((e=>!!e.url))};this.hls.trigger(Sa.MANIFEST_PARSED,d),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(Sa.ERROR,{type:ka.OTHER_ERROR,details:xa.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,a=r?r.attrs["PATHWAY-ID"]:void 0,i=t[e],s=i.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=i,n===e&&i.details&&r&&a===s)return;this.log("Switching to level ".concat(e).concat(s?" with Pathway "+s:""," from level ").concat(n).concat(a?" with Pathway "+a:""));const o=ba({},i,{level:e,maxBitrate:i.maxBitrate,attrs:i.attrs,uri:i.uri,urlId:i.urlId});delete o._attrs,delete o._urlId,this.hls.trigger(Sa.LEVEL_SWITCHING,o);const l=i.details;if(!l||l.live){const e=this.switchParams(i.uri,null==r?void 0:r.details);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){!t.fatal&&t.context&&t.context.type===hs&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(e,t){let{frag:n}=t;if(void 0!==n&&n.type===ms){const e=this._levels[n.level];void 0!==e&&(e.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:a}=t,i=this._levels[r];var s;if(!i)return this.warn("Invalid level index ".concat(r)),void(null!=(s=t.deliveryDirectives)&&s.skip&&(a.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===i.fragmentError&&(i.loadError=0),this.playlistLoaded(r,t,i.details)):null!=(n=t.deliveryDirectives)&&n.skip&&(a.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,t){const n=this.currentLevel;if(!n)return;const r=this.hls.audioTracks[t.id].groupId;if(n.audioGroupIds&&n.audioGroupId!==r){let e=-1;for(let t=0;t<n.audioGroupIds.length;t++)if(n.audioGroupIds[t]===r){e=t;break}-1!==e&&e!==n.urlId&&(n.urlId=e,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){const a=n.urlId;let i=n.uri;if(e)try{i=e.addDirectives(i)}catch(r){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(r))}const s=n.attrs["PATHWAY-ID"];this.log("Loading level index ".concat(t).concat(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:""," with").concat(s?" Pathway "+s:""," URI ").concat(a+1,"/").concat(n.url.length," ").concat(i)),this.clearTimer(),this.hls.trigger(Sa.LEVEL_LOADING,{url:i,level:t,id:a,deliveryDirectives:e||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e,t){const n=(e,n)=>n!==t,r=this._levels.filter(((r,a)=>a!==e||(r.url.length>1&&void 0!==t?(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0,!0):(this.steering&&this.steering.removeLevel(r),!1))));this.hls.trigger(Sa.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,t){let{levels:n}=t;n.forEach(((e,t)=>{const{details:n}=e;null!=n&&n.fragments&&n.fragments.forEach((e=>{e.level=t}))})),this._levels=n}}function fo(e,t,n){n&&("audio"===t?(e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds[e.url.length-1]=n):"text"===t&&(e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds[e.url.length-1]=n))}function po(e){const t={};e.forEach((e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}var mo="NOT_LOADED",go="APPENDING",vo="PARTIAL",yo="OK";class bo{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Sa.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Sa.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Sa.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(Sa.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Sa.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Sa.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const t=n[r];if(!t)break;const a=t.end;if(t.start<=e&&null!==a&&e<=a)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,r=Object.keys(n);for(let a=r.length;a--;){const i=n[r[a]];if((null==i?void 0:i.body.type)===t&&i.buffered){const t=i.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r){this.timeRanges&&(this.timeRanges[e]=t);const a=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach((r=>{const i=this.fragments[r];if(!i)return;if(a>=i.body.sn)return;if(!i.buffered&&!i.loaded)return void(i.body.type===n&&this.removeFragment(i.body));const s=i.range[e];s&&s.time.some((e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(i.body),n}))}))}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:r}=e;if(!t||"initSegment"===n.sn)return;const a=To(n),i=this.fragments[a];if(!i||i.buffered&&n.gap)return;const s=!n.relurl;if(Object.keys(t).forEach((e=>{const a=n.elementaryStreams[e];if(!a)return;const o=t[e],l=s||!0===a.partial;i.range[e]=this.getBufferedTimes(n,r,l,o)})),i.loaded=null,Object.keys(i.range).length){i.buffered=!0;(i.body.endList=n.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),Eo(i)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(i.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const n=To(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const a={time:[],partial:n},i=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||i;for(let c=0;c<r.length;c++){const e=r.start(c)-this.bufferPadding,t=r.end(c)+this.bufferPadding;if(l>=e&&o<=t){a.time.push({startPTS:Math.max(i,r.start(c)),endPTS:Math.min(s,r.end(c))});break}if(i<t&&s>e)a.partial=!0,a.time.push({startPTS:Math.max(i,r.start(c)),endPTS:Math.min(s,r.end(c))});else if(s<=e)break}return a}getPartialFragment(e){let t,n,r,a=null,i=0;const{bufferPadding:s,fragments:o}=this;return Object.keys(o).forEach((l=>{const c=o[l];c&&Eo(c)&&(n=c.body.start-s,r=c.body.end+s,e>=n&&e<=r&&(t=Math.min(e-n,r-e),i<=t&&(a=c.body,i=t)))})),a}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||Eo(t))}getState(e){const t=To(e),n=this.fragments[t];return n?n.buffered?Eo(n)?vo:yo:go:mo}isTimeBuffered(e,t,n){let r,a;for(let i=0;i<n.length;i++){if(r=n.start(i)-this.bufferPadding,a=n.end(i)+this.bufferPadding,e>=r&&t<=a)return!0;if(t<=r)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:r}=t;if("initSegment"===n.sn||n.bitrateTest)return;const a=r?null:t,i=To(n);this.fragments[i]={body:n,appendedPTS:null,loaded:a,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:a}=t;if("initSegment"===n.sn)return;const i=n.type;if(r){let e=this.activePartLists[i];e||(this.activePartLists[i]=e=[]),e.push(r)}this.timeRanges=a,Object.keys(a).forEach((e=>{const t=a[e];this.detectEvictedFragments(e,t,i,r)}))}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=To(e);return!!this.fragments[t]}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,a){r&&!this.hasGaps||Object.keys(this.fragments).forEach((i=>{const s=this.fragments[i];if(!s)return;const o=s.body;o.type!==n||r&&!o.gap||o.start<t&&o.end>e&&(s.buffered||a)&&this.removeFragment(o)}))}removeFragment(e){const t=To(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=n.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Eo(e){var t,n,r;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(n=e.range.audio)?void 0:n.partial)||(null==(r=e.range.audiovideo)?void 0:r.partial))}function To(e){return"".concat(e.type,"_").concat(e.level,"_").concat(e.urlId,"_").concat(e.sn)}const wo=Math.pow(2,17);class So{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Lo({type:ka.NETWORK_ERROR,details:xa.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a ".concat(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,a=r.fLoader,i=r.loader;return new Promise(((s,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void o(xo(e));e.gap=!1}const l=this.loader=e.loader=a?new a(r):new i(r),c=ko(e),u=Xs(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:wo};e.stats=l.stats,l.load(c,d,{onSuccess:(t,n,r,a)=>{this.resetLoader(e,l);let i=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(i.slice(0,16)),i=i.slice(16)),s({frag:e,part:null,payload:i,networkDetails:a})},onError:(t,r,a,i)=>{this.resetLoader(e,l),o(new Lo({type:ka.NETWORK_ERROR,details:xa.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:va({url:n,data:void 0},t),error:new Error("HTTP Error ".concat(t.code," ").concat(t.text)),networkDetails:a,stats:i}))},onAbort:(t,n,r)=>{this.resetLoader(e,l),o(new Lo({type:ka.NETWORK_ERROR,details:xa.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,l),o(new Lo({type:ka.NETWORK_ERROR,details:xa.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after ".concat(d.timeout,"ms")),networkDetails:r,stats:t}))},onProgress:(n,r,a,i)=>{t&&t({frag:e,part:null,payload:a,networkDetails:i})}})}))}loadPart(e,t,n){this.abort();const r=this.config,a=r.fLoader,i=r.loader;return new Promise(((s,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(xo(e,t));const l=this.loader=e.loader=a?new a(r):new i(r),c=ko(e,t),u=Xs(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:wo};t.stats=l.stats,l.load(c,d,{onSuccess:(r,a,i,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:r.data,networkDetails:o};n(c),s(c)},onError:(n,r,a,i)=>{this.resetLoader(e,l),o(new Lo({type:ka.NETWORK_ERROR,details:xa.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:va({url:c.url,data:void 0},n),error:new Error("HTTP Error ".concat(n.code," ").concat(n.text)),networkDetails:a,stats:i}))},onAbort:(n,r,a)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new Lo({type:ka.NETWORK_ERROR,details:xa.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:a,stats:n}))},onTimeout:(n,r,a)=>{this.resetLoader(e,l),o(new Lo({type:ka.NETWORK_ERROR,details:xa.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after ".concat(d.timeout,"ms")),networkDetails:a,stats:n}))}})}))}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,a=r.total;if(n.loaded+=r.loaded,a){const r=Math.round(e.duration/t.duration),i=Math.min(Math.round(n.loaded/a),r),s=(r-i)*Math.round(n.loaded/i);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);const i=n.loading,s=r.loading;i.start?i.first+=s.first-s.start:(i.start=s.start,i.first=s.first),i.end=s.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function ko(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,i=n.byteRangeEndOffset;if(Ea(a)&&Ea(i)){var s;let t=a,n=i;if("initSegment"===e.sn&&"AES-128"===(null==(s=e.decryptdata)?void 0:s.method)){const e=i-a;e%16&&(n=i+(16-e%16)),0!==a&&(r.resetIV=!0,t=a-16)}r.rangeStart=t,r.rangeEnd=n}return r}function xo(e,t){const n=new Error("GAP ".concat(e.gap?"tag":"attribute"," found")),r={type:ka.MEDIA_ERROR,details:xa.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new Lo(r)}class Lo extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Ro{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const t in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[t].loader;if(n){if(e&&e!==n.context.frag.type)return;n.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xa.KEY_LOAD_ERROR,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return new Lo({type:ka.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:a,error:n,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:r}=e;for(let e=0;e<t.length;e++){const a=t[e];if(r<=a.cc&&("initSegment"===n||"initSegment"===a.sn||n<a.sn)){this.emeController.selectKeySystemFormat(a).then((e=>{a.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const a=e.decryptdata;if(!a){const n=new Error(t?"Expected frag.decryptdata to be defined after setting format ".concat(t):"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,xa.KEY_LOAD_ERROR,n))}const i=a.uri;if(!i)return Promise.reject(this.createKeyLoadError(e,xa.KEY_LOAD_ERROR,new Error('Invalid key URI: "'.concat(i,'"'))));let s=this.keyUriToKeyInfo[i];if(null!=(n=s)&&n.decryptdata.key)return a.key=s.decryptdata.key,Promise.resolve({frag:e,keyInfo:s});var o;if(null!=(r=s)&&r.keyLoadPromise)switch(null==(o=s.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return s.keyLoadPromise.then((t=>(a.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:s})))}switch(s=this.keyUriToKeyInfo[i]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===a.keyFormat?this.loadKeyHTTP(s,e):this.loadKeyEME(s,e);case"AES-128":return this.loadKeyHTTP(s,e);default:return Promise.reject(this.createKeyLoadError(e,xa.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'.concat(a.method,'"'))))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(n);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,n)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise(((a,i)=>{const s={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=n.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{const{frag:s,keyInfo:o,url:l}=n;if(!s.decryptdata||o!==this.keyUriToKeyInfo[l])return i(this.createKeyLoadError(s,xa.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));o.decryptdata.key=s.decryptdata.key=new Uint8Array(e.data),s.keyLoader=null,o.loader=null,a({frag:s,keyInfo:o})},onError:(e,n,r,a)=>{this.resetLoader(n),i(this.createKeyLoadError(t,xa.KEY_LOAD_ERROR,new Error("HTTP Error ".concat(e.code," loading key ").concat(e.text)),r,va({url:s.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),i(this.createKeyLoadError(t,xa.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),i(this.createKeyLoadError(t,xa.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(s,l,c)}))}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,a=n.loader;t.keyLoader===a&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[r],a&&a.destroy()}}class Ao{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const Co={length:0,start:()=>0,end:()=>0};class Io{static isBuffered(e,t){try{if(e){const n=Io.getBuffered(e);for(let e=0;e<n.length;e++)if(t>=n.start(e)&&t<=n.end(e))return!0}}catch(n){}return!1}static bufferInfo(e,t,n){try{if(e){const r=Io.getBuffered(e),a=[];let i;for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,t,n)}}catch(r){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort((function(e,t){const n=e.start-t.start;return n||t.end-e.end}));let r=[];if(n)for(let l=0;l<e.length;l++){const t=r.length;if(t){const a=r[t-1].end;e[l].start-a<n?e[l].end>a&&(r[t-1].end=e[l].end):r.push(e[l])}else r.push(e[l])}else r=e;let a,i=0,s=t,o=t;for(let l=0;l<r.length;l++){const e=r[l].start,c=r[l].end;if(t+n>=e&&t<c)s=e,o=c,i=o-t;else if(t+n<e){a=e;break}}return{len:i,start:s||0,end:o||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(Hu){return Ia.log("failed to get media.buffered",Hu),Co}}}class Do{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=a,this.partial=i}}function _o(e,t){let n=null;for(let r=0,a=e.length;r<a;r++){const a=e[r];if(a&&a.cc===t){n=a;break}}return n}function Po(e,t){if(e){const n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function Oo(e,t){const n=t.fragments;for(let r=0,a=n.length;r<a;r++)Po(n[r],e);t.fragmentHint&&Po(t.fragmentHint,e),t.alignedSliding=!0}function Mo(e,t,n){t&&(!function(e,t,n){if(function(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}(e,n,t)){const e=function(e,t){const n=e.fragments,r=t.fragments;if(!r.length||!n.length)return void Ia.log("No fragments to align");const a=_o(n,r[0].cc);if(a&&(!a||a.startPTS))return a;Ia.log("No frag in previous level to align on")}(n.details,t);e&&Ea(e.start)&&(Ia.log("Adjusting PTS using last level due to CC increase within current level ".concat(t.url)),Oo(e.start,t))}}(e,n,t),!n.alignedSliding&&t.details&&function(e,t){if(!t.fragments.length||!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=t.fragments[0].programDateTime,r=e.fragments[0].programDateTime,a=(r-n)/1e3+t.fragments[0].start;a&&Ea(a)&&(Ia.log("Adjusting PTS using programDateTime delta ".concat(r-n,"ms, sliding:").concat(a.toFixed(3)," ").concat(e.url," ")),Oo(a,e))}(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||Gs(t.details,n))}function Fo(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;const a=r[Math.round(r.length/2)-1],i=_o(n,a.cc)||n[Math.round(n.length/2)-1],s=a.programDateTime,o=i.programDateTime;if(null===s||null===o)return;Oo((o-s)/1e3-(i.start-a.start),e)}class No{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class Bo{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class Uo{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],a=n[1],i=n[2],s=n[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=new Uint32Array(256);let f=0,p=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){let n=p^p<<1^p<<2^p<<3^p<<4;n=n>>>8^255&n^99,e[f]=n,t[n]=f;const o=h[f],m=h[o],g=h[m];let v=257*h[n]^16843008*n;r[f]=v<<24|v>>>8,a[f]=v<<16|v>>>16,i[f]=v<<8|v>>>24,s[f]=v,v=16843009*g^65537*m^257*o^16843008*f,l[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,d[n]=v,f?(f=o^h[h[h[g^o]]],p^=h[h[p]]):f=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);const i=this.ksRows=4*(a+6+1);let s,o;const l=this.keySchedule=new Uint32Array(i),c=this.invKeySchedule=new Uint32Array(i),u=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],m=h[2],g=h[3];let v,y;for(s=0;s<i;s++)s<a?v=l[s]=t[s]:(y=v,s%a===0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=d[s/a|0]<<24):a>6&&s%a===4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[s]=v=(l[s-a]^y)>>>0);for(o=0;o<i;o++)s=i-o,y=3&o?l[s]:l[s-4],c[o]=o<4||s<=4?y:f[u[y>>>24]]^p[u[y>>>16&255]]^m[u[y>>>8&255]]^g[u[255&y]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,a=this.invKeySchedule,i=this.invSBox,s=this.invSubMix,o=s[0],l=s[1],c=s[2],u=s[3],d=this.uint8ArrayToUint32Array_(n);let h=d[0],f=d[1],p=d[2],m=d[3];const g=new Int32Array(e),v=new Int32Array(g.length);let y,b,E,T,w,S,k,x,L,R,A,C,I,D;const _=this.networkToHostOrderSwap;for(;t<g.length;){for(L=_(g[t]),R=_(g[t+1]),A=_(g[t+2]),C=_(g[t+3]),w=L^a[0],S=C^a[1],k=A^a[2],x=R^a[3],I=4,D=1;D<r;D++)y=o[w>>>24]^l[S>>16&255]^c[k>>8&255]^u[255&x]^a[I],b=o[S>>>24]^l[k>>16&255]^c[x>>8&255]^u[255&w]^a[I+1],E=o[k>>>24]^l[x>>16&255]^c[w>>8&255]^u[255&S]^a[I+2],T=o[x>>>24]^l[w>>16&255]^c[S>>8&255]^u[255&k]^a[I+3],w=y,S=b,k=E,x=T,I+=4;y=i[w>>>24]<<24^i[S>>16&255]<<16^i[k>>8&255]<<8^i[255&x]^a[I],b=i[S>>>24]<<24^i[k>>16&255]<<16^i[x>>8&255]<<8^i[255&w]^a[I+1],E=i[k>>>24]<<24^i[x>>16&255]<<16^i[w>>8&255]<<8^i[255&S]^a[I+2],T=i[x>>>24]<<24^i[w>>16&255]<<16^i[S>>8&255]<<8^i[255&k]^a[I+3],v[t]=_(y^h),v[t+1]=_(T^f),v[t+2]=_(E^p),v[t+3]=_(b^m),h=L,f=R,p=A,m=C,t+=4}return v.buffer}}class jo{constructor(e){let{removePKCS7Padding:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(Hu){}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?ri(e,0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise(((r,a)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const i=this.flush();i?r(i.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:r,currentResult:a,remainderData:i}=this;this.logOnce("JS AES decrypt"),i&&(e=Oi(i,e),this.remainderData=null);const s=this.getValidChunk(e);if(!s.length)return null;r&&(n=r);let o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new Uo),o.expandKey(t);const l=a;return this.currentResult=o.decrypt(s.buffer,0,n),this.currentIV=ri(s,-16).buffer,l||null}webCryptoDecrypt(e,t,n){const r=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new Bo(r,t)),this.fastAesKey.expandKey().then((t=>{if(!r)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new No(r,new Uint8Array(n)).decrypt(e.buffer,t)})).catch((r=>(Ia.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, ".concat(r.name,": ").concat(r.message)),this.onWebCryptoError(e,t,n))))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=ri(e,0,n),this.remainderData=ri(e,n)),t}logOnce(e){this.logEnabled&&(Ia.log("[decrypter]: ".concat(e)),this.logEnabled=!1)}}const Ho=function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+="[".concat(e.start(r).toFixed(3),"-").concat(e.end(r).toFixed(3),"]");return t},zo="STOPPED",Go="IDLE",Vo="KEY_LOADING",Ko="FRAG_LOADING",Wo="FRAG_LOADING_WAITING_RETRY",Yo="WAITING_TRACK",qo="PARSING",$o="PARSED",Xo="ENDED",Zo="ERROR",Qo="WAITING_INIT_PTS",Jo="WAITING_LEVEL";class el extends Ao{constructor(e,t,n,r,a){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=zo,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=a,this.logPrefix=r,this.log=Ia.log.bind(Ia,"".concat(r,":")),this.warn=Ia.warn.bind(Ia,"".concat(r,":")),this.hls=e,this.fragmentLoader=new So(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new jo(e.config),e.on(Sa.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=zo}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(null!=n&&n.length){const e=n[n.length-1];return Io.isBuffered(this.media,e.start+e.duration/2)}const r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levels[this.levelLastLoaded])?void 0:e.details}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&this.state===zo&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:a}=this,i=n?n.currentTime:0,s=Io.bufferInfo(r||n,i,e.maxBufferHole);if(this.log("media seeking to ".concat(Ea(i)?i.toFixed(3):i,", state: ").concat(a)),this.state===Xo)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,a=t.start+t.duration+n;if(!s.len||a<s.start||r>s.end){const e=i>a;(i<r||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(i,1/0,this.playlistType,!0),this.lastCurrentTime=i),this.loadedmetadata||s.len||(this.nextLoadPosition=this.startPosition=i),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=zo,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,(t=>{if(this.fragContextChanged(e))return this.warn("Fragment ".concat(e.sn).concat(t.part?" p: "+t.part.index:""," of level ").concat(e.level," was dropped during download.")),void this.fragmentTracker.removeFragment(e);e.stats.chunkCount++,this._handleFragmentLoadProgress(t)})).then((t=>{if(!t)return;const n=this.state;this.fragContextChanged(e)?(n===Ko||!this.fragCurrent&&n===qo)&&(this.fragmentTracker.removeFragment(e),this.state=Go):("payload"in t&&(this.log("Loaded fragment ".concat(e.sn," of level ").concat(e.level)),this.hls.trigger(Sa.FRAG_LOADED,t)),this._handleFragmentLoadComplete(t))})).catch((t=>{this.state!==zo&&this.state!==Zo&&(this.warn(t),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===go){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),a=Math.max(e.duration,r?r.len:this.config.maxBufferLength);this.reduceMaxBufferLength(a)&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===vo&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null};this.hls.trigger(Sa.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((t=>{if(!t||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return t})).then((t=>{const{hls:n}=this,{payload:r}=t,a=e.decryptdata;if(r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){const i=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).catch((t=>{throw n.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((r=>{const a=self.performance.now();return n.trigger(Sa.FRAG_DECRYPTED,{frag:e,payload:r,stats:{tstart:i,tdecrypt:a}}),t.payload=r,t}))}return t})).then((n=>{const{fragCurrent:r,hls:a,levels:i}=this;if(!i)throw new Error("init load aborted, missing levels");const s=e.stats;this.state=Go,t.fragmentError=0,e.data=new Uint8Array(n.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),n.frag===r&&a.trigger(Sa.FRAG_BUFFERED,{stats:s,frag:r,part:null,id:e.type}),this.tick()})).catch((t=>{this.state!==zo&&this.state!==Zo&&(this.warn(t),this.resetFragmentLoading(e))}))}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId}fragBufferedComplete(e,t){var n,r,a,i;const s=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered ".concat(e.type," sn: ").concat(e.sn).concat(t?" part: "+t.index:""," of ").concat(this.playlistType===ms?"level":"track"," ").concat(e.level," (frag:[").concat((null!=(n=e.startPTS)?n:NaN).toFixed(3),"-").concat((null!=(r=e.endPTS)?r:NaN).toFixed(3),"] > buffer:").concat(s?Ho(Io.getBuffered(s)):"(detached)",")")),this.state=Go,s&&(!this.loadedmetadata&&e.type==ms&&s.buffered.length&&(null==(a=this.fragCurrent)?void 0:a.sn)===(null==(i=this.fragPrevious)?void 0:i.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:a}=e,i=!a||0===a.length||a.some((e=>!e)),s=new Do(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!i);t.flush(s)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;var a;const i=null==t?void 0:t.details;if(!this.levels||!i)throw new Error("frag load aborted, missing level".concat(i?"":" detail","s"));let s=null;if(!e.encrypted||null!=(a=e.decryptdata)&&a.key?!e.encrypted&&i.encryptedFragments.length&&this.keyLoader.loadClear(e,i.encryptedFragments):(this.log("Loading key for ".concat(e.sn," of [").concat(i.startSN,"-").concat(i.endSN,"], ").concat("[stream-controller]"===this.logPrefix?"level":"track"," ").concat(e.level)),this.state=Vo,this.fragCurrent=e,s=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(Sa.KEY_LOADED,e),this.state===Vo&&(this.state=Go),e})),this.hls.trigger(Sa.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(s=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){const a=i.partList;if(a&&r){n>e.end&&i.fragmentHint&&(e=i.fragmentHint);const o=this.getNextPart(a,e,n);if(o>-1){const l=a[o];let c;return this.log("Loading part sn: ".concat(e.sn," p: ").concat(l.index," cc: ").concat(e.cc," of playlist [").concat(i.startSN,"-").concat(i.endSN,"] parts [0-").concat(o,"-").concat(a.length-1,"] ").concat("[stream-controller]"===this.logPrefix?"level":"track",": ").concat(e.level,", target: ").concat(parseFloat(n.toFixed(3)))),this.nextLoadPosition=l.start+l.duration,this.state=Ko,c=s?s.then((n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,r))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,r).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Sa.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(a,n))return Promise.resolve(null)}}this.log("Loading fragment ".concat(e.sn," cc: ").concat(e.cc," ").concat(i?"of ["+i.startSN+"-"+i.endSN+"] ":"").concat("[stream-controller]"===this.logPrefix?"level":"track",": ").concat(e.level,", target: ").concat(parseFloat(n.toFixed(3)))),Ea(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ko;const o=this.config.progressive;let l;return l=o&&s?s.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,r))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,o?r:void 0),s]).then((e=>{let[t]=e;return!o&&t&&r&&r(t),t})).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(Sa.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,n,r){return new Promise(((a,i)=>{var s;const o=[],l=null==(s=n.details)?void 0:s.partList,c=t=>{this.fragmentLoader.loadPart(e,t,r).then((r=>{o[t.index]=r;const i=r.part;this.hls.trigger(Sa.FRAG_LOADED,r);const s=Ks(n,e.sn,t.index+1)||Ws(l,e.sn,t.index+1);if(!s)return a({frag:e,part:i,partsLoaded:o});c(s)})).catch(i)};c(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===xa.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(Sa.ERROR,t)}else this.hls.trigger(Sa.ERROR,{type:ka.OTHER_ERROR,details:xa.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==qo)return void(this.fragCurrent||this.state===zo||this.state===Zo||(this.state=Go));const{frag:n,part:r,level:a}=t,i=self.performance.now();n.stats.parsing.end=i,r&&(r.stats.parsing.end=i),this.updateLevelTiming(n,r,a,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:a,part:i}=e;if(null==t||!t[r])return this.warn("Levels object was unset while buffering fragment ".concat(a," of level ").concat(r,". The current chunk will not be buffered.")),null;const s=t[r],o=i>-1?Ks(s,a,i):null,l=o?o.fragment:function(e,t,n){if(null==e||!e.details)return null;const r=e.details;let a=r.fragments[t-r.startSN];return a||(a=r.fragmentHint,a&&a.sn===t?a:t<r.startSN&&n&&n.sn===t?n:null)}(s,a,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:o,level:s}):null}bufferFragmentData(e,t,n,r,a){var i;if(!e||this.state!==qo)return;const{data1:s,data2:o}=e;let l=s;if(s&&o&&(l=Oi(s,o)),null==(i=l)||!i.length)return;const c={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:l};if(this.hls.trigger(Sa.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(a)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Io.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=Io.bufferInfo(t,n,0),a=e.duration,i=Math.min(2*this.config.maxFragLookUpTolerance,.25*a),s=Math.max(Math.min(e.start-i,r.end-i),n+i);e.start-s>i&&this.flushMainBuffer(s,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return Ea(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:r}}=this,a=Io.bufferInfo(e,t,r);if(0===a.len&&void 0!==a.nextStart){const i=this.fragmentTracker.getBufferedFrag(t,n);if(i&&a.nextStart<i.end)return Io.bufferInfo(e,t,Math.max(a.nextStart,r))}return a}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to ".concat(t.maxMaxBufferLength,"s")),!0)}getAppendedFrag(e){const t=this.fragmentTracker.getAppendedFrag(e,ms);return t&&"fragment"in t?t.fragment:t}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:a}=this,i=n[0].start;let s;if(t.live){const i=a.initialLiveManifestSize;if(r<i)return this.warn("Not enough fragments to start playback (have: ".concat(r,", need: ").concat(i,")")),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(s=this.getInitialLiveFragment(t,n),this.startPosition=s?this.hls.liveSyncPosition||s.start:e)}else e<=i&&(s=n[0]);if(!s){const n=a.lowLatencyMode?t.partEnd:t.fragmentEnd;s=this.getFragmentAtPosition(e,n,t)}return this.mapToInitFragWhenRequired(s)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===yo||n===vo&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,a){const i=e.gap,s=this.getNextFragment(this.nextLoadPosition,t);if(null===s)return s;if(e=s,i&&e&&!e.gap&&n.nextStart){const t=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r);if(null!==t&&n.len+t.len>=a)return this.log('buffer full after gaps in "'.concat(r,'" playlist starting at sn: ').concat(e.sn)),null}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,a=!1,i=!0;for(let s=0,o=e.length;s<o;s++){const o=e[s];if(i=i&&!o.independent,r>-1&&n<o.start)break;const l=o.loaded;l?r=-1:(a||o.independent||i)&&o.fragment===t&&(r=s),a=l}return r}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: ".concat(n.programDateTime)),r=function(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Ea(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(let r=0;r<e.length;++r){const a=e[r];if(to(t,n,a))return a}return null}(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const a=n.sn+1;if(a>=e.startSN&&a<=e.endSN){const i=t[a-e.startSN];n.cc===i.cc&&(r=i,this.log("Live playlist, switching playlist, load frag with next SN: ".concat(r.sn)))}r||(r=function(e,t){return Qs.search(e,(e=>e.cc<t?1:e.cc>t?-1:0))}(t,n.cc),r&&this.log("Live playlist, switching playlist, load frag with same CC: ".concat(r.sn)))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:a}=this,{fragments:i,endSN:s}=n;const{fragmentHint:o}=n,l=r.maxFragLookUpTolerance,c=n.partList,u=!!(r.lowLatencyMode&&null!=c&&c.length&&o);let d;if(u&&o&&!this.bitrateTest&&(i=i.concat(o),s=o.sn),e<t){d=Js(a,i,e,e>t-l?0:l)}else d=i[i.length-1];if(d){const e=d.sn-n.startSN,t=this.fragmentTracker.getState(d);if((t===yo||t===vo&&d.gap)&&(a=d),a&&d.sn===a.sn&&(!u||c[0].fragment.sn>d.sn)){if(a&&d.level===a.level){const t=i[e+1];d=d.sn<s&&this.fragmentTracker.getState(t)!==yo?t:null}}}return d}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,a=n.currentTime,i=e.fragments[0].start,s=e.edge,o=a>=i-t.maxFragLookUpTolerance&&a<=s;if(null!==r&&n.duration>r&&(a<r||!o)){const i=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&n.readyState<4||a<s-i)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn("Playback: ".concat(a.toFixed(3)," is located too far from the end of live sliding playlist: ").concat(s,", reset currentTime to : ").concat(r.toFixed(3))),n.currentTime=r))}}alignPlaylists(e,t){const{levels:n,levelLastLoaded:r,fragPrevious:a}=this,i=null!==r?n[r]:null,s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const o=e.fragments[0].start,l=!t,c=e.alignedSliding&&Ea(o);if(l||!c&&!o){Mo(a,i,e);const n=e.fragments[0].start;return this.log("Live playlist sliding: ".concat(n.toFixed(2)," start-sn: ").concat(t?t.startSN:"na","->").concat(e.startSN," prev-sn: ").concat(a?a.sn:"na"," fragments: ").concat(s)),n}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){const r=null!==this.startTimeOffset,a=r?this.startTimeOffset:e.startTimeOffset;null!==a&&Ea(a)?(n=t+a,a<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset ".concat(a," found in ").concat(r?"multivariant":"media"," playlist, adjust startPosition to ").concat(n)),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment ".concat(e.sn).concat(t?" part "+t.index:""," of level ").concat(e.level," was aborted")),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Wo)||(this.state=Go)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;var r;if(this.fragContextChanged(n))return void this.warn("Frag load error must match current frag to retry ".concat(n.url," > ").concat(null==(r=this.fragCurrent)?void 0:r.url));const a=t.details===xa.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(n,!0);const i=t.errorAction,{action:s,retryCount:o=0,retryConfig:l}=i||{};if(i&&s===ao&&l){var c;this.resetStartWhenNotLoaded(null!=(c=this.levelLastLoaded)?c:n.level);const r=$s(l,o);this.warn("Fragment ".concat(n.sn," of ").concat(e," ").concat(n.level," errored with ").concat(t.details,", retrying loading ").concat(o+1,"/").concat(l.maxNumRetry," in ").concat(r,"ms")),i.resolved=!0,this.retryDate=self.performance.now()+r,this.state=Wo}else l&&i?(this.resetFragmentErrors(e),o<l.maxNumRetry?a||(i.resolved=!0):Ia.warn("".concat(t.details," reached or exceeded max retry (").concat(o,")"))):(null==i?void 0:i.action)===ro?this.state=Jo:this.state=Zo;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===qo||this.state===$o){const t=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,t),r=n&&n.len>.5;r&&this.reduceMaxBufferLength(n.len);const a=!r;return a&&this.warn("Buffer full error while media.currentTime is not buffered, flush ".concat(t," buffer")),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===gs&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==zo&&(this.state=Go)}afterBufferFlushed(e,t,n){if(!e)return;const r=Io.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===Xo&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Go}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[e].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){var t;this.warn("The loading context changed while buffering fragment ".concat(e.sn," of level ").concat(e.level,". This chunk will not be buffered.")),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:e.level),this.resetLoadingState()}removeUnbufferedFrags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){var a;const i=n.details;if(!i)return void this.warn("level.details undefined");if(Object.keys(e.elementaryStreams).reduce(((t,a)=>{const s=e.elementaryStreams[a];if(s){const o=s.endPTS-s.startPTS;if(o<=0)return this.warn("Could not parse fragment ".concat(e.sn," ").concat(a," duration reliably (").concat(o,")")),t||!1;const l=r?0:Hs(i,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return this.hls.trigger(Sa.LEVEL_PTS_UPDATED,{details:i,level:n,drift:l,type:a,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t}),!1))n.fragmentError=0;else if(null===(null==(a=this.transmuxer)?void 0:a.error)){const t=new Error("Found no media in fragment ".concat(e.sn," of level ").concat(e.level," resetting transmuxer to fallback to playlist timing"));if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(t.message),this.hls.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:"Found no media in msn ".concat(e.sn,' of level "').concat(n.url,'"')}),!this.hls)return;this.resetTransmuxer()}this.state=$o,this.hls.trigger(Sa.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){var t,n,r;"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(t=null!=(n=this.levelLastLoaded)?n:null==(r=this.fragCurrent)?void 0:r.level)?t:0),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log("".concat(t,"->").concat(e)))}get state(){return this._state}}function tl(){return self.SourceBuffer||self.WebKitSourceBuffer}function nl(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",id:-1,pid:-1,inputTimeScale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,sequenceNumber:-1,samples:[],dropped:0}}class rl{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Oi(this.cachedData,e),this.cachedData=null);let n,r=si(e,0),a=r?r.length:0;const i=this._audioTrack,s=this._id3Track,o=r?(e=>{const t=di(e);for(let n=0;n<t.length;n++){const e=t[n];if(ci(e))return gi(e)}})(r):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&Ea(o))&&(this.basePTS=al(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:xs,duration:Number.POSITIVE_INFINITY});a<l;){if(this.canParse(e,a)){const t=this.appendFrame(i,e,a);t?(this.frameIndex++,this.lastPTS=t.sample.pts,a+=t.length,n=a):a=l}else li(e,a)?(r=si(e,a),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:xs,duration:Number.POSITIVE_INFINITY}),a+=r.length,n=a):a++;if(a===l&&n!==l){const t=ri(e,n);this.cachedData?this.cachedData=Oi(this.cachedData,t):this.cachedData=t}}return{audioTrack:i,videoTrack:nl(),id3Track:s,textTrack:nl()}}demuxSampleAes(e,t,n){return Promise.reject(new Error("[".concat(this,"] This demuxer does not support Sample-AES decryption")))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:nl(),id3Track:this._id3Track,textTrack:nl()}}destroy(){}}const al=(e,t,n)=>{if(Ea(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function il(e,t){return 255===e[t]&&240===(246&e[t+1])}function sl(e,t){return 1&e[t+1]?7:9}function ol(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function ll(e,t){return t+1<e.length&&il(e,t)}function cl(e,t){if(ll(e,t)){const n=sl(e,t);if(t+n>=e.length)return!1;const r=ol(e,t);if(r<=n)return!1;const a=t+r;return a===e.length||ll(e,a)}return!1}function ul(e,t,n,r,a){if(!e.samplerate){const i=function(e,t,n,r){let a,i,s,o;const l=navigator.userAgent.toLowerCase(),c=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];a=1+((192&t[n+2])>>>6);const d=(60&t[n+2])>>>2;if(!(d>u.length-1))return s=(1&t[n+2])<<2,s|=(192&t[n+3])>>>6,Ia.log("manifest codec:".concat(r,", ADTS type:").concat(a,", samplingIndex:").concat(d)),/firefox/i.test(l)?d>=6?(a=5,o=new Array(4),i=d-3):(a=2,o=new Array(2),i=d):-1!==l.indexOf("android")?(a=2,o=new Array(2),i=d):(a=5,o=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&d>=6?i=d-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(d>=6&&1===s||/vivaldi/i.test(l))||!r&&1===s)&&(a=2,o=new Array(2)),i=d)),o[0]=a<<3,o[0]|=(14&d)>>1,o[1]|=(1&d)<<7,o[1]|=s<<3,5===a&&(o[1]|=(14&i)>>1,o[2]=(1&i)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:u[d],channelCount:s,codec:"mp4a.40."+a,manifestCodec:c};e.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:".concat(d)})}(t,n,r,a);if(!i)return;e.config=i.config,e.samplerate=i.samplerate,e.channelCount=i.channelCount,e.codec=i.codec,e.manifestCodec=i.manifestCodec,Ia.log("parsed codec:".concat(e.codec,", rate:").concat(i.samplerate,", channels:").concat(i.channelCount))}}function dl(e){return 9216e4/e}function hl(e,t,n,r,a){const i=r+a*dl(e.samplerate),s=function(e,t){const n=sl(e,t);if(t+n<=e.length){const r=ol(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let o;if(s){const{frameLength:r,headerLength:a}=s,l=a+r,c=Math.max(0,n+l-t.length);c?(o=new Uint8Array(l-a),o.set(t.subarray(n+a,t.length),0)):o=t.subarray(n+a,n+l);const u={unit:o,pts:i};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-n;o=new Uint8Array(l),o.set(t.subarray(n,t.length),0);return{sample:{unit:o,pts:i},length:l,missing:-1}}const fl=/\/emsg[-/]ID3/i;let pl=null;const ml=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],gl=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],vl=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],yl=[0,1,1,4];function bl(e,t,n,r,a){if(n+24>t.length)return;const i=El(t,n);if(i&&n+i.frameLength<=t.length){const s=r+a*(9e4*i.samplesPerFrame/i.sampleRate),o={unit:t.subarray(n,n+i.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=i.channelCount,e.samplerate=i.sampleRate,e.samples.push(o),{sample:o,length:i.frameLength,missing:0}}}function El(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,a=e[t+2]>>4&15,i=e[t+2]>>2&3;if(1!==n&&0!==a&&15!==a&&3!==i){const s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*ml[14*(3===n?3-r:3===r?3:4)+a-1],c=gl[3*(3===n?0:2===n?1:2)+i],u=3===o?1:2,d=vl[n][r],h=yl[r],f=8*d*h,p=Math.floor(d*l/c+s)*h;if(null===pl){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);pl=e?parseInt(e[1]):0}return!!pl&&pl<=87&&2===r&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:p,samplesPerFrame:f}}}function Tl(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function wl(e,t){return t+1<e.length&&Tl(e,t)}function Sl(e,t){if(t+1<e.length&&Tl(e,t)){const n=4,r=El(e,t);let a=n;null!=r&&r.frameLength&&(a=r.frameLength);const i=t+a;return i===e.length||wl(e,i)}return!1}class kl{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");r.set(e.subarray(n,n+a)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Ia.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,n=8,r=8;for(let a=0;a<e;a++)0!==r&&(t=this.readEG(),r=(n+t+256)%256),n=0===r?n:r}readSPS(){let e,t,n,r=0,a=0,i=0,s=0;const o=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();const m=o();if(l(5),d(3),o(),f(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){const e=c();if(3===e&&d(1),f(),f(),d(1),u())for(t=3!==e?8:12,n=0;n<t;n++)u()&&p(n<6?16:64)}f();const g=c();if(0===g)c();else if(1===g)for(d(1),h(),h(),e=c(),n=0;n<e;n++)h();f(),d(1);const v=c(),y=c(),b=l(1);0===b&&d(1),d(1),u()&&(r=c(),a=c(),i=c(),s=c());let E=[1,1];if(u()&&u()){switch(o()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[o()<<8|o(),o()<<8|o()]}}return{width:Math.ceil(16*(v+1)-2*r-2*a),height:(2-b)*(y+1)*16-(b?2:4)*(i+s),pixelRatio:E}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class xl{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new jo(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const a=r.subarray(16,r.length-r.length%16),i=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(i).then((a=>{const i=new Uint8Array(a);r.set(i,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}))}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let a=32;a<e.length-16;a+=160,r+=16)n.set(e.subarray(a,a+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let a=32;a<e.length-16;a+=160,r+=16)e.set(n.subarray(r,r+16),a);return e}decryptAvcSample(e,t,n,r,a){const i=Bi(a.data),s=this.getAvcEncryptedData(i);this.decryptBuffer(s.buffer).then((s=>{a.data=this.getAvcDecryptedUnit(i,s),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}))}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const a=e[t].units;for(;!(n>=a.length);n++){const i=a[n];if(!(i.data.length<=48||1!==i.type&&5!==i.type)&&(this.decryptAvcSample(e,t,n,r,i),!this.decrypter.isSync()))return}}}}const Ll=188;class Rl{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}static probe(e){const t=Rl.syncOffset(e);return t>0&&Ia.warn("MPEG2-TS detected but first sync word found @ offset ".concat(t)),-1!==t}static syncOffset(e){const t=e.length;let n=Math.min(940,e.length-Ll)+1,r=0;for(;r<n;){let a=!1,i=-1,s=0;for(let o=r;o<t;o+=Ll){if(71!==e[o]){if(s)return-1;break}if(s++,-1===i&&(i=o,0!==i&&(n=Math.min(i+18612,e.length-Ll)+1)),a||(a=0===Cl(e,o)),a&&s>1&&(0===i&&s>2||o+Ll>n))return i}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:Si[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=Rl.createTrack("video"),this._audioTrack=Rl.createTrack("audio",r),this._id3Track=Rl.createTrack("id3"),this._txtTrack=Rl.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r||(this.sampleAes=null);const i=this._avcTrack,s=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=i.pid,u=i.pesData,d=s.pid,h=o.pid,f=s.pesData,p=o.pesData,m=null,g=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=Oi(this.remainderData,e)).length,this.remainderData=null),y<Ll&&!a)return this.remainderData=e,{audioTrack:s,videoTrack:i,id3Track:o,textTrack:l};const b=Math.max(0,Rl.syncOffset(e));y-=(y-b)%Ll,y<e.byteLength&&!a&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let E=0;for(let w=b;w<y;w+=Ll)if(71===e[w]){const t=!!(64&e[w+1]),a=Cl(e,w);let y;if((48&e[w+3])>>4>1){if(y=w+5+e[w+4],y===w+Ll)continue}else y=w+4;switch(a){case c:t&&(u&&(n=_l(u))&&this.parseAVCPES(i,l,n,!1),u={data:[],size:0}),u&&(u.data.push(e.subarray(y,w+Ll)),u.size+=w+Ll-y);break;case d:if(t){if(f&&(n=_l(f)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,n);break;case"mp3":this.parseMPEGPES(s,n)}f={data:[],size:0}}f&&(f.data.push(e.subarray(y,w+Ll)),f.size+=w+Ll-y);break;case h:t&&(p&&(n=_l(p))&&this.parseID3PES(o,n),p={data:[],size:0}),p&&(p.data.push(e.subarray(y,w+Ll)),p.size+=w+Ll-y);break;case 0:t&&(y+=e[y]+1),v=this._pmtId=Il(e,y);break;case v:{t&&(y+=e[y]+1);const n=Dl(e,y,this.typeSupported,r);c=n.avc,c>0&&(i.pid=c),d=n.audio,d>0&&(s.pid=d,s.segmentCodec=n.segmentCodec),h=n.id3,h>0&&(o.pid=h),null===m||g||(Ia.warn("MPEG-TS PMT found at ".concat(w," after unknown PID '").concat(m,"'. Backtracking to sync byte @").concat(b," to parse all TS packets.")),m=null,w=b-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=a}}else E++;if(E>0){const e=new Error("Found ".concat(E," TS packet/s that do not start with 0x47"));this.observer.emit(Sa.ERROR,Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message})}i.pesData=u,s.pesData=f,o.pesData=p;const T={audioTrack:s,videoTrack:i,id3Track:o,textTrack:l};return a&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:a}=e,i=n.pesData,s=t.pesData,o=r.pesData;let l;if(i&&(l=_l(i))?(this.parseAVCPES(n,a,l,!0),n.pesData=null):n.pesData=i,s&&(l=_l(s))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l)}t.pesData=null}else null!=s&&s.size&&Ia.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=s;o&&(l=_l(o))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=o}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),a=this.sampleAes=new xl(this.observer,this.config,t);return this.decrypt(r,a)}decrypt(e,t){return new Promise((n=>{const{audioTrack:r,videoTrack:a}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,(()=>{a.samples?t.decryptAvcSamples(a.samples,0,0,(()=>{n(e)})):n(e)})):a.samples&&t.decryptAvcSamples(a.samples,0,0,(()=>{n(e)}))}))}destroy(){this._duration=0}parseAVCPES(e,t,n,r){const a=this.parseAVCNALu(e,n.data);let i,s=this.avcSample,o=!1;n.data=null,s&&a.length&&!e.audFound&&(Pl(s,e),s=this.avcSample=Al(!1,n.pts,n.dts,"")),a.forEach((r=>{var a;switch(r.type){case 1:{let t=!1;i=!0;const a=r.data;if(o&&a.length>4){const e=new kl(a).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var l;if(t)null!=(l=s)&&l.frame&&!s.key&&(Pl(s,e),s=this.avcSample=null);s||(s=this.avcSample=Al(!0,n.pts,n.dts,"")),s.frame=!0,s.key=t;break}case 5:i=!0,null!=(a=s)&&a.frame&&!s.key&&(Pl(s,e),s=this.avcSample=null),s||(s=this.avcSample=Al(!0,n.pts,n.dts,"")),s.key=!0,s.frame=!0;break;case 6:i=!0,Ni(r.data,1,n.pts,t.samples);break;case 7:if(i=!0,o=!0,!e.sps){const t=r.data,n=new kl(t).readSPS();e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t],e.duration=this._duration;const a=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=a[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break;case 8:i=!0,e.pps||(e.pps=[r.data]);break;case 9:i=!1,e.audFound=!0,s&&Pl(s,e),s=this.avcSample=Al(!1,n.pts,n.dts,"");break;case 12:i=!0;break;default:i=!1,s&&(s.debug+="unknown NAL "+r.type+" ")}if(s&&i){s.units.push(r)}})),r&&s&&(Pl(s,e),this.avcSample=null)}getLastNalUnit(e){var t;let n,r=this.avcSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}parseAVCNALu(e,t){const n=t.byteLength;let r=e.naluState||0;const a=r,i=[];let s,o,l,c=0,u=-1,d=0;for(-1===r&&(u=0,d=31&t[0],r=0,c=1);c<n;)if(s=t[c++],r)if(1!==r)if(s)if(1===s){if(u>=0){const e={data:t.subarray(u,c-r-1),type:d};i.push(e)}else{const n=this.getLastNalUnit(e.samples);if(n&&(a&&c<=4-a&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-a)),o=c-r-1,o>0)){const e=new Uint8Array(n.data.byteLength+o);e.set(n.data,0),e.set(t.subarray(0,o),n.data.byteLength),n.data=e,n.state=0}}c<n?(l=31&t[c],u=c,d=l,r=0):r=-1}else r=0;else r=3;else r=s?0:2;else r=s?0:1;if(u>=0&&r>=0){const e={data:t.subarray(u,n),type:d,state:r};i.push(e)}if(0===i.length){const n=this.getLastNalUnit(e.samples);if(n){const e=new Uint8Array(n.data.byteLength+t.byteLength);e.set(n.data,0),e.set(t,n.data.byteLength),n.data=e}}return e.naluState=r,i}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let a,i,s,o=t.data;if(r){this.aacOverFlow=null;const t=r.missing,a=r.sample.unit.byteLength;if(-1===t){const e=new Uint8Array(a+o.byteLength);e.set(r.sample.unit,0),e.set(o,a),o=e}else{const i=a-t;r.sample.unit.set(o.subarray(0,t),i),e.samples.push(r.sample),n=r.missing}}for(a=n,i=o.length;a<i-1&&!ll(o,a);a++);if(a!==n){let e;const t=a<i-1;e=t?"AAC PES did not start with ADTS header,offset:".concat(a):"No ADTS header found in AAC PES";const n=new Error(e);if(Ia.warn("parsing error: ".concat(e)),this.observer.emit(Sa.ERROR,Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:n,reason:e}),!t)return}if(ul(e,this.observer,o,a,this.audioCodec),void 0!==t.pts)s=t.pts;else{if(!r)return void Ia.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=dl(e.samplerate);s=r.sample.pts+t}}let l,c=0;for(;a<i;){if(l=hl(e,o,a,s,c),a+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;a<i-1&&!ll(o,a);a++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let a=0,i=0;const s=t.pts;if(void 0!==s)for(;i<r;)if(wl(n,i)){const t=bl(e,n,i,s,a);if(!t)break;i+=t.length,a++}else i++;else Ia.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseID3PES(e,t){if(void 0===t.pts)return void Ia.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=ba({},t,{type:this._avcTrack?Rs:xs,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Al(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}function Cl(e,t){return((31&e[t+1])<<8)+e[t+2]}function Il(e,t){return(31&e[t+10])<<8|e[t+11]}function Dl(e,t,n,r){const a={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},i=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){const i=Cl(e,t);switch(e[t]){case 207:if(!r){Ia.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===a.audio&&(a.audio=i);break;case 21:-1===a.id3&&(a.id3=i);break;case 219:if(!r){Ia.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===a.avc&&(a.avc=i);break;case 3:case 4:!0!==n.mpeg&&!0!==n.mp3?Ia.log("MPEG audio found, not supported in this browser"):-1===a.audio&&(a.audio=i,a.segmentCodec="mp3");break;case 36:Ia.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return a}function _l(e){let t,n,r,a,i,s=0;const o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;){const e=new Uint8Array(o[0].length+o[1].length);e.set(o[0]),e.set(o[1],o[0].length),o[0]=e,o.splice(1,1)}t=o[0];if(1===(t[0]<<16)+(t[1]<<8)+t[2]){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;const l=t[7];192&l&&(a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?(i=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,a-i>54e5&&(Ia.warn("".concat(Math.round((a-i)/9e4),"s delta between PTS and DTS, align them")),a=i)):i=a),r=t[8];let c=r+9;if(e.size<=c)return null;e.size-=c;const u=new Uint8Array(e.size);for(let e=0,n=o.length;e<n;e++){t=o[e];let n=t.byteLength;if(c){if(c>n){c-=n;continue}t=t.subarray(c),n-=c,c=0}u.set(t,s),s+=n}return n&&(n-=r+3),{data:u,pts:a,dts:i,len:n}}return null}function Pl(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}e.debug.length&&Ia.log(e.pts+"/"+e.dts+":"+e.debug)}class Ol{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Ml=Math.pow(2,32)-1;class Fl{static init(){let e;for(e in Fl.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Fl.types)Fl.types.hasOwnProperty(e)&&(Fl.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Fl.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);Fl.STTS=Fl.STSC=Fl.STCO=a,Fl.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Fl.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Fl.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Fl.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const i=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Fl.FTYP=Fl.box(Fl.types.ftyp,i,o,i,s),Fl.DINF=Fl.box(Fl.types.dinf,Fl.box(Fl.types.dref,r))}static box(e){let t=8;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];let i=r.length;const s=i;for(;i--;)t+=r[i].byteLength;const o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),i=0,t=8;i<s;i++)o.set(r[i],t),t+=r[i].byteLength;return o}static hdlr(e){return Fl.box(Fl.types.hdlr,Fl.HDLR_TYPES[e])}static mdat(e){return Fl.box(Fl.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Ml+1)),r=Math.floor(t%(Ml+1));return Fl.box(Fl.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return Fl.box(Fl.types.mdia,Fl.mdhd(e.timescale,e.duration),Fl.hdlr(e.type),Fl.minf(e))}static mfhd(e){return Fl.box(Fl.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Fl.box(Fl.types.minf,Fl.box(Fl.types.smhd,Fl.SMHD),Fl.DINF,Fl.stbl(e)):Fl.box(Fl.types.minf,Fl.box(Fl.types.vmhd,Fl.VMHD),Fl.DINF,Fl.stbl(e))}static moof(e,t,n){return Fl.box(Fl.types.moof,Fl.mfhd(e),Fl.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Fl.trak(e[t]);return Fl.box.apply(null,[Fl.types.moov,Fl.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(Fl.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Fl.trex(e[t]);return Fl.box.apply(null,[Fl.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Ml+1)),r=Math.floor(t%(Ml+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Fl.box(Fl.types.mvhd,a)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,a;for(r=0;r<t.length;r++)a=t[r].flags,n[r+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return Fl.box(Fl.types.sdtp,n)}static stbl(e){return Fl.box(Fl.types.stbl,Fl.stsd(e),Fl.box(Fl.types.stts,Fl.STTS),Fl.box(Fl.types.stsc,Fl.STSC),Fl.box(Fl.types.stsz,Fl.STSZ),Fl.box(Fl.types.stco,Fl.STCO))}static avc1(e){let t,n,r,a=[],i=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));const s=Fl.box(Fl.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(i))),o=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return Fl.box(Fl.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,Fl.box(Fl.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Fl.box(Fl.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static mp4a(e){const t=e.samplerate;return Fl.box(Fl.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),Fl.box(Fl.types.esds,Fl.esds(e)))}static mp3(e){const t=e.samplerate;return Fl.box(Fl.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}static stsd(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?Fl.box(Fl.types.stsd,Fl.STSD,Fl.mp3(e)):Fl.box(Fl.types.stsd,Fl.STSD,Fl.mp4a(e)):Fl.box(Fl.types.stsd,Fl.STSD,Fl.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,r=e.width,a=e.height,i=Math.floor(n/(Ml+1)),s=Math.floor(n%(Ml+1));return Fl.box(Fl.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))}static traf(e,t){const n=Fl.sdtp(e),r=e.id,a=Math.floor(t/(Ml+1)),i=Math.floor(t%(Ml+1));return Fl.box(Fl.types.traf,Fl.box(Fl.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),Fl.box(Fl.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,i>>24,i>>16&255,i>>8&255,255&i])),Fl.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Fl.box(Fl.types.trak,Fl.tkhd(e),Fl.mdia(e))}static trex(e){const t=e.id;return Fl.box(Fl.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,a=12+16*r,i=new Uint8Array(a);let s,o,l,c,u,d;for(t+=8+a,i.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),s=0;s<r;s++)o=n[s],l=o.duration,c=o.size,u=o.flags,d=o.cts,i.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s);return Fl.box(Fl.types.trun,i)}static initSegment(e){Fl.types||Fl.init();const t=Fl.moov(e),n=new Uint8Array(Fl.FTYP.byteLength+t.byteLength);return n.set(Fl.FTYP),n.set(t,Fl.FTYP.byteLength),n}}Fl.types=void 0,Fl.HDLR_TYPES=void 0,Fl.STTS=void 0,Fl.STSC=void 0,Fl.STCO=void 0,Fl.STSZ=void 0,Fl.VMHD=void 0,Fl.SMHD=void 0,Fl.STSD=void 0,Fl.FTYP=void 0,Fl.DINF=void 0;const Nl=9e4;function Bl(e,t){const n=e*t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?Math.round(n):n}function Ul(e){return Bl(e,1e3,1/Nl,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}let jl,Hl=null,zl=null;class Gl{constructor(e,t,n){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Hl){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Hl=e?parseInt(e[1]):0}if(null===zl){const e=navigator.userAgent.match(/Safari\/(\d+)/i);zl=e?parseInt(e[1]):0}}destroy(){}resetTimeStamp(e){Ia.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){Ia.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Ia.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let t=!1;const n=e.reduce(((e,n)=>{const r=n.pts-e;return r<-4294967296?(t=!0,Vl(e,n.pts)):r>0?e:n.pts}),e[0].pts);return t&&Ia.debug("PTS rollover detected"),n}remux(e,t,n,r,a,i,s,o){let l,c,u,d,h,f,p=a,m=a;const g=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,E=s&&y>0||y>1;if((!g||b)&&(!v||E)||this.ISGenerated||s){this.ISGenerated||(u=this.generateIS(e,t,a,i));const n=this.isVideoContiguous;let r,s=-1;if(E&&(s=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,s>0){Ia.warn("[mp4-remuxer]: Dropped ".concat(s," out of ").concat(y," video samples due to a missing keyframe"));const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(s),t.dropped+=s,m+=(t.samples[0].pts-e)/t.inputTimeScale,r=m}else-1===s&&(Ia.warn("[mp4-remuxer]: No keyframe found out of ".concat(y," video samples")),f=!1);if(this.ISGenerated){if(b&&E){const n=this.getVideoStartPts(t.samples),r=(Vl(e.samples[0].pts,n)-n)/t.inputTimeScale;p+=Math.max(0,r),m+=Math.max(0,-r)}if(b){if(e.samplerate||(Ia.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,a,i)),c=this.remuxAudio(e,p,this.isAudioContiguous,i,v||E||o===gs?m:void 0),E){const r=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(Ia.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,a,i)),l=this.remuxVideo(t,m,n,r)}}else E&&(l=this.remuxVideo(t,m,n,0));l&&(l.firstKeyFrame=s,l.independent=-1!==s,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=Kl(n,a,this._initPTS,this._initDTS)),r.samples.length&&(d=Wl(r,a,this._initPTS))),{audio:c,video:l,initSegment:u,independent:f,text:d,id3:h}}generateIS(e,t,n,r){const a=e.samples,i=t.samples,s=this.typeSupported,o={},l=this._initPTS;let c,u,d,h=!l||r,f="audio/mp4";if(h&&(c=u=1/0),e.config&&a.length){if(e.timescale=e.samplerate,"mp3"===e.segmentCodec)s.mpeg?(f="audio/mpeg",e.codec=""):s.mp3&&(e.codec="mp3");o.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&s.mpeg?new Uint8Array(0):Fl.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(d=e.inputTimeScale,l&&d===l.timescale?h=!1:c=u=a[0].pts-Math.round(d*n))}if(t.sps&&t.pps&&i.length&&(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Fl.initSegment([t]),metadata:{width:t.width,height:t.height}},h))if(d=t.inputTimeScale,l&&d===l.timescale)h=!1;else{const e=this.getVideoStartPts(i),t=Math.round(d*n);u=Math.min(u,Vl(i[0].dts,e)-t),c=Math.min(c,e-t)}if(Object.keys(o).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:c,timescale:d},this._initDTS={baseTime:u,timescale:d}):c=d=void 0,{tracks:o,initPTS:c,timescale:d}}remuxVideo(e,t,n,r){const a=e.inputTimeScale,i=e.samples,s=[],o=i.length,l=this._initPTS;let c,u,d=this.nextAvcDts,h=8,f=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=!1;if(!n||null===d){d=t*a-(i[0].pts-Vl(i[0].dts,i[0].pts))}const v=l.baseTime*a/l.timescale;for(let _=0;_<o;_++){const e=i[_];e.pts=Vl(e.pts-v,d),e.dts=Vl(e.dts-v,d),e.dts<i[_>0?_-1:_].dts&&(g=!0)}g&&i.sort((function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r})),c=i[0].dts,u=i[i.length-1].dts;const y=u-c,b=y?Math.round(y/(o-1)):f||e.inputTimeScale/30;if(n){const e=c-d,t=e>b,n=e<-1;if((t||n)&&(t?Ia.warn("AVC: ".concat(Ul(e,!0)," ms (").concat(e,"dts) hole between fragments detected, filling it")):Ia.warn("AVC: ".concat(Ul(-e,!0)," ms (").concat(e,"dts) overlapping between fragments detected")),!n||d>=i[0].pts)){c=d;const t=i[0].pts-e;i[0].dts=c,i[0].pts=t,Ia.log("Video: First PTS/DTS adjusted: ".concat(Ul(t,!0),"/").concat(Ul(c,!0),", delta: ").concat(Ul(e,!0)," ms"))}}c=Math.max(0,c);let E=0,T=0;for(let _=0;_<o;_++){const e=i[_],t=e.units,n=t.length;let r=0;for(let a=0;a<n;a++)r+=t[a].data.length;T+=r,E+=n,e.length=r,e.dts=Math.max(e.dts,c),p=Math.min(e.pts,p),m=Math.max(e.pts,m)}u=i[o-1].dts;const w=T+4*E+8;let S;try{S=new Uint8Array(w)}catch(D){return void this.observer.emit(Sa.ERROR,Sa.ERROR,{type:ka.MUX_ERROR,details:xa.REMUX_ALLOC_ERROR,fatal:!1,error:D,bytes:w,reason:"fail allocating video mdat ".concat(w)})}const k=new DataView(S.buffer);k.setUint32(0,w),S.set(Fl.types.mdat,4);let x=!1,L=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,C=Number.NEGATIVE_INFINITY;for(let _=0;_<o;_++){const e=i[_],t=e.units;let n,l=0;for(let r=0,a=t.length;r<a;r++){const e=t[r],n=e.data,a=e.data.byteLength;k.setUint32(h,a),h+=4,S.set(n,h),h+=a,l+=4+a}if(_<o-1)f=i[_+1].dts-e.dts,n=i[_+1].pts-e.pts;else{const t=this.config,s=_>0?e.dts-i[_-1].dts:b;if(n=_>0?e.pts-i[_-1].pts:b,t.stretchShortVideoTrack&&null!==this.nextAudioPts){const n=Math.floor(t.maxBufferHole*a),i=(r?p+r*a:this.nextAudioPts)-e.pts;i>n?(f=i-s,f<0?f=s:x=!0,Ia.log("[mp4-remuxer]: It is approximately ".concat(i/90," ms to the next segment; using duration ").concat(f/90," ms for the last video frame."))):f=s}else f=s}const c=Math.round(e.pts-e.dts);L=Math.min(L,f),A=Math.max(A,f),R=Math.min(R,n),C=Math.max(C,n),s.push(new Yl(e.key,f,l,c))}if(s.length)if(Hl){if(Hl<70){const e=s[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(zl&&C-R<A-L&&b/A<.025&&0===s[0].cts){Ia.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=c;for(let t=0,n=s.length;t<n;t++){const r=e+s[t].duration,a=e+s[t].cts;if(t<n-1){const e=r+s[t+1].cts;s[t].duration=e-a}else s[t].duration=t?s[t-1].duration:b;s[t].cts=0,e=r}}f=x||!f?b:f,this.nextAvcDts=d=u+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const I={data1:Fl.moof(e.sequenceNumber++,c,ba({},e,{samples:s})),data2:S,startPTS:p/a,endPTS:(m+f)/a,startDTS:c/a,endDTS:d/a,type:"video",hasAudio:!1,hasVideo:!0,nb:s.length,dropped:e.dropped};return e.samples=[],e.dropped=0,I}remuxAudio(e,t,n,r,a){const i=e.inputTimeScale,s=i/(e.samplerate?e.samplerate:i),o="aac"===e.segmentCodec?1024:1152,l=o*s,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==a;let f=e.samples,p=u?0:8,m=this.nextAudioPts||-1;const g=t*i,v=c.baseTime*i/c.timescale;if(this.isAudioContiguous=n=n||f.length&&m>0&&(r&&Math.abs(g-m)<9e3||Math.abs(Vl(f[0].pts-v,g)-m)<20*l),f.forEach((function(e){e.pts=Vl(e.pts-v,g)})),!n||m<0){if(f=f.filter((e=>e.pts>=0)),!f.length)return;m=0===a?0:r&&!h?Math.max(0,g):f[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=m;n<f.length;n++){const a=f[n],s=a.pts,o=s-r,c=Math.abs(1e3*o/i);if(o<=-t*l&&h)0===n&&(Ia.warn("Audio frame @ ".concat((s/i).toFixed(3),"s overlaps nextAudioPts by ").concat(Math.round(1e3*o/i)," ms.")),this.nextAudioPts=m=r=s);else if(o>=t*l&&c<1e4&&h){let t=Math.round(o/l);r=s-t*l,r<0&&(t--,r+=l),0===n&&(this.nextAudioPts=m=r),Ia.warn("[mp4-remuxer]: Injecting ".concat(t," audio frame @ ").concat((r/i).toFixed(3),"s due to ").concat(Math.round(1e3*o/i)," ms gap."));for(let i=0;i<t;i++){const t=Math.max(r,0);let i=Ol.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);i||(Ia.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),i=a.unit.subarray()),f.splice(n,0,{unit:i,pts:t}),r+=l,n++}}a.pts=r,r+=l}}let y,b=null,E=null,T=0,w=f.length;for(;w--;)T+=f[w].unit.byteLength;for(let I=0,D=f.length;I<D;I++){const t=f[I],r=t.unit;let a=t.pts;if(null!==E){d[I-1].duration=Math.round((a-E)/s)}else{if(n&&"aac"===e.segmentCodec&&(a=m),b=a,!(T>0))return;T+=p;try{y=new Uint8Array(T)}catch(C){return void this.observer.emit(Sa.ERROR,Sa.ERROR,{type:ka.MUX_ERROR,details:xa.REMUX_ALLOC_ERROR,fatal:!1,error:C,bytes:T,reason:"fail allocating audio mdat ".concat(T)})}if(!u){new DataView(y.buffer).setUint32(0,T),y.set(Fl.types.mdat,4)}}y.set(r,p);const i=r.byteLength;p+=i,d.push(new Yl(!0,o,i,0)),E=a}const S=d.length;if(!S)return;const k=d[d.length-1];this.nextAudioPts=m=E+s*k.duration;const x=u?new Uint8Array(0):Fl.moof(e.sequenceNumber++,b/s,ba({},e,{samples:d}));e.samples=[];const L=b/i,R=m/i,A={data1:x,data2:y,startPTS:L,endPTS:R,startDTS:L,endDTS:R,type:"audio",hasAudio:!0,hasVideo:!1,nb:S};return this.isAudioContiguous=!0,A}remuxEmptyAudio(e,t,n,r){const a=e.inputTimeScale,i=a/(e.samplerate?e.samplerate:a),s=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,c=(null!==s?s:r.startDTS*a)+l,u=r.endDTS*a+l,d=1024*i,h=Math.ceil((u-c)/d),f=Ol.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(Ia.warn("[mp4-remuxer]: remux empty Audio"),!f)return void Ia.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const p=[];for(let m=0;m<h;m++){const e=c+m*d;p.push({unit:f,pts:e,dts:e})}return e.samples=p,this.remuxAudio(e,t,n,!1)}}function Vl(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function Kl(e,t,n,r){const a=e.samples.length;if(!a)return;const i=e.inputTimeScale;for(let o=0;o<a;o++){const a=e.samples[o];a.pts=Vl(a.pts-n.baseTime*i/n.timescale,t*i)/i,a.dts=Vl(a.dts-r.baseTime*i/r.timescale,t*i)/i}const s=e.samples;return e.samples=[],{samples:s}}function Wl(e,t,n){const r=e.samples.length;if(!r)return;const a=e.inputTimeScale;for(let s=0;s<r;s++){const r=e.samples[s];r.pts=Vl(r.pts-n.baseTime*a/n.timescale,t*a)/a}e.samples.sort(((e,t)=>e.pts-t.pts));const i=e.samples;return e.samples=[],{samples:i}}class Yl{constructor(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags=new ql(e)}}class ql{constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}function $l(e,t){const n=null==e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n||"hev1"===n?"hvc1.1.6.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===Ba?"avc1.42e01e":"mp4a.40.5"}try{jl=self.performance.now.bind(self.performance)}catch(zu){Ia.debug("Unable to use Performance API on this environment"),jl="undefined"!==typeof self&&self.Date.now}const Xl=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const a=this.videoTrack=nl("video",1),i=this.audioTrack=nl("audio",1),s=this.txtTrack=nl("text",1);if(this.id3Track=nl("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=Di(e);if(o.video){const{id:e,timescale:t,codec:n}=o.video;a.id=e,a.timescale=s.timescale=t,a.codec=n}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;i.id=e,i.timescale=t,i.codec=n}s.id=Si.text,a.sampleDuration=0,a.duration=i.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return Ci(e=e.length>16384?e.subarray(0,16384):e,["moof"]).length>0}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Oi(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=Ci(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=ri(e,0,r.byteOffset-8),t.remainder=ri(e,r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const i=this.extractID3Track(r,t);return a.samples=Mi(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:i,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=Mi(e,t),{videoTrack:t,audioTrack:nl(),id3Track:r,textTrack:nl()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=Ci(e.samples,["emsg"]);r&&r.forEach((e=>{const r=function(e){const t=e[0];let n="",r="",a=0,i=0,s=0,o=0,l=0,c=0;if(0===t){for(;"\0"!==ki(e.subarray(c,c+1));)n+=ki(e.subarray(c,c+1)),c+=1;for(n+=ki(e.subarray(c,c+1)),c+=1;"\0"!==ki(e.subarray(c,c+1));)r+=ki(e.subarray(c,c+1)),c+=1;r+=ki(e.subarray(c,c+1)),c+=1,a=Li(e,12),i=Li(e,16),o=Li(e,20),l=Li(e,24),c=28}else if(1===t){c+=4,a=Li(e,c),c+=4;const t=Li(e,c);c+=4;const i=Li(e,c);for(c+=4,s=2**32*t+i,Ta(s)||(s=Number.MAX_SAFE_INTEGER,Ia.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Li(e,c),c+=4,l=Li(e,c),c+=4;"\0"!==ki(e.subarray(c,c+1));)n+=ki(e.subarray(c,c+1)),c+=1;for(n+=ki(e.subarray(c,c+1)),c+=1;"\0"!==ki(e.subarray(c,c+1));)r+=ki(e.subarray(c,c+1)),c+=1;r+=ki(e.subarray(c,c+1)),c+=1}return{schemeIdUri:n,value:r,timeScale:a,presentationTime:s,presentationTimeDelta:i,eventDuration:o,id:l,payload:e.subarray(c,e.byteLength)}}(e);if(fl.test(r.schemeIdUri)){const e=Ea(r.presentationTime)?r.presentationTime/r.timeScale:t+r.presentationTimeDelta/r.timeScale;let a=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);const i=r.payload;n.samples.push({data:i,len:i.byteLength,dts:e,pts:e,type:Rs,duration:a})}}))}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(function(e,t){if(!e||!t)return e;const n=t.keyId;n&&t.isCommonEncryption&&Ci(e,["moov","trak"]).forEach((e=>{const t=Ci(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let r=Ci(t,["enca"]);const a=r.length>0;a||(r=Ci(t,["encv"])),r.forEach((e=>{Ci(a?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=_i(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(Ia.log("[eme] Patching keyId in 'enc".concat(a?"a":"v",">sinf>>tenc' box: ").concat(Ei(e)," -> ").concat(Ei(n))),t.set(n,8))}}))}))}));return e}(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const r=this.initData=Di(e);t||(t=$l(r.audio,Na)),n||(n=$l(r.video,Ba));const a={};r.audio&&r.video?a.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:r.audio?a.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?a.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:Ia.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,t,n,r,a,i){var s,o;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};Ea(c)||(c=this.lastEndTime=a||0);const d=t.samples;if(null==d||!d.length)return u;const h={initPTS:void 0,timescale:1};let f=this.initData;if(null!=(s=f)&&s.length||(this.generateInitSegment(d),f=this.initData),null==(o=f)||!o.length)return Ia.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const p=function(e,t){let n=0,r=0,a=0;const i=Ci(e,["moof","traf"]);for(let s=0;s<i.length;s++){const e=i[s],o=Ci(e,["tfhd"])[0],l=t[Li(o,4)];if(!l)continue;const c=l.default,u=Li(o,0)|(null==c?void 0:c.flags);let d=null==c?void 0:c.duration;8&u&&(d=Li(o,2&u?12:8));const h=l.timescale||9e4,f=Ci(e,["trun"]);for(let t=0;t<f.length;t++)n=Pi(f[t]),!n&&d&&(n=d*Li(f[t],4)),l.type===Ba?r+=n/h:l.type===Na&&(a+=n/h)}if(0===r&&0===a){let t=0;const n=Ci(e,["sidx"]);for(let e=0;e<n.length;e++){const r=Ii(n[e]);null!=r&&r.references&&(t+=r.references.reduce(((e,t)=>e+t.info.duration||0),0))}return t}return r||a}(d,f),m=function(e,t){return Ci(t,["moof","traf"]).reduce(((t,n)=>{const r=Ci(n,["tfdt"])[0],a=r[0],i=Ci(n,["tfhd"]).reduce(((t,n)=>{const i=Li(n,4),s=e[i];if(s){let e=Li(r,4);if(1===a){if(e===Ti)return Ia.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=Ti+1,e+=Li(r,8)}const n=e/(s.timescale||9e4);if(Ea(n)&&(null===t||n<t))return n}return t}),null);return null!==i&&Ea(i)&&(null===t||i<t)?i:t}),null)}(f,d),g=null===m?a:m;(function(e,t,n,r){if(null===e)return!0;const a=Math.max(r,1),i=t-e.baseTime/e.timescale;return Math.abs(i-n)>a}(l,g,a,p)||h.timescale!==l.timescale&&i)&&(h.initPTS=g-a,l&&1===l.timescale&&Ia.warn("Adjusting initPTS by ".concat(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const v=e?g-l.baseTime/l.timescale:c,y=v+p;!function(e,t,n){Ci(t,["moof","traf"]).forEach((t=>{Ci(t,["tfhd"]).forEach((r=>{const a=Li(r,4),i=e[a];if(!i)return;const s=i.timescale||9e4;Ci(t,["tfdt"]).forEach((e=>{const t=e[0];let r=Li(e,4);if(0===t)r-=n*s,r=Math.max(r,0),Ai(e,4,r);else{r*=Math.pow(2,32),r+=Li(e,8),r-=n*s,r=Math.max(r,0);const t=Math.floor(r/(Ti+1)),a=Math.floor(r%(Ti+1));Ai(e,4,t),Ai(e,8,a)}}))}))}))}(f,d,l.baseTime/l.timescale),p>0?this.lastEndTime=y:(Ia.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const b=!!f.audio,E=!!f.video;let T="";b&&(T+="audio"),E&&(T+="video");const w={data1:d,startPTS:v,startDTS:v,endPTS:y,endDTS:y,type:T,hasAudio:b,hasVideo:E,nb:1,dropped:0};return u.audio="audio"===w.type?w:void 0,u.video="audio"!==w.type?w:void 0,u.initSegment=h,u.id3=Kl(n,a,l,l),r.samples.length&&(u.text=Wl(r,a,l)),u}}},{demux:Rl,remux:Gl},{demux:class extends rl{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(si(e,0)||[]).length;for(let n=e.length;t<n;t++)if(cl(e,t))return Ia.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&il(e,t)&&ol(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){ul(e,this.observer,t,n,e.manifestCodec);const r=hl(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:Gl},{demux:class extends rl{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(si(e,0)||[]).length;for(let n=e.length;t<n;t++)if(Sl(e,t))return Ia.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return Tl(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return bl(e,t,n,this.basePTS,this.frameIndex)}},remux:Gl}];class Zl{constructor(e,t,n,r,a){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const a=n.transmuxing;a.executeStart=jl();let i=new Uint8Array(e);const{currentTransmuxState:s,transmuxConfig:o}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:f}=r||s,{audioCodec:p,videoCodec:m,defaultInitPts:g,duration:v,initSegmentData:y}=o,b=function(e,t){let n=null;e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t);return n}(i,t);if(b&&"AES-128"===b.method){const e=this.getDecrypter();if(!e.isSync())return this.decryptionPromise=e.webCryptoDecrypt(i,b.key.buffer,b.iv.buffer).then((e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t})),this.decryptionPromise;{let t=e.softwareDecrypt(i,b.key.buffer,b.iv.buffer);if(n.part>-1&&(t=e.flush()),!t)return a.executeEnd=jl(),Ql(n);i=new Uint8Array(t)}}const E=this.needsProbing(c,u);if(E){const e=this.configureTransmuxer(i);if(e)return Ia.warn("[transmuxer] ".concat(e.message)),this.observer.emit(Sa.ERROR,Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),a.executeEnd=jl(),Ql(n)}(c||u||f||E)&&this.resetInitSegment(y,p,m,v,t),(c||f||E)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const T=this.transmux(i,b,h,d,n),w=this.currentTransmuxState;return w.contiguous=!0,w.discontinuity=!1,w.trackSwitch=!1,a.executeEnd=jl(),T}flush(e){const t=e.transmuxing;t.executeStart=jl();const{decrypter:n,currentTransmuxState:r,decryptionPromise:a}=this;if(a)return a.then((()=>this.flush(e)));const i=[],{timeOffset:s}=r;if(n){const t=n.flush();t&&i.push(this.push(t,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l)return t.executeEnd=jl(),[Ql(e)];const c=o.flush(s);return Jl(c)?c.then((t=>(this.flushRemux(i,t,e),i))):(this.flushRemux(i,c,e),i)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:a,id3Track:i,textTrack:s}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;Ia.log("[transmuxer.ts]: Flushed fragment ".concat(n.sn).concat(n.part>-1?" p: "+n.part:""," of level ").concat(n.level));const c=this.remuxer.remux(r,a,i,s,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=jl()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,a){const{demuxer:i,remuxer:s}=this;i&&s&&(i.resetInitSegment(e,t,n,r),s.resetInitSegment(e,t,n,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,a){let i;return i=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,a):this.transmuxUnencrypted(e,n,r,a),i}transmuxUnencrypted(e,t,n,r){const{audioTrack:a,videoTrack:i,id3Track:s,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,i,s,o,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,a){return this.demuxer.demuxSampleAes(e,t,n).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:a})))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r,vendor:a}=this;let i;for(let u=0,d=Xl.length;u<d;u++)if(Xl[u].demux.probe(e)){i=Xl[u];break}if(!i)return new Error("Failed to find demuxer by probing fragment data");const s=this.demuxer,o=this.remuxer,l=i.remux,c=i.demux;o&&o instanceof l||(this.remuxer=new l(n,t,r,a)),s&&s instanceof c||(this.demuxer=new c(n,t,r),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new jo(this.config)),e}}const Ql=e=>({remuxResult:{},chunkMeta:e});function Jl(e){return"then"in e&&e.then instanceof Function}class ec{constructor(e,t,n,r,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=a||null}}class tc{constructor(e,t,n,r,a,i){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=a,this.initSegmentChange=i}}var nc={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new a(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,s=new Array(i);a<i;a++)s[a]=r[a].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,i,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,a),!0;case 5:return u.fn.call(u.context,t,r,a,i),!0;case 6:return u.fn.call(u.context,t,r,a,i,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||s(this,i);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||a&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(nc);var rc=ha(nc.exports);const ac=qi()||{isTypeSupported:()=>!1};class ic{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const a=e.config;this.hls=e,this.id=t,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const i=(e,t)=>{(t=t||{}).frag=this.frag,t.id=this.id,e===Sa.ERROR&&(this.error=t.error),this.hls.trigger(e,t)};this.observer=new rc,this.observer.on(Sa.FRAG_DECRYPTED,i),this.observer.on(Sa.ERROR,i);const s={mp4:ac.isTypeSupported("video/mp4"),mpeg:ac.isTypeSupported("audio/mpeg"),mp3:ac.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(this.useWorker&&"undefined"!==typeof Worker){if(a.workerPath||"function"===typeof __HLS_WORKER_BUNDLE__){try{a.workerPath?(Ia.log("loading Web Worker ".concat(a.workerPath,' for "').concat(t,'"')),this.workerContext=function(e){const t=new self.URL(e,self.location.href).href;return{worker:new self.Worker(t),scriptURL:t}}(a.workerPath)):(Ia.log('injecting Web Worker for "'.concat(t,'"')),this.workerContext=function(){const e=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(".concat(__HLS_WORKER_BUNDLE__.toString(),")(true);")],{type:"text/javascript"}),t=self.URL.createObjectURL(e);return{worker:new self.Worker(t),objectURL:t}}()),this.onwmsg=e=>this.onWorkerMessage(e);const{worker:e}=this.workerContext;e.addEventListener("message",this.onwmsg),e.onerror=e=>{const n=new Error("".concat(e.message,"  (").concat(e.filename,":").concat(e.lineno,")"));a.enableWorker=!1,Ia.warn('Error in "'.concat(t,'" Web Worker, fallback to inline')),this.hls.trigger(Sa.ERROR,{type:ka.OTHER_ERROR,details:xa.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:n})},e.postMessage({cmd:"init",typeSupported:s,vendor:o,id:t,config:JSON.stringify(a)})}catch(zu){Ia.warn('Error setting up "'.concat(t,'" Web Worker, fallback to inline'),zu),this.resetWorker(),this.error=null,this.transmuxer=new Zl(this.observer,s,a,o,t)}return}}this.transmuxer=new Zl(this.observer,s,a,o,t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,r,a,i,s,o,l,c){var u,d;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,f=i?i.start:a.start,p=a.decryptdata,m=this.frag,g=!(m&&a.cc===m.cc),v=!(m&&l.level===m.level),y=m?l.sn-m.sn:-1,b=this.part?l.part-this.part.index:-1,E=0===y&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),T=!v&&(1===y||0===y&&(1===b||E&&b<=0)),w=self.performance.now();(v||y||0===a.stats.parsing.start)&&(a.stats.parsing.start=w),!i||!b&&T||(i.stats.parsing.start=w);const S=!(m&&(null==(u=a.initSegment)?void 0:u.url)===(null==(d=m.initSegment)?void 0:d.url)),k=new tc(g,T,o,v,f,S);if(!T||g||S){Ia.log("[transmuxer-interface, ".concat(a.type,"]: Starting new transmux session for sn: ").concat(l.sn," p: ").concat(l.part," level: ").concat(l.level," id: ").concat(l.id,"\n        discontinuity: ").concat(g,"\n        trackSwitch: ").concat(v,"\n        contiguous: ").concat(T,"\n        accurateTimeOffset: ").concat(o,"\n        timeOffset: ").concat(f,"\n        initSegmentChange: ").concat(S));const e=new ec(n,r,t,s,c);this.configureTransmuxer(e)}if(this.frag=a,this.part=i,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:k},e instanceof ArrayBuffer?[e]:[]);else if(h){const t=h.push(e,p,l,k);Jl(t)?(h.async=!0,t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(t))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);Jl(n)||t.async?(Jl(n)||(n=Promise.resolve(n)),n.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}))):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}onWorkerMessage(e){const t=e.data,n=this.hls;switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":Ia[t.data.logType]&&Ia[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class sc{constructor(e,t,n,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:r,stalled:a}=this;if(null===r)return;const{currentTime:i,seeking:s}=r,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,i!==e){if(this.moved=!0,null!==a){if(this.stallReported){const e=self.performance.now()-a;Ia.warn("playback not stuck anymore @".concat(i,", after ").concat(Math.round(e),"ms")),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(l||o)return void(this.stalled=null);if(r.paused&&!s||r.ended||0===r.playbackRate||!Io.getBuffered(r).length)return;const c=Io.bufferInfo(r,i,0),u=c.len>0,d=c.nextStart||0;if(!u&&!d)return;if(s){const e=c.len>2,n=!d||t&&t.start<=i||d-i>2&&!this.fragmentTracker.getPartialFragment(i);if(e||n)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var h;const e=Math.max(d,c.start||0)-i,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,n=(null==t||null==(h=t.details)?void 0:h.live)?2*t.details.targetduration:2,r=this.fragmentTracker.getPartialFragment(i);if(e>0&&(e<=n||r))return void this._trySkipBufferHole(r)}const f=self.performance.now();if(null===a)return void(this.stalled=f);const p=f-a;if(!s&&p>=250&&(this._reportStall(c),!this.media))return;const m=Io.bufferInfo(r,i,n.maxBufferHole);this._tryFixBufferStall(m,p)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:r,media:a}=this;if(null===a)return;const i=a.currentTime,s=r.getPartialFragment(i);if(s){if(this._trySkipBufferHole(s)||!this.media)return}(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-i<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(Ia.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:r}=this;if(!r&&n){this.stallReported=!0;const r=new Error("Playback stalling at @".concat(n.currentTime," due to low buffer (").concat(JSON.stringify(e),")"));Ia.warn(r.message),t.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:r}=this;if(null===r)return 0;const a=r.currentTime,i=Io.bufferInfo(r,a,0),s=a<i.start?i.start:i.nextStart;if(s){const o=i.len<=t.maxBufferHole,l=i.len>0&&i.len<1&&r.readyState<3,c=s-a;if(c>0&&(o||l)){if(c>t.maxBufferHole){const{fragmentTracker:t}=this;let n=!1;if(0===a){const e=t.getAppendedFrag(0,ms);e&&s<e.end&&(n=!0)}if(!n){const n=e||t.getAppendedFrag(a,ms);if(n){let e=!1,r=n.end;for(;r<s;){const n=t.getPartialFragment(r);if(!n){e=!0;break}r+=n.duration}if(e)return 0}}}const i=Math.max(s+.05,a+.1);if(Ia.warn("skipping hole, adjusting currentTime from ".concat(a," to ").concat(i)),this.moved=!0,this.stalled=null,r.currentTime=i,e&&!e.gap){const t=new Error("fragment loaded with buffer holes, seeking from ".concat(a," to ").concat(i));n.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return i}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:r}=this;if(null===n)return;const a=n.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const i=a+(r+1)*e.nudgeOffset,s=new Error("Nudging 'currentTime' from ".concat(a," to ").concat(i));Ia.warn(s.message),n.currentTime=i,t.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.BUFFER_NUDGE_ON_STALL,error:s,fatal:!1})}else{const n=new Error("Playhead still not moving while enough data buffered @".concat(a," after ").concat(e.nudgeMaxRetry," nudges"));Ia.error(n.message),t.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.BUFFER_STALLED_ERROR,error:n,fatal:!0})}}}class oc extends el{constructor(e,t,n){super(e,t,n,"[stream-controller]",ms),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Sa.LEVEL_LOADING,this.onLevelLoading,this),e.on(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Sa.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Sa.ERROR,this.onError,this),e.on(Sa.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Sa.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Sa.BUFFER_CREATED,this.onBufferCreated,this),e.on(Sa.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Sa.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Sa.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Sa.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Sa.ERROR,this.onError,this),e.off(Sa.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Sa.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Sa.BUFFER_CREATED,this.onBufferCreated,this),e.off(Sa.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Sa.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Sa.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.nextAutoLevel),this.level=n.nextLoadLevel=e,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @".concat(t.toFixed(3))),e=t),this.state=Go,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=zo}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Jo:{var e;const{levels:t,level:n}=this,r=null==t||null==(e=t[n])?void 0:e.details;if(r&&(!r.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(r))break;this.state=Go;break}if(this.hls.nextLoadLevel!==this.level){this.state=Go;break}break}case Wo:{var t;const e=self.performance.now(),n=this.retryDate;(!n||e>=n||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Go)}}this.state===Go&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this,{config:a,nextLoadLevel:i}=e;if(null===t||!r&&(this.startFragRequested||!a.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;if(null==n||!n[i])return;const s=n[i],o=this.getMainFwdBufferInfo();if(null===o)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const e={};return this.altAudio&&(e.type="video"),this.hls.trigger(Sa.BUFFER_EOS,e),void(this.state=Xo)}e.loadLevel!==i&&-1===e.manualLevel&&this.log("Adapting to level ".concat(i," from level ").concat(this.level)),this.level=e.nextLoadLevel=i;const c=s.details;if(!c||this.state===Jo||c.live&&this.levelLastLoaded!==i)return this.level=i,void(this.state=Jo);const u=o.len,d=this.getMaxBufferLength(s.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&f&&"initSegment"!==f.sn&&this.fragmentTracker.getState(f)!==yo){var p;const e=(null!=(p=this.backtrackFragment)?p:f).sn-c.startSN,t=c.fragments[e-1];t&&f.cc===t.cc&&(f=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const e=this.audioOnly&&!this.altAudio?Na:Ba,t=(e===Ba?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,ms)}f=this.getNextFragmentLoopLoading(f,c,o,ms,d)}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,s,h))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,r===mo||r===vo?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment ".concat(e.sn," of level ").concat(e.level," is being downloaded to test bitrate and will not be buffered")),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ms)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const a=this.getLevelDetails();if(null!=a&&a.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*a.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const i=this.getBufferedFrag(t.currentTime+n);if(i){const e=this.followingBufferedFrag(i);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(i.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,.5*n),.75*n));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Vo:case Ko:case Wo:case qo:case $o:this.state=Go}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new sc(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Ea(t)&&this.log("Media seeked to ".concat(t.toFixed(3)));const n=this.getMainFwdBufferInfo();null!==n&&0!==n.len?this.tick():this.warn('Main forward buffer length on "seeked" event '.concat(n?n.len:"empty",")"))}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Sa.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,t){let n,r=!1,a=!1;t.levels.forEach((e=>{n=e.audioCodec,n&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(a=!0))})),this.audioCodecSwitch=r&&a&&!function(){var e;const t=tl();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Go)return;const r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(r.details))&&(this.state=Jo)}onLevelLoaded(e,t){var n;const{levels:r}=this,a=t.level,i=t.details,s=i.totalduration;if(!r)return void this.warn("Levels were reset while loading level ".concat(a));this.log("Level ".concat(a," loaded [").concat(i.startSN,",").concat(i.endSN,"]").concat(i.lastPartSn?"[part-".concat(i.lastPartSn,"-").concat(i.lastPartIndex,"]"):"",", cc [").concat(i.startCC,", ").concat(i.endCC,"] duration:").concat(s));const o=r[a],l=this.fragCurrent;!l||this.state!==Ko&&this.state!==Wo||l.level===t.level&&l.urlId===o.urlId||!l.loader||this.abortCurrentFrag();let c=0;if(i.live||null!=(n=o.details)&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;c=this.alignPlaylists(i,o.details)}if(o.details=i,this.levelLastLoaded=a,this.hls.trigger(Sa.LEVEL_UPDATED,{details:i,level:a}),this.state===Jo){if(this.waitForCdnTuneIn(i))return;this.state=Go}this.startFragRequested?i.live&&this.synchronizeToLiveEdge(i):this.setStartPosition(i,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:a}=e,{levels:i}=this;if(!i)return void this.warn("Levels were reset while fragment load was in progress. Fragment ".concat(n.sn," of level ").concat(n.level," will not be buffered"));const s=i[n.level],o=s.details;if(!o)return this.warn("Dropping fragment ".concat(n.sn," of level ").concat(n.level," after level details were reset")),void this.fragmentTracker.removeFragment(n);const l=s.videoCodec,c=o.PTSKnown||!o.live,u=null==(t=n.initSegment)?void 0:t.data,d=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new ic(this.hls,ms,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=r?r.index:-1,p=-1!==f,m=new Do(n.level,n.sn,n.stats.chunkCount,a.byteLength,f,p),g=this.initPTS[n.cc];h.push(a,u,d,l,n,r,o.totalduration,c,m,g)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const e=this.hls;n&&(e.trigger(Sa.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),e.trigger(Sa.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,r=!!this.hls.audioTracks[n].url;if(r){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=r,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,a,i=!1;for(const s in n){const e=n[s];if("main"===e.id){if(a=s,r=e,"video"===s){const e=n[s];e&&(this.videoBuffer=e.buffer)}}else i=!0}i&&r?(this.log("Alternate track found, use ".concat(a,".buffered to schedule main fragment loading")),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n&&n.type!==ms)return;if(this.fragContextChanged(n))return this.warn("Fragment ".concat(n.sn).concat(r?" p: "+r.index:""," of level ").concat(n.level," finished buffering, but was aborted. state: ").concat(this.state)),void(this.state===$o&&(this.state=Go));const a=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}onError(e,t){var n;if(t.fatal)this.state=Zo;else switch(t.details){case xa.FRAG_GAP:case xa.FRAG_PARSING_ERROR:case xa.FRAG_DECRYPT_ERROR:case xa.FRAG_LOAD_ERROR:case xa.FRAG_LOAD_TIMEOUT:case xa.KEY_LOAD_ERROR:case xa.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ms,t);break;case xa.LEVEL_LOAD_ERROR:case xa.LEVEL_LOAD_TIMEOUT:case xa.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Jo||(null==(n=t.context)?void 0:n.type)!==hs||(this.state=Go);break;case xa.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case xa.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:e,gapController:t}=this;if(e&&t&&e.readyState){if(this.loadedmetadata||!Io.getBuffered(e).length){const e=this.state!==Go?this.fragCurrent:null;t.poll(this.lastCurrentTime,e)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=Go,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,t){let{type:n}=t;if(n!==Na||this.audioOnly&&!this.altAudio){const e=(n===Ba?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(e,n,ms)}}onLevelsUpdated(e,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log("could not seek to ".concat(n,", already seeking at ").concat(t));const r=Io.getBuffered(e),a=(r.length?r.start(0):0)-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by ".concat(a," to match buffer start")),n+=a,this.startPosition=n),this.log("seek to target start position ".concat(n," from current time ").concat(t)),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((n=>{const{hls:r}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=Go,this.startFragRequested=!1,this.bitrateTest=!1;const a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(Sa.FRAG_LOADED,n),e.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const n="main",{hls:r}=this,{remuxResult:a,chunkMeta:i}=e,s=this.getCurrentContext(i);if(!s)return void this.resetWhenMissingContext(i);const{frag:o,part:l,level:c}=s,{video:u,text:d,id3:h,initSegment:f}=a,{details:p}=c,m=this.altAudio?void 0:a.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=qo,f){if(null!=f&&f.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,f.tracks,e,i),r.trigger(Sa.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:f.tracks})}const e=f.initPTS,t=f.timescale;Ea(e)&&(this.initPTS[o.cc]={baseTime:e,timescale:t},r.trigger(Sa.INIT_PTS_FOUND,{frag:o,id:n,initPTS:e,timescale:t}))}if(u&&p&&"initSegment"!==o.sn){const e=p.fragments[o.sn-1-p.startSN],t=o.sn===p.startSN,n=!e||o.cc>e.cc;if(!1!==a.independent){const{startPTS:e,endPTS:r,startDTS:a,endDTS:s}=u;if(l)l.elementaryStreams[u.type]={startPTS:e,endPTS:r,startDTS:a,endDTS:s};else if(u.firstKeyFrame&&u.independent&&1===i.id&&!n&&(this.couldBacktrack=!0),u.dropped&&u.independent){const a=this.getMainFwdBufferInfo(),i=(a?a.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:e;if(!t&&i<l-this.config.maxBufferHole&&!n)return void this.backtrack(o);n&&(o.gap=!0),o.setElementaryStreamInfo(u.type,o.start,r,o.start,s,!0)}o.setElementaryStreamInfo(u.type,e,r,a,s),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(u,o,l,i,t||n)}else{if(!t&&!n)return void this.backtrack(o);o.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=m;l&&(l.elementaryStreams[Na]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(Na,e,t,n,r),this.bufferFragmentData(m,o,l,i)}if(p&&null!=h&&null!=(t=h.samples)&&t.length){const e={id:n,frag:o,details:p,samples:h.samples};r.trigger(Sa.FRAG_PARSING_METADATA,e)}if(p&&d){const e={id:n,frag:o,details:p,samples:d.samples};r.trigger(Sa.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,n,r){if(this.state!==qo)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:a,video:i,audiovideo:s}=t;if(a){let t=e.audioCodec;const n=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==a.metadata.channelCount&&-1===n.indexOf("firefox")&&(t="mp4a.40.5")),-1!==n.indexOf("android")&&"audio/mpeg"!==a.container&&(t="mp4a.40.2",this.log("Android: force audio codec to ".concat(t))),e.audioCodec&&e.audioCodec!==t&&this.log('Swapping manifest audio codec "'.concat(e.audioCodec,'" for "').concat(t,'"')),a.levelCodec=t,a.id="main",this.log("Init audio buffer, container:".concat(a.container,", codecs[selected/level/parsed]=[").concat(t||"","/").concat(e.audioCodec||"","/").concat(a.codec,"]"))}i&&(i.levelCodec=e.videoCodec,i.id="main",this.log("Init video buffer, container:".concat(i.container,", codecs[level/parsed]=[").concat(e.videoCodec||"","/").concat(i.codec,"]"))),s&&this.log("Init audiovideo buffer, container:".concat(s.container,", codecs[level/parsed]=[").concat(e.attrs.CODECS||"","/").concat(s.codec,"]")),this.hls.trigger(Sa.BUFFER_CODECS,t),Object.keys(t).forEach((e=>{const a=t[e].initSegment;null!=a&&a.byteLength&&this.hls.trigger(Sa.BUFFER_APPENDING,{type:e,data:a,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ms)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Go}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(Io.isBuffered(e,n)?t=this.getAppendedFrag(n):Io.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n&&t.urlId===e.urlId||(this.fragPlaying=t,this.hls.trigger(Sa.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(Sa.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&Ea(t)&&Ea(n.programDateTime)){const e=n.programDateTime+1e3*(t-n.start);return new Date(e)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class lc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class cc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new lc(e),this.fast_=new lc(t),this.defaultTTFB_=r,this.ttfb_=new lc(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:a}=this;n.halfLife!==e&&(this.slow_=new lc(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new lc(t,r.getEstimate(),r.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new lc(e,a.getEstimate(),a.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class uc{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let a=0;a<e.length;a++){const t=e[a];n.set(t,r),r+=t.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function dc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!hc(e[n].attrs,t[n].attrs))return!1;return!0}function hc(e,t){const n=e["STABLE-RENDITION-ID"];return n?n===t["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((n=>e[n]!==t[n]))}class fc{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException("Failed to execute '".concat(t,"' on 'TimeRanges': The index provided (").concat(n,") is greater than the maximum bound (").concat(r,")"));return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}function pc(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}class mc{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t){const n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise((e=>{t=e})),r={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(r,e),n}executeNext(e){const{buffers:t,queues:n}=this,r=t[e],a=n[e];if(a.length){const t=a[0];try{t.execute()}catch(Hu){Ia.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),t.onError(Hu),null!=r&&r.updating||(a.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const gc=qi(),vc=/([ha]vc.)(?:\.[^.,]+)+/;const yc={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},bc=function(e){let t=e;return yc.hasOwnProperty(e)&&(t=yc[e]),String.fromCharCode(t)},Ec=15,Tc=100,wc={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Sc={17:2,18:4,21:6,22:8,23:10,19:13,20:15},kc={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},xc={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Lc=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Rc{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"===typeof t?t():t;Ia.log("".concat(this.time," [").concat(e,"] ").concat(n))}}}const Ac=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class Cc{constructor(e,t,n,r,a){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=a||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Ic{constructor(e,t,n,r,a,i){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Cc(t,n,r,a,i)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class Dc{constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let t=0;t<Tc;t++)this.chars.push(new Ic);this.logger=e,this.pos=0,this.currPenState=new Cc}equals(e){let t=!0;for(let n=0;n<Tc;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}copy(e){for(let t=0;t<Tc;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Tc;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Tc&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Tc)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=bc(e);this.pos>=Tc?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<Tc;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Tc;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class _c{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<Ec;t++)this.rows.push(new Dc(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<Ec;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<Ec;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<Ec;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Ec;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+JSON.stringify(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<Ec;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,a=this.logger.time;if(r&&null!==a&&r<a)for(let i=0;i<this.nrRollUpRows;i++)this.rows[t-this.nrRollUpRows+i+1].copy(n.rows[e+i])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let a=0;a<Ec;a++){const n=this.rows[a].getTextString();n&&(r=a+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class Pc{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new _c(n),this.nonDisplayedMemory=new _c(n),this.lastOutputScreen=new _c(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Oc{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const r=new Rc;this.channels=[null,new Pc(e,t,r),new Pc(e+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let n,r,a,i=!1;this.logger.time=e;for(let s=0;s<t.length;s+=2)if(r=127&t[s],a=127&t[s+1],0!==r||0!==a){if(this.logger.log(3,"["+Ac([t[s],t[s+1]])+"] -> ("+Ac([r,a])+")"),n=this.parseCmd(r,a),n||(n=this.parseMidrow(r,a)),n||(n=this.parsePAC(r,a)),n||(n=this.parseBackgroundAttributes(r,a)),!n&&(i=this.parseChars(r,a),i)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(i)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}n||i||this.logger.log(2,"Couldn't parse cleaned data "+Ac([r,a])+" orig: "+Ac([t[s],t[s+1]]))}}parseCmd(e,t){const{cmdHistory:n}=this;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(Fc(e,t,n))return Mc(null,null,n),this.logger.log(3,"Repeated command ("+Ac([e,t])+") is dropped"),!0;const r=20===e||21===e||23===e?1:2,a=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),Mc(e,t,n),this.currentChannel=r,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Ac([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;const r=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(Fc(e,t,r))return Mc(null,null,r),!0;const a=e<=23?1:2;n=t>=64&&t<=95?1===a?wc[e]:kc[e]:1===a?Sc[e]:xc[e];const i=this.channels[a];return!!i&&(i.setPAC(this.interpretPAC(n,t)),Mc(e,t,r),this.currentChannel=a,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,a=null;if(e>=25?(n=2,a=e-8):(n=1,a=e),a>=17&&a<=19){let e;e=17===a?t+80:18===a?t+112:t+144,this.logger.log(2,"Special char '"+bc(e)+"' in channel "+n),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){const n=Ac(r);this.logger.log(3,"Char codes =  "+n.join(",")),Mc(e,t,this.cmdHistory)}return r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=Lc[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(r),Mc(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function Mc(e,t,n){n.a=e,n.b=t}function Fc(e,t,n){return n.a===e&&n.b===t}class Nc{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Bc=function(){if("undefined"!==typeof self&&self.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a=1;for(;a<arguments.length;a++){const t=arguments[a];for(const n in t)e[n]=t[n]}return e}function i(t,i,s){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let c="",u=!1,d=t,h=i,f=s,p=null,m="",g=!0,v="auto",y="start",b=50,E="middle",T=50,w="middle";Object.defineProperty(o,"id",a({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",a({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",a({},l,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",a({},l,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",a({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",a({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",a({},l,{get:function(){return m},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",a({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",a({},l,{get:function(){return v},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",a({},l,{get:function(){return y},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",a({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",a({},l,{get:function(){return E},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",a({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",a({},l,{get:function(){return w},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),o.displayState=void 0}return i.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},i}();class Uc{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function jc(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class Hc{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function zc(e,t,n,r){const a=r?e.split(r):[e];for(const i in a){if("string"!==typeof a[i])continue;const e=a[i].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const Gc=new Bc(0,0,""),Vc="middle"===Gc.align?"middle":"center";function Kc(e,t,n){const r=e;function a(){const t=jc(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}if(i(),t.startTime=a(),i(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),i(),t.endTime=a(),i(),function(e,t){const r=new Hc;zc(e,(function(e,t){let a;switch(e){case"region":for(let a=n.length-1;a>=0;a--)if(n[a].id===t){r.set(e,n[a].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":a=t.split(","),r.integer(e,a[0]),r.percent(e,a[0])&&r.set("snapToLines",!1),r.alt(e,a[0],["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",Vc,"end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",Vc,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",Vc,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let a=r.get("line","auto");"auto"===a&&-1===Gc.line&&(a=-1),t.line=a,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",Vc);let i=r.get("position","auto");"auto"===i&&50===Gc.position&&(i="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=i}(e,t)}function Wc(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class Yc{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Uc,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=Wc(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let r=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:e=n(),t.state){case"HEADER":/:/.test(e)?zc(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new Bc(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Kc(e,t.cue,t.regionList)}catch(Hu){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(Hu){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(Hu){e.onparsingerror&&e.onparsingerror(Hu)}return e.onflush&&e.onflush(),this}}const qc=/\r\n|\n\r|\n|\r/g,$c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.slice(n,n+t.length)===t},Xc=function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function Zc(e,t,n){return Xc(e.toString())+Xc(t.toString())+Xc(n)}function Qc(e,t,n,r,a,i,s){const o=new Yc,l=vi(new Uint8Array(e)).trim().replace(qc,"\n").split("\n"),c=[],u=t?function(e){return Bl(e,Nl,1/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}(t.baseTime,t.timescale):0;let d,h="00:00.000",f=0,p=0,m=!0;o.oncue=function(e){const i=n[r];let s=n.ccOffset;const o=(f-u)/9e4;if(null!=i&&i.new&&(void 0!==p?s=n.ccOffset=i.start:function(e,t,n){let r=e[t],a=e[r.prevCC];if(!a||!a.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(i=a)&&i.new;){var i;e.ccOffset+=r.start-a.start,r.new=!1,r=a,a=e[r.prevCC]}e.presentationOffset=n}(n,r,o)),o){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));s=o-n.presentationOffset}const l=e.endTime-e.startTime,h=Vl(9e4*(e.startTime+s-p),9e4*a)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const m=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(m)),e.id||(e.id=Zc(e.startTime,e.endTime,m)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){d=e},o.onflush=function(){d?s(d):i(c)},l.forEach((e=>{if(m){if($c(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach((e=>{$c(e,"LOCAL:")?h=e.slice(6):$c(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))}));try{p=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Ea(t)||!Ea(n)||!Ea(r)||!Ea(a))throw Error("Malformed X-TIMESTAMP-MAP: Local:".concat(e));return t+=1e3*n,t+=6e4*r,t+=36e5*a,t}(h)/1e3}catch(t){d=t}return}""===e&&(m=!1)}o.parse(e+"\n")})),o.flush()}const Jc="stpp.ttml.im1t",eu=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,tu=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,nu={left:"start",center:"center",right:"end",start:"start",end:"end"};function ru(e,t,n,r){const a=Ci(new Uint8Array(e),["mdat"]);if(0===a.length)return void r(new Error("Could not parse IMSC1 mdat"));const i=a.map((e=>vi(e))),s=function(e,t){return Bl(e,t,1/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),arguments.length>3&&void 0!==arguments[3]&&arguments[3])}(t.baseTime,1,t.timescale);try{i.forEach((e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(a).reduce(((e,t)=>(e[t]=r.getAttribute("ttp:".concat(t))||a[t],e)),{}),s="preserve"!==r.getAttribute("xml:space"),o=iu(au(r,"styling","style")),l=iu(au(r,"layout","region")),c=au(r,"body","[begin]");return[].map.call(c,(e=>{const n=su(e,s);if(!n||!e.hasAttribute("begin"))return null;const r=cu(e.getAttribute("begin"),i),a=cu(e.getAttribute("dur"),i);let c=cu(e.getAttribute("end"),i);if(null===r)throw lu(e);if(null===c){if(null===a)throw lu(e);c=r+a}const u=new Bc(r-t,c-t,n);u.id=Zc(u.startTime,u.endTime,u.text);const d=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let a=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;s&&n.hasOwnProperty(s)&&(a=n[s]);return i.reduce(((n,i)=>{const s=ou(t,r,i)||ou(e,r,i)||ou(a,r,i);return s&&(n[i]=s),n}),{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:h}=d;if(h){const e=nu[h];e&&(u.lineAlign=e),u.align=h}return ba(u,d),u})).filter((e=>null!==e))}(e,s))))}catch(o){r(o)}}function au(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function iu(e){return e.reduce(((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function su(e,t){return[].slice.call(e.childNodes).reduce(((e,n,r)=>{var a;return"br"===n.nodeName&&r?e+"\n":null!=(a=n.childNodes)&&a.length?su(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function ou(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function lu(e){return new Error("Could not parse ttml timestamp ".concat(e))}function cu(e,t){if(!e)return null;let n=jc(e);return null===n&&(eu.test(e)?n=function(e,t){const n=eu.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):tu.test(e)&&(n=function(e,t){const n=tu.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}function uu(e,t){return!!e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}class du{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Sa.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Sa.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Sa.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Sa.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter(((t,n)=>this.isLevelAllowed(t)&&n<=e));return this.clientRect=null,du.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(Hu){}return e}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;let r=e.length-1;for(let s=0;s<e.length;s+=1){const o=e[s];if((o.width>=t||o.height>=n)&&(a=o,!(i=e[s+1])||a.width!==i.width||a.height!==i.height)){r=s;break}}var a,i;return r}}const hu="[eme]";class fu{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=fu.CDMCleanupPromise?[fu.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Ia.debug.bind(Ia,hu),this.log=Ia.log.bind(Ia,hu),this.warn=Ia.warn.bind(Ia,hu),this.error=Ia.error.bind(Ia,hu),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Sa.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Sa.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Sa.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Sa.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];if(r)return r.licenseUrl;if(e===Ya.WIDEVINE&&n)return n;throw new Error('no license server URL configured for key-system "'.concat(e,'"'))}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'.concat(e,'"]'))}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map((e=>e.audioCodec)).filter(n),a=t.map((e=>e.videoCodec)).filter(n);return r.length+a.length===0&&a.push("avc1.42e01e"),new Promise(((t,n)=>{const i=e=>{const s=e.shift();this.getMediaKeysPromise(s,r,a).then((e=>t({keySystem:s,mediaKeys:e}))).catch((t=>{e.length?i(e):n(t instanceof pu?t:new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};i(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!==typeof n){let e="Configured requestMediaKeySystemAccess is not a function ".concat(n);return null===ni&&"http:"===self.location.protocol&&(e="navigator.requestMediaKeySystemAccess is not available over insecure protocol ".concat(location.protocol)),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=function(e,t,n,r){let a;switch(e){case Ya.FAIRPLAY:a=["cenc","sinf"];break;case Ya.WIDEVINE:case Ya.PLAYREADY:a=["cenc"];break;case Ya.CLEARKEY:a=["cenc","keyids"];break;default:throw new Error("Unknown key-system: ".concat(e))}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"not-allowed",distinctiveIdentifier:r.distinctiveIdentifier||"not-allowed",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:'audio/mp4; codecs="'.concat(e,'"'),robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null}))),videoCapabilities:n.map((e=>({contentType:'video/mp4; codecs="'.concat(e,'"'),robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null})))}]}(a,t,n,r)}(e,t,n,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e];let i=null==a?void 0:a.keySystemAccess;if(!i){this.log('Requesting encrypted media "'.concat(e,'" key-system access with config: ').concat(JSON.stringify(r))),i=this.requestMediaKeySystemAccess(e,r);const t=this.keySystemAccessPromises[e]={keySystemAccess:i};return i.catch((t=>{this.log('Failed to obtain access to key-system "'.concat(e,'": ').concat(t))})),i.then((n=>{this.log('Access for key-system "'.concat(n.keySystem,'" obtained'));const r=this.fetchServerCertificate(e);return this.log('Create media-keys for "'.concat(e,'"')),t.mediaKeys=n.createMediaKeys().then((t=>(this.log('Media-keys created for "'.concat(e,'"')),r.then((n=>n?this.setMediaKeysServerCertificate(t,e,n):t))))),t.mediaKeys.catch((t=>{this.error('Failed to create media-keys for "'.concat(e,'"}: ').concat(t))})),t.mediaKeys}))}return i.then((()=>a.mediaKeys))}createMediaKeySessionContext(e){let{decryptdata:t,keySystem:n,mediaKeys:r}=e;this.log('Creating key-system session "'.concat(n,'" keyId: ').concat(Ei(t.keyId||[])));const a=r.createSession(),i={decryptdata:t,keySystem:n,mediaKeys:r,mediaKeysSession:a,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),a="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,a,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Ei(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log('Updating key-session "'.concat(r.sessionId,'" for keyID ').concat(Ei((null==(n=e.decryptdata)?void 0:n.keyId)||[]),"\n      } (data length: ").concat(t?t.byteLength:t,")")),r.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: ".concat(e.sn," ").concat(e.type,": ").concat(e.level,") key formats ").concat(t.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,n)=>{const r=ti(this.config),a=e.map(Qa).filter((e=>!!e&&-1!==r.indexOf(e)));return this.getKeySystemSelectionPromise(a).then((e=>{let{keySystem:r}=e;const a=ei(r);a?t(a):n(new Error('Unable to find format for key-system "'.concat(r,'"')))})).catch(n)}))}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r="(keyId: ".concat(n,' format: "').concat(t.keyFormat,'" method: ').concat(t.method," uri: ").concat(t.uri,")");this.log("Starting session for key ".concat(r));let a=this.keyIdToKeySessionPromise[n];return a||(a=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then((n=>{let{keySystem:a,mediaKeys:i}=n;return this.throwIfDestroyed(),this.log("Handle encrypted media sn: ".concat(e.frag.sn," ").concat(e.frag.type,": ").concat(e.frag.level," using key ").concat(r)),this.attemptSetMediaKeys(a,i).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({keySystem:a,mediaKeys:i,decryptdata:t});return this.generateRequestWithPreferredKeySession(e,"cenc",t.pssh,"playlist-key")}))})),a.catch((e=>this.handleError(e)))),a}throwIfDestroyed(){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof pu?this.hls.trigger(Sa.ERROR,e.data):this.hls.trigger(Sa.ERROR,{type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=Qa(e.keyFormat),n=t?[t]:ti(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=ti(this.config)),0===e.length)throw new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options ".concat(JSON.stringify({drmSystems:this.config.drmSystems})));return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:n}=e;if(this.debug('"'.concat(e.type,'" event: init data type: "').concat(t,'"')),null===n)return;let r,a;if("sinf"===t&&this.config.drmSystems[Ya.FAIRPLAY]){const e=ki(new Uint8Array(n));try{const t=Va(JSON.parse(e).sinf),n=_i(new Uint8Array(t));if(!n)return;r=n.subarray(8,24),a=Ya.FAIRPLAY}catch(c){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const e=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;const t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),r=n.getUint32(0);if(e.byteLength!==r&&r>44)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,t.version>1)return null;t.systemId=Ei(new Uint8Array(e,12,16));const a=n.getUint32(28);if(0===t.version){if(r-32<a)return null;t.data=new Uint8Array(e,32,a)}else if(1===t.version){t.kids=[];for(let n=0;n<a;n++)t.kids.push(new Uint8Array(e,32+16*n,16))}return t}(n);if(null===e)return;0===e.version&&e.systemId===Ja&&e.data&&(r=e.data.subarray(8,24)),a=function(e){if(e===Ja)return Ya.WIDEVINE}(e.systemId)}if(!a||!r)return;const i=Ei(r),{keyIdToKeySessionPromise:s,mediaKeySessions:o}=this;let l=s[i];for(let u=0;u<o.length;u++){const e=o[u],a=e.decryptdata;if(a.pssh||!a.keyId)continue;const c=Ei(a.keyId);if(i===c||-1!==a.uri.replace(/-/g,"").indexOf(i)){l=s[c],delete s[c],a.pssh=new Uint8Array(n),a.keyId=r,l=s[i]=l.then((()=>this.generateRequestWithPreferredKeySession(e,t,n,"encrypted-event-key-match")));break}}l||(l=s[i]=this.getKeySystemSelectionPromise([a]).then((e=>{let{keySystem:a,mediaKeys:s}=e;var o;this.throwIfDestroyed();const l=new Hi("ISO-23001-7",i,null!=(o=ei(a))?o:"");return l.pssh=new Uint8Array(n),l.keyId=r,this.attemptSetMediaKeys(a,s).then((()=>{this.throwIfDestroyed();const e=this.createMediaKeySessionContext({decryptdata:l,keySystem:a,mediaKeys:s});return this.generateRequestWithPreferredKeySession(e,t,n,"encrypted-event-no-match")}))}))),l.catch((e=>this.handleError(e)))}_onWaitingForKey(e){this.log('"'.concat(e.type,'" event'))}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'.concat(e,'"'));const r=Promise.all(n).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(r),r.then((()=>{this.log('Media-keys set for "'.concat(e,'"')),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===n.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,n,r){var a,i;const s=null==(a=this.config.drmSystems)||null==(i=a[e.keySystem])?void 0:i.generateRequest;if(s)try{const r=s.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=e.decryptdata.pssh=r.initData?new Uint8Array(r.initData):null}catch(d){var o;if(this.warn(d.message),null!=(o=this.hls)&&o.config.debug)throw d}if(null===n)return this.log('Skipping key-session request for "'.concat(r,'" (no initData)')),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'.concat(r,'": ').concat(l," (init data type: ").concat(t," length: ").concat(n?n.byteLength:null,")"));const c=new rc;e.mediaKeysSession.onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void c.emit("error",new Error("invalid state"));const{messageType:r,message:a}=t;this.log('"'.concat(r,'" message event for session "').concat(n.sessionId,'" message size: ').concat(a.byteLength)),"license-request"===r||"license-renewal"===r?this.renewLicense(e,a).catch((e=>{this.handleError(e),c.emit("error",e)})):"license-release"===r?e.keySystem===Ya.FAIRPLAY&&(this.updateKeySession(e,Wa("acknowledged")),this.removeSession(e)):this.warn('unhandled media key message type "'.concat(r,'"'))},e.mediaKeysSession.onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;c.emit("keyStatus",n),"expired"===n&&(this.warn("".concat(e.keySystem," expired for key ").concat(l)),this.renewKeySession(e))};const u=new Promise(((e,t)=>{c.on("error",t),c.on("keyStatus",(n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'.concat(n,'"'))):"expired"===n?t(new Error("key expired while generating request")):this.warn('unhandled key status change "'.concat(n,'"'))}))}));return e.mediaKeysSession.generateRequest(t,n).then((()=>{var t;this.log('Request generated for key-session "'.concat(null==(t=e.mediaKeysSession)?void 0:t.sessionId,'" keyId: ').concat(l))})).catch((e=>{throw new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: ".concat(e))})).then((()=>u)).catch((t=>{throw c.removeAllListeners(),this.removeSession(e),t})).then((()=>(c.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,n)=>{this.log('key status change "'.concat(t,'" for keyStatuses keyId: ').concat(Ei("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))," session keyId: ").concat(Ei(new Uint8Array(e.decryptdata.keyId||[]))," uri: ").concat(e.decryptdata.uri)),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log('Fetching serverCertificate for "'.concat(e,'"')),new Promise(((a,i)=>{const s={responseType:"arraybuffer",url:r},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{a(e.data)},onError:(t,n,a,o)=>{i(new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:va({url:s.url,data:void 0},t)},'"'.concat(e,'" certificate request failed (').concat(r,"). Status: ").concat(t.code," (").concat(t.text,")")))},onTimeout:(t,n,a)=>{i(new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s.url,data:void 0}},'"'.concat(e,'" certificate request timed out (').concat(r,")")))},onAbort:(e,t,n)=>{i(new Error("aborted"))}};n.load(s,l,c)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise(((r,a)=>{e.setServerCertificate(n).then((a=>{this.log("setServerCertificate ".concat(a?"success":"not supported by CDM"," (").concat(null==n?void 0:n.byteLength,') on "').concat(t,'"')),r(e)})).catch((e=>{a(new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}setupLicenseXHR(e,t,n,r){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then((()=>{if(!n.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,t,n,r)})).catch((i=>{if(!n.decryptdata)throw i;return e.open("POST",t,!0),a.call(this.hls,e,t,n,r)})).then((n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise(((r,a)=>{const i=this.getLicenseServerUrl(e.keySystem);this.log("Sending license request to URL: ".concat(i));const s=new XMLHttpRequest;s.responseType="arraybuffer",s.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===s.readyState)if(200===s.status){this._requestLicenseFailureCount=0;let t=s.response;this.log("License received ".concat(t instanceof ArrayBuffer?t.byteLength:t));const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,s,i,e)}catch(o){this.error(o)}r(t)}else{const o=n.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||s.status>=400&&s.status<500)a(new pu({type:ka.KEY_SYSTEM_ERROR,details:xa.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:i,data:void 0,code:s.status,text:s.statusText}},"License Request XHR failed (".concat(i,"). Status: ").concat(s.status," (").concat(s.statusText,")")));else{const n=l-this._requestLicenseFailureCount+1;this.warn("Retrying license request, ".concat(n," attempts left")),this.requestLicense(e,t).then(r,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=s,this.setupLicenseXHR(s,i,e,t).then((e=>{let{xhr:t,licenseChallenge:n}=e;t.send(n)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Hi.clearKeyUriToKeyIdMap();const n=t.length;fu.CDMCleanupPromise=Promise.all(t.map((e=>this.removeSession(e))).concat(null==e?void 0:e.setMediaKeys(null).catch((t=>{this.log("Could not clear media keys: ".concat(t,". media.src: ").concat(null==e?void 0:e.src))})))).then((()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)})).catch((t=>{this.log("Could not close sessions and clear media keys: ".concat(t,". media.src: ").concat(null==e?void 0:e.src))}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,t){let{sessionKeys:n}=t;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){const e=n.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log("Selecting key-system from session-keys ".concat(e.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log("Remove licenses and keys and close session ".concat(t.sessionId)),t.onmessage=null,t.onkeystatuseschange=null,n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),t.remove().catch((e=>{this.log("Could not remove session: ".concat(e))})).then((()=>t.close())).catch((e=>{this.log("Could not close session: ".concat(e))}))}}}fu.CDMCleanupPromise=void 0;class pu extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var mu="m",gu="a",vu="v",yu="av",bu="i",Eu="tt";class Tu{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:mu,su:!this.initialized})}catch(t){Ia.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const t=e.frag,n=this.hls.levels[t.level],r=this.getObjectType(t),a={d:1e3*t.duration,ot:r};r!==vu&&r!==gu&&r!=yu||(a.br=n.bitrate/1e3,a.tb=this.getTopBandwidth(r)/1e3,a.bl=this.getBufferLength(r)),this.apply(e,a)}catch(t){Ia.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||Tu.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Sa.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Sa.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Sa.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Sa.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ba(t,this.createData());const n=t.ot===bu||t.ot===vu||t.ot===yu;if(this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders){const n=Tu.toHeaders(t);if(!Object.keys(n).length)return;e.headers||(e.headers={}),ba(e.headers,n)}else{const n=Tu.toQuery(t);if(!n)return;e.url=Tu.appendQueryToUri(e.url,n)}}getObjectType(e){const{type:t}=e;return"subtitle"===t?Eu:"initSegment"===e.sn?bu:"audio"===t?gu:"main"===t?this.hls.audioTracks.length?vu:yu:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===gu)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}for(const a of t)a.bitrate>n&&(n=a.bitrate);return n>0?n:NaN}getBufferLength(e){const t=this.hls.media,n=e===gu?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*Io.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}static uuid(){const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}static serialize(e){const t=[],n=e=>!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e,r=e=>Math.round(e),a=e=>100*r(e/100),i={br:r,d:r,bl:a,dl:a,mtp:a,nor:e=>encodeURIComponent(e),rtp:a,tb:r},s=Object.keys(e||{}).sort();for(const o of s){let r=e[o];if(!n(r))continue;if("v"===o&&1===r)continue;if("pr"==o&&1===r)continue;const a=i[o];a&&(r=a(r));const s=typeof r;let l;l="ot"===o||"sf"===o||"st"===o?"".concat(o,"=").concat(r):"boolean"===s?o:"number"===s?"".concat(o,"=").concat(r):"".concat(o,"=").concat(JSON.stringify(r)),t.push(l)}return t.join(",")}static toHeaders(e){const t=Object.keys(e),n={},r=["Object","Request","Session","Status"],a=[{},{},{},{}],i={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const s of t){a[null!=i[s]?i[s]:1][s]=e[s]}for(let s=0;s<a.length;s++){const e=Tu.serialize(a[s]);e&&(n["CMCD-".concat(r[s])]=e)}return n}static toQuery(e){return"CMCD=".concat(encodeURIComponent(Tu.serialize(e)))}static appendQueryToUri(e,t){if(!t)return e;const n=e.includes("?")?"&":"?";return"".concat(e).concat(n).concat(t)}}function wu(e,t,n,r){e&&Object.keys(t).forEach((a=>{const i=e.filter((e=>e.groupId===a)).map((e=>{const i=ba({},e);return i.details=void 0,i.attrs=new Pa(i.attrs),i.url=i.attrs.URI=Su(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),i.groupId=i.attrs["GROUP-ID"]=t[a],i.attrs["PATHWAY-ID"]=r,i}));e.push(...i)}))}function Su(e,t,n,r){const{HOST:a,PARAMS:i,[n]:s}=r;let o;t&&(o=null==s?void 0:s[t],o&&(e=o));const l=new self.URL(e);return a&&!o&&(l.host=a),i&&Object.keys(i).sort().forEach((e=>{e&&l.searchParams.set(e,i[e])})),l.href}const ku=/^age:\s*[\d.]+\s*$/im;class xu{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Fa,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then((()=>{if(!this.stats.aborted)return a(n,t.url)})).catch((e=>(n.open("GET",t.url,!0),a(n,t.url)))).then((()=>{this.stats.aborted||this.openAndSendXhr(n,t,e)})).catch((e=>{this.callbacks.onError({code:n.status,text:e.message},t,n,r)})):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=this.context.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:i}=n.loadPolicy;if(r)for(const s in r)e.setRequestHeader(s,r[s]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=a&&Ea(a)?a:i,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,a=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,i="text"!==t.responseType;if(r>=200&&r<300&&(i&&t.response||null!==t.responseText)){n.loading.end=Math.max(self.performance.now(),n.loading.first);const a=i?t.response:t.responseText,s="arraybuffer"===t.responseType?a.byteLength:a.length;if(n.loaded=n.total=s,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(n,e,a,t),!this.callbacks)return;const l={url:t.responseURL,data:a,code:r};this.callbacks.onSuccess(l,n,e,t)}else{const i=a.loadPolicy.errorRetry;Zs(i,n.retry,!1,r)?this.retry(i):(Ia.error("".concat(r," while loading ").concat(e.url)),this.callbacks.onError({code:r,text:t.statusText},e,t,n))}}}loadtimeout(){var e;const t=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;if(Zs(t,this.stats.retry,!0))this.retry(t);else{Ia.warn("timeout while loading ".concat(this.context.url));const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=$s(e,n.retry),n.retry++,Ia.warn("".concat(status?"HTTP Status "+status:"Timeout"," while loading ").concat(t.url,", retrying ").concat(n.retry,"/").concat(e.maxNumRetry," in ").concat(this.retryDelay,"ms")),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&ku.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp("^".concat(e,":\\s*[\\d.]+\\s*$"),"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Lu=/(\d+)-(\d+)\/(\d+)/;class Ru{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Au,this.controller=new self.AbortController,this.stats=new Fa}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;null!=e&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const a=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(ba({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),i=n.onProgress,s="arraybuffer"===e.responseType,o=s?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=l&&Ea(l)?l:c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),t.timeout),self.fetch(this.request).then((a=>{this.response=this.loader=a;const o=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),n.onTimeout(r,e,this.response)}),c-(o-r.loading.start)),!a.ok){const{status:e,statusText:t}=a;throw new Cu(t||"fetch, bad network response",e,a)}return r.loading.first=o,r.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=Lu.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(Ea(e))return e}const n=e.get("Content-Length");if(n)return parseInt(n)}(a.headers)||r.total,i&&Ea(t.highWaterMark)?this.loadProgressively(a,r,e,t.highWaterMark,i):s?a.arrayBuffer():"json"===e.responseType?a.json():a.text()})).then((a=>{const{response:s}=this;self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=a[o];l&&(r.loaded=r.total=l);const c={url:s.url,data:a,code:s.status};i&&!Ea(t.highWaterMark)&&i(r,e,a,s),n.onSuccess(c,r,e,s)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),r.aborted)return;const a=t&&t.code||0,i=t?t.message:null;n.onError({code:a,text:i},e,t?t.details:null,r)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;const i=new uc,s=e.body.getReader(),o=()=>s.read().then((s=>{if(s.done)return i.dataLength&&a(t,n,i.flush(),e),Promise.resolve(new ArrayBuffer(0));const l=s.value,c=l.length;return t.loaded+=c,c<r||i.dataLength?(i.push(l),i.dataLength>=r&&a(t,n,i.flush(),e)):a(t,n,l,e),o()})).catch((()=>Promise.reject()));return o()}}function Au(e,t){return new self.Request(e.url,t)}class Cu extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Iu=/\s/,Du={newCue(e,t,n,r){const a=[];let i,s,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(i=r.rows[h],o=!0,l=0,c="",!i.isEmpty()){var d;for(let e=0;e<i.chars.length;e++)Iu.test(i.chars[e].uchar)&&o?l++:(c+=i.chars[e].uchar,o=!1);i.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=Wc(c.trim()),f=Zc(t,n,r);null!=e&&null!=(d=e.cues)&&d.getCueById(f)||(s=new u(t,n,r),s.id=f,s.line=h+1,s.align="left",s.position=10+Math.min(80,10*Math.floor(8*l/32)),a.push(s))}return e&&a.length&&(a.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),a.forEach((t=>ws(e,t)))),a}},_u=va(va({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:xu,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const t=e.config;this.bwEstimator=new cc(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Sa.FRAG_LOADING,this.onFragLoading,this),e.on(Sa.FRAG_LOADED,this.onFragLoaded,this),e.on(Sa.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Sa.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Sa.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(Sa.FRAG_LOADING,this.onFragLoading,this),e.off(Sa.FRAG_LOADED,this.onFragLoaded,this),e.off(Sa.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Sa.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Sa.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,t){var n;const r=t.frag;this.ignoreFragment(r)||(this.fragCurrent=r,this.partCurrent=null!=(n=t.part)?n:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,t){this.clearTimer()}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{total:r,bwEstimate:a}=t.stats;Ea(r)&&Ea(a)&&(this.lastLevelLoadSec=8*r/a),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{autoLevelEnabled:r,media:a}=n;if(!e||!a)return;const i=performance.now(),s=t?t.stats:e.stats,o=t?t.duration:e.duration,l=i-s.loading.start;if(s.aborted||s.loaded&&s.loaded===s.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!r||a.paused||!a.playbackRate||!a.readyState)return;const c=n.mainForwardBufferInfo;if(null===c)return;const u=this.bwEstimator.getEstimateTTFB(),d=Math.abs(a.playbackRate);if(l<=Math.max(u,o/(2*d)*1e3))return;const h=c.len/d;if(h>=2*o/d)return;const f=s.loading.first?s.loading.first-s.loading.start:-1,p=s.loaded&&f>-1,m=this.bwEstimator.getEstimate(),{levels:g,minAutoLevel:v}=n,y=g[e.level],b=s.total||Math.max(s.loaded,Math.round(o*y.maxBitrate/8));let E=l-f;E<1&&p&&(E=Math.min(l,8*s.loaded/m));const T=p?1e3*s.loaded/E:0,w=T?(b-s.loaded)/T:8*b/m+u/1e3;if(w<=h)return;const S=T?8*T:m;let k,x=Number.POSITIVE_INFINITY;for(k=e.level-1;k>v;k--){const e=g[k].maxBitrate;if(x=this.getTimeToLoadFrag(u/1e3,S,o*e,!g[k].details),x<h)break}x>=w||x>10*o||(n.nextLoadLevel=k,p?this.bwEstimator.sample(l-Math.min(u,f),s.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),Ia.warn("[abr] Fragment ".concat(e.sn).concat(t?" part "+t.index:""," of level ").concat(e.level," is loading too slowly;\n      Time to underbuffer: ").concat(h.toFixed(3)," s\n      Estimated load time for current fragment: ").concat(w.toFixed(3)," s\n      Estimated load time for down switch fragment: ").concat(x.toFixed(3)," s\n      TTFB estimate: ").concat(f,"\n      Current BW estimate: ").concat(Ea(m)?(m/1024).toFixed(3):"Unknown"," Kb/s\n      New BW estimate: ").concat((this.bwEstimator.getEstimate()/1024).toFixed(3)," Kb/s\n      Aborting and switching to level ").concat(k)),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(Sa.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:s}))}onFragLoaded(e,t){let{frag:n,part:r}=t;const a=r?r.stats:n.stats;if(n.type===ms&&this.bwEstimator.sampleTTFB(a.loading.first-a.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const e=r?r.duration:n.duration,t=this.hls.levels[n.level],i=(t.loaded?t.loaded.bytes:0)+a.loaded,s=(t.loaded?t.loaded.duration:0)+e;t.loaded={bytes:i,duration:s},t.realBitrate=Math.round(8*i/s)}if(n.bitrateTest){const e={stats:a,frag:n,part:r,id:n.type};this.onFragBuffered(Sa.FRAG_BUFFERED,e),n.bitrateTest=!1}}}onFragBuffered(e,t){const{frag:n,part:r}=t,a=null!=r&&r.stats.loaded?r.stats:n.stats;if(a.aborted)return;if(this.ignoreFragment(n))return;const i=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(i,a.loaded),a.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ms||"initSegment"===e.sn}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;let n=this.getNextABRAutoLevel();if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,n)&&t[e].loadError<=t[n].loadError)return e}return-1!==e&&(n=Math.min(e,n)),n}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:r,config:a,minAutoLevel:i,media:s}=n,o=t?t.duration:e?e.duration:0,l=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,u=n.mainForwardBufferInfo,d=(u?u.len:0)/l;let h=this.findBestLevel(c,i,r,d,a.abrBandWidthFactor,a.abrBandWidthUpFactor);if(h>=0)return h;Ia.trace("[abr] ".concat(d?"rebuffering expected":"buffer is empty",", finding optimal quality level"));let f=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay,p=a.abrBandWidthFactor,m=a.abrBandWidthUpFactor;if(!d){const e=this.bitrateTestDelay;if(e){f=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-e,Ia.trace("[abr] bitrate test took ".concat(Math.round(1e3*e),"ms, set first fragment max fetchDuration to ").concat(Math.round(1e3*f)," ms")),p=m=1}}return h=this.findBestLevel(c,i,r,d+f,p,m),Math.max(h,0)}findBestLevel(e,t,n,r,a,i){var s;const{fragCurrent:o,partCurrent:l,lastLoadedFragLevel:c}=this,{levels:u}=this.hls,d=u[c],h=!(null==d||null==(s=d.details)||!s.live),f=null==d?void 0:d.codecSet,p=l?l.duration:o?o.duration:0,m=this.bwEstimator.getEstimateTTFB()/1e3;let g=t,v=-1;for(let y=n;y>=t;y--){const t=u[y];if(!t||f&&t.codecSet!==f){t&&(g=Math.min(y,g),v=Math.max(y,v));continue}-1!==v&&Ia.trace("[abr] Skipped level(s) ".concat(g,"-").concat(v,' with CODECS:"').concat(u[v].attrs.CODECS,'"; not compatible with "').concat(d.attrs.CODECS,'"'));const n=t.details,s=(l?null==n?void 0:n.partTarget:null==n?void 0:n.averagetargetduration)||p;let o;o=y<=c?a*e:i*e;const b=u[y].maxBitrate,E=this.getTimeToLoadFrag(m,o,b*s,void 0===n);if(Ia.trace("[abr] level:".concat(y," adjustedbw-bitrate:").concat(Math.round(o-b)," avgDuration:").concat(s.toFixed(1)," maxFetchDuration:").concat(r.toFixed(1)," fetchDuration:").concat(E.toFixed(1))),o>b&&(0===E||!Ea(E)||h&&!this.bitrateTestDelay||E<r))return y}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}},bufferController:class{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:e,mediaSource:t}=this;Ia.log("[buffer-controller]: Media source opened"),e&&(e.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(Sa.MEDIA_ATTACHED,{media:e})),t&&t.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{Ia.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{Ia.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:e,_objectUrl:t}=this;e&&e.src!==t&&Ia.error("Media element src was set while attaching MediaSource (".concat(t," > ").concat(e.src,")"))},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Sa.BUFFER_RESET,this.onBufferReset,this),e.on(Sa.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Sa.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Sa.BUFFER_EOS,this.onBufferEos,this),e.on(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Sa.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Sa.FRAG_PARSED,this.onFragParsed,this),e.on(Sa.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Sa.BUFFER_RESET,this.onBufferReset,this),e.off(Sa.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Sa.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Sa.BUFFER_EOS,this.onBufferEos,this),e.off(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Sa.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Sa.FRAG_PARSED,this.onFragParsed,this),e.off(Sa.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new mc(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,Ia.log("".concat(this.bufferCodecEventsExpected," bufferCodec event(s) expected"))}onMediaAttaching(e,t){const n=this.media=t.media;if(n&&gc){const e=this.mediaSource=new gc;e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(e),this._objectUrl=n.src,n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(Ia.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(zu){Ia.warn("[buffer-controller]: onMediaDetaching: ".concat(zu.message," while calling endOfStream"))}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):Ia.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Sa.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];try{t&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[e]=void 0)}catch(zu){Ia.warn("[buffer-controller]: Failed to reset the ".concat(e," buffer"),zu)}})),this._initSourceBuffer()}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length;Object.keys(t).forEach((e=>{if(n){const n=this.tracks[e];if(n&&"function"===typeof n.buffer.changeType){const{id:r,codec:a,levelCodec:i,container:s,metadata:o}=t[e],l=(n.levelCodec||n.codec).replace(vc,"$1"),c=(i||a).replace(vc,"$1");if(l!==c){const t="".concat(s,";codecs=").concat(i||a);this.appendChangeType(e,t),Ia.log("[buffer-controller]: switching codec ".concat(l," to ").concat(c)),this.tracks[e]={buffer:n.buffer,codec:a,container:s,levelCodec:i,metadata:o,id:r}}}}else this.pendingTracks[e]=t[e]})),n||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())}appendChangeType(e,t){const{operationQueue:n}=this,r={execute:()=>{const r=this.sourceBuffer[e];r&&(Ia.log("[buffer-controller]: changing ".concat(e," sourceBuffer type to ").concat(t)),r.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{Ia.warn("[buffer-controller]: Failed to change ".concat(e," SourceBuffer type"),t)}};n.append(r,e)}onBufferAppending(e,t){const{hls:n,operationQueue:r,tracks:a}=this,{data:i,type:s,frag:o,part:l,chunkMeta:c}=t,u=c.buffering[s],d=self.performance.now();u.start=d;const h=o.stats.buffering,f=l?l.stats.buffering:null;0===h.start&&(h.start=d),f&&0===f.start&&(f.start=d);const p=a.audio;let m=!1;"audio"===s&&"audio/mpeg"===(null==p?void 0:p.container)&&(m=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=o.start,v={execute:()=>{if(u.executeStart=self.performance.now(),m){const e=this.sourceBuffer[s];if(e){const t=g-e.timestampOffset;Math.abs(t)>=.1&&(Ia.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to ".concat(g," (delta: ").concat(t,") sn: ").concat(o.sn,")")),e.timestampOffset=g)}}this.appendExecutor(i,s)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===h.first&&(h.first=e),f&&0===f.first&&(f.first=e);const{sourceBuffer:t}=this,n={};for(const r in t)n[r]=Io.getBuffered(t[r]);this.appendError=0,this.hls.trigger(Sa.BUFFER_APPENDED,{type:s,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:n})},onError:e=>{Ia.error("[buffer-controller]: Error encountered while trying to append to the ".concat(s," SourceBuffer"),e);const t={type:ka.MEDIA_ERROR,parent:o.type,details:xa.BUFFER_APPEND_ERROR,frag:o,part:l,chunkMeta:c,error:e,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=xa.BUFFER_FULL_ERROR:(this.appendError++,t.details=xa.BUFFER_APPEND_ERROR,this.appendError>n.config.appendErrorMaxRetry&&(Ia.error("[buffer-controller]: Failed ".concat(n.config.appendErrorMaxRetry," times to append segment in sourceBuffer")),t.fatal=!0)),n.trigger(Sa.ERROR,t)}};r.append(v,s)}onBufferFlushing(e,t){const{operationQueue:n}=this,r=e=>({execute:this.removeExecutor.bind(this,e,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(Sa.BUFFER_FLUSHED,{type:e})},onError:t=>{Ia.warn("[buffer-controller]: Failed to remove from ".concat(e," SourceBuffer"),t)}});t.type?n.append(r(t.type),t.type):this.getSourceBufferTypes().forEach((e=>{n.append(r(e),e)}))}onFragParsed(e,t){const{frag:n,part:r}=t,a=[],i=r?r.elementaryStreams:n.elementaryStreams;i[Ua]?a.push("audiovideo"):(i[Na]&&a.push("audio"),i[Ba]&&a.push("video"));0===a.length&&Ia.warn("Fragments must have at least one ElementaryStreamType set. type: ".concat(n.type," level: ").concat(n.level," sn: ").concat(n.sn)),this.blockBuffers((()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(Sa.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})}),a)}onFragChanged(e,t){this.flushBackBuffer()}onBufferEos(e,t){this.getSourceBufferTypes().reduce(((e,n)=>{const r=this.sourceBuffer[n];return!r||t.type&&t.type!==n||(r.ending=!0,r.ended||(r.ended=!0,Ia.log("[buffer-controller]: ".concat(n," sourceBuffer now EOS")))),e&&!(r&&!r.ended)}),!0)&&(Ia.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((e=>{const t=this.sourceBuffer[e];t&&(t.ending=!1)}));const{mediaSource:e}=this;e&&"open"===e.readyState?(Ia.log("[buffer-controller]: Calling mediaSource.endOfStream()"),e.endOfStream()):e&&Ia.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ".concat(e.readyState))})))}onLevelUpdated(e,t){let{details:n}=t;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:t,media:n,sourceBuffer:r}=this;if(!n||null===t)return;const a=this.getSourceBufferTypes();if(!a.length)return;const i=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(!Ea(i)||i<0)return;const s=n.currentTime,o=t.levelTargetDuration,l=Math.max(i,o),c=Math.floor(s/o)*o-l;a.forEach((n=>{const a=r[n];if(a){const r=Io.getBuffered(a);if(r.length>0&&c>r.start(0)){if(e.trigger(Sa.BACK_BUFFER_REACHED,{bufferEnd:c}),t.live)e.trigger(Sa.LIVE_BACK_BUFFER_REACHED,{bufferEnd:c});else if(a.ended&&r.end(r.length-1)-s<2*o)return void Ia.info("[buffer-controller]: Cannot flush ".concat(n," back buffer while SourceBuffer is in ended state"));e.trigger(Sa.BUFFER_FLUSHING,{startOffset:0,endOffset:c,type:n})}}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:e,hls:t,media:n,mediaSource:r}=this,a=e.fragments[0].start+e.totalduration,i=n.duration,s=Ea(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(Ia.log("[buffer-controller]: Media Source duration is set to Infinity"),r.duration=1/0,this.updateSeekableRange(e)):(a>s&&a>i||!Ea(i))&&(Ia.log("[buffer-controller]: Updating Media Source duration to ".concat(a.toFixed(3))),r.duration=a)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){const r=Math.max(0,n[0].start),a=Math.max(r,r+e.totalduration);t.setLiveSeekableRange(r,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,r=Object.keys(n).length;if(r&&!e||2===r){this.createSourceBuffers(n),this.pendingTracks={};const e=this.getSourceBufferTypes();if(e.length)this.hls.trigger(Sa.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((e=>{t.executeNext(e)}));else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const r in e)if(!t[r]){const a=e[r];if(!a)throw Error("source buffer exists for track ".concat(r,", however track does not"));const i=a.levelCodec||a.codec,s="".concat(a.container,";codecs=").concat(i);Ia.log("[buffer-controller]: creating sourceBuffer(".concat(s,")"));try{const e=t[r]=n.addSourceBuffer(s),o=r;this.addBufferListener(o,"updatestart",this._onSBUpdateStart),this.addBufferListener(o,"updateend",this._onSBUpdateEnd),this.addBufferListener(o,"error",this._onSBUpdateError),this.tracks[r]={buffer:e,codec:i,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(zu){Ia.error("[buffer-controller]: error while trying to add sourceBuffer: ".concat(zu.message)),this.hls.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:zu,mimeType:s})}}}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:t}=this;t.current(e).onComplete(),t.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){const n=new Error("".concat(e," SourceBuffer error"));Ia.error("[buffer-controller]: ".concat(n),t),this.hls.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.BUFFER_APPENDING_ERROR,error:n,fatal:!1});const r=this.operationQueue.current(e);r&&r.onError(t)}removeExecutor(e,t,n){const{media:r,mediaSource:a,operationQueue:i,sourceBuffer:s}=this,o=s[e];if(!r||!a||!o)return Ia.warn("[buffer-controller]: Attempting to remove from the ".concat(e," SourceBuffer, but it does not exist")),void i.shiftAndExecuteNext(e);const l=Ea(r.duration)?r.duration:1/0,c=Ea(a.duration)?a.duration:1/0,u=Math.max(0,t),d=Math.min(n,l,c);d>u&&!o.ending?(o.ended=!1,Ia.log("[buffer-controller]: Removing [".concat(u,",").concat(d,"] from the ").concat(e," SourceBuffer")),o.remove(u,d)):i.shiftAndExecuteNext(e)}appendExecutor(e,t){const{operationQueue:n,sourceBuffer:r}=this,a=r[t];if(!a)return Ia.warn("[buffer-controller]: Attempting to append to the ".concat(t," SourceBuffer, but it does not exist")),void n.shiftAndExecuteNext(t);a.ended=!1,a.appendBuffer(e)}blockBuffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSourceBufferTypes();if(!t.length)return Ia.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map((e=>n.appendBlocker(e)));Promise.all(r).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const r=this.sourceBuffer[e];if(!r)return;const a=n.bind(this,e);this.listeners[e].push({event:t,listener:a}),r.addEventListener(t,a)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:du,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=Ia.log.bind(Ia,"[info]:"),this.warn=Ia.warn.bind(Ia,"[warning]:"),this.error=Ia.error.bind(Ia,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Sa.ERROR,this.onError,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Sa.ERROR,this.onError,this),e.off(Sa.ERROR,this.onErrorOut,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(null==e?void 0:e.type)===ms?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,r;if(t.fatal)return;const a=this.hls,i=t.context;switch(t.details){case xa.FRAG_LOAD_ERROR:case xa.FRAG_LOAD_TIMEOUT:case xa.KEY_LOAD_ERROR:case xa.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case xa.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction={action:no,flags:io});case xa.FRAG_GAP:case xa.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=ro);case xa.LEVEL_EMPTY_ERROR:case xa.LEVEL_PARSING_ERROR:{var s,o;const e=t.parent===ms?t.level:a.loadLevel;t.details===xa.LEVEL_EMPTY_ERROR&&null!=(s=t.context)&&null!=(o=s.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case xa.LEVEL_LOAD_ERROR:case xa.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case xa.AUDIO_TRACK_LOAD_ERROR:case xa.AUDIO_TRACK_LOAD_TIMEOUT:case xa.SUBTITLE_LOAD_ERROR:case xa.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=a.levels[a.loadLevel];if(e&&(i.type===fs&&i.groupId===e.audioGroupId||i.type===ps&&i.groupId===e.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.loadLevel),t.errorAction.action=ro,void(t.errorAction.flags=so)}return;case xa.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=a.levels[a.loadLevel],n=null==e?void 0:e.attrs["HDCP-LEVEL"];n&&(t.errorAction={action:ro,flags:oo,hdcpLevel:n})}return;case xa.BUFFER_ADD_CODEC_ERROR:case xa.REMUX_ALLOC_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(r=t.level)?r:a.loadLevel));case xa.INTERNAL_EXCEPTION:case xa.BUFFER_APPENDING_ERROR:case xa.BUFFER_APPEND_ERROR:case xa.BUFFER_FULL_ERROR:case xa.LEVEL_SWITCH_ERROR:case xa.BUFFER_STALLED_ERROR:case xa.BUFFER_SEEK_OVER_HOLE:case xa.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:no,flags:io})}if(t.type===ka.KEY_SYSTEM_ERROR){const e=this.getVariantLevelIndex(t.frag);return t.levelRetry=!1,void(t.errorAction=this.getLevelSwitchAction(t,e))}}getPlaylistRetryOrSwitchAction(e,t){var n;const r=qs(this.hls.config.playlistLoadPolicy,e),a=this.playlistError++,i=null==(n=e.response)?void 0:n.code;if(Zs(r,a,Ys(e),i))return{action:ao,flags:io,retryConfig:r,retryCount:a};const s=this.getLevelSwitchAction(e,t);return r&&(s.retryConfig=r,s.retryCount=a),s}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:a,keyLoadPolicy:i}=t.config,s=qs(e.details.startsWith("key")?i:a,e),o=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(r){var l;e.details!==xa.FRAG_GAP&&r.fragmentError++;const t=null==(l=e.response)?void 0:l.code;if(Zs(s,o,Ys(e),t))return{action:ao,flags:io,retryConfig:s,retryCount:o}}const c=this.getLevelSwitchAction(e,n);return s&&(c.retryConfig=s,c.retryCount=o),c}getLevelSwitchAction(e,t){const n=this.hls;null!==t&&void 0!==t||(t=n.loadLevel);const r=this.hls.levels[t];if(r&&(r.loadError++,n.autoLevelEnabled)){var a,i;let t=-1;const{levels:s,loadLevel:o,minAutoLevel:l,maxAutoLevel:c}=n,u=null==(a=e.frag)?void 0:a.type,{type:d,groupId:h}=null!=(i=e.context)?i:{};for(let n=s.length;n--;){const a=(n+o)%s.length;if(a!==o&&a>=l&&a<=c&&0===s[a].loadError){const n=s[a];if(e.details===xa.FRAG_GAP&&e.frag){const t=s[a].details;if(t){const n=Js(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(d===fs&&h===n.audioGroupId||d===ps&&h===n.textGroupId)continue;if(u===gs&&r.audioGroupId===n.audioGroupId||u===vs&&r.textGroupId===n.textGroupId)continue}t=a;break}}if(t>-1&&n.loadLevel!==t)return e.levelRetry=!0,this.playlistError=0,{action:ro,flags:io,nextAutoLevel:t}}return{action:ro,flags:so}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case no:break;case ro:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===xa.FRAG_GAP||(t.fatal=!0)}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:a,nextAutoLevel:i}=n;switch(r){case io:this.switchLevel(e,i);break;case so:n.resolved||(n.resolved=this.redundantFailover(e));break;case oo:a&&(t.maxHdcpLevel=Os[Os.indexOf(a)-1],n.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'.concat(t.maxHdcpLevel,'" or lower'))}n.resolved||this.switchLevel(e,i)}switchLevel(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level ".concat(t," after ").concat(e.details)),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:t,penalizedRenditions:n}=this,r=e.parent===ms?e.level:t.loadLevel,a=t.levels[r],i=a.url.length,s=e.frag?e.frag.urlId:a.urlId;a.urlId!==s||e.frag&&!a.details||this.penalizeRendition(a,e);for(let o=1;o<i;o++){const l=(s+o)%i,c=n[l];if(!c||lo(c,e,n[s]))return this.warn("Switching to Redundant Stream ".concat(l+1,"/").concat(i,': "').concat(a.url[l],'" after ').concat(e.details)),this.playlistError=0,t.levels.forEach((e=>{e.urlId=l})),t.nextLoadLevel=r,!0}return!1}penalizeRendition(e,t){const{penalizedRenditions:n}=this,r=n[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};r.lastErrorPerfMs=performance.now(),r.errors.push(t),r.details=e.details,n[e.urlId]=r}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,a=n-this.lastDroppedFrames,i=t-this.lastDecodedFrames,s=1e3*a/e,o=this.hls;if(o.trigger(Sa.FPS_DROP,{currentDropped:a,currentDecoded:i,totalDroppedFrames:n}),s>0&&a>o.config.fpsDroppedMonitoringThreshold*i){let e=o.currentLevel;Ia.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(Sa.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:ni,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Du,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends el{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",vs),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Sa.ERROR,this.onError,this),e.on(Sa.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Sa.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Sa.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Sa.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Sa.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Sa.ERROR,this.onError,this),e.off(Sa.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Sa.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Sa.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Sa.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Sa.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=Go,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragPrevious=n,this.state=Go,!r)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let i;const s=n.start;for(let l=0;l<a.length;l++)if(s>=a[l].start&&s<=a[l].end){i=a[l];break}const o=n.start+n.duration;i?i.end=o:(i={start:s,end:o},a.push(i)),this.fragmentTracker.fragBuffered(n)}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}})),this.fragmentTracker.removeFragmentsInRange(n,e,vs)}}onFragBuffered(e,t){var n;this.loadedmetadata||t.frag.type!==ms||null!=(n=this.media)&&n.buffered.length&&(this.loadedmetadata=!0)}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===vs&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==zo&&(this.state=Go))}onSubtitleTracksUpdated(e,t){let{subtitleTracks:n}=t;dc(this.levels,n)?this.levels=n.map((e=>new Us(e))):(this.tracksBuffered=[],this.levels=n.map((e=>{const t=new Us(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,vs),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){if(this.currentTrackId=t.id,!this.levels.length||-1===this.currentTrackId)return void this.clearInterval();const n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{details:r,id:a}=t,{currentTrackId:i,levels:s}=this;if(!s.length)return;const o=s[i];if(a>=s.length||a!==i||!o)return;this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(r.live||null!=(n=o.details)&&n.live){const e=this.mainDetails;if(r.deltaUpdateFailed||!e)return;const t=e.fragments[0];o.details?(l=this.alignPlaylists(r,o.details),0===l&&t&&(l=t.start,Vs(r,l))):r.hasProgramDateTime&&e.hasProgramDateTime?(Fo(r,e),l=r.fragments[0].start):t&&(l=t.start,Vs(r,l))}if(o.details=r,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(o.details,l),this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===Go){Js(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&r&&r.key&&r.iv&&"AES-128"===r.method){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).catch((e=>{throw a.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((n=>{const r=performance.now();a.trigger(Sa.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})})).catch((e=>{this.warn("".concat(e.name,": ").concat(e.message)),this.state=Go}))}}doTick(){if(this.media){if(this.state===Go){const{currentTrackId:e,levels:t}=this,n=t[e];if(!t.length||!n||!n.details)return;const{config:r}=this,a=this.getLoadPosition(),i=Io.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,r.maxBufferHole),{end:s,len:o}=i,l=this.getFwdBufferInfo(this.media,ms),c=n.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+c.levelTargetDuration)return;const u=c.fragments,d=u.length,h=c.edge;let f=null;const p=this.fragPrevious;if(s<h){const e=r.maxFragLookUpTolerance,t=s>h-e?0:e;f=Js(p,u,Math.max(u[0].start,s),t),!f&&p&&p.start<u[0].start&&(f=u[0])}else f=u[d-1];if(!f)return;if(f=this.mapToInitFragWhenRequired(f),"initSegment"!==f.sn){const e=u[f.sn-c.startSN-1];e&&e.cc===f.cc&&this.fragmentTracker.getState(e)===mo&&(f=e)}this.fragmentTracker.getState(f)===mo&&this.loadFragment(f,n,s)}}else this.state=Go}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new fc(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends co{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Sa.LEVEL_LOADING,this.onLevelLoading,this),e.on(Sa.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Sa.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Sa.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Sa.LEVEL_LOADING,this.onLevelLoading,this),e.off(Sa.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Sa.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Sa.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);pc(this.media.textTracks).forEach((e=>{Ss(e)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,details:r}=t,{trackId:a}=this,i=this.tracksInGroup[a];if(!i)return void this.warn("Invalid subtitle track id ".concat(n));const s=i.details;i.details=t.details,this.log("subtitle track ".concat(n," loaded [").concat(r.startSN,"-").concat(r.endSN,"]")),n===this.trackId&&this.playlistLoaded(n,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.textGroupIds)return;const n=t.textGroupIds[t.urlId],r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==n){const e=this.tracks.filter((e=>!n||e.groupId===n));this.tracksInGroup=e;const t=this.findTrackId(null==r?void 0:r.name)||this.findTrackId();this.groupId=n||null;const a={subtitleTracks:e};this.log("Updating subtitle tracks, ".concat(e.length,' track(s) found in "').concat(n,'" group-id')),this.hls.trigger(Sa.SUBTITLE_TRACKS_UPDATED,a),-1!==t&&this.setSubtitleTrack(t,r)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId,r)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1}onError(e,t){!t.fatal&&t.context&&t.context.type===ps&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1;const t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const r=t.id,a=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(n){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(n))}this.log("Loading subtitle playlist for id ".concat(r)),this.hls.trigger(Sa.SUBTITLE_TRACK_LOADING,{url:i,id:r,groupId:a,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:t,trackId:n}=this;if(!t)return;const r=pc(t.textTracks),a=r.filter((e=>e.groupId===this.groupId));if(-1===e)[].slice.call(r).forEach((e=>{e.mode="disabled"}));else{const e=a[n];e&&(e.mode="disabled")}const i=a[e];i&&(i.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,t){var n;const r=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(n=r[e])&&n.details)||e<-1||e>=r.length)return;this.clearTimer();const a=r[e];if(this.log("Switching to subtitle-track ".concat(e)+(a?' "'.concat(a.name,'" lang:').concat(a.lang," group:").concat(a.groupId):"")),this.trackId=e,a){const{id:e,groupId:n="",name:r,type:i,url:s}=a;this.hls.trigger(Sa.SUBTITLE_TRACK_SWITCH,{id:e,groupId:n,name:r,type:i,url:s});const o=this.switchParams(a.url,null==t?void 0:t.details);this.loadPlaylist(o)}else this.hls.trigger(Sa.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const t=pc(this.media.textTracks);for(let n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},timelineController:class{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const e=new Nc(this,"textTrack1"),t=new Nc(this,"textTrack2"),n=new Nc(this,"textTrack3"),r=new Nc(this,"textTrack4");this.cea608Parser1=new Oc(1,e,t),this.cea608Parser2=new Oc(3,n,r)}e.on(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Sa.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Sa.FRAG_LOADING,this.onFragLoading,this),e.on(Sa.FRAG_LOADED,this.onFragLoaded,this),e.on(Sa.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Sa.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Sa.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Sa.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Sa.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Sa.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Sa.FRAG_LOADING,this.onFragLoading,this),e.off(Sa.FRAG_LOADED,this.onFragLoaded,this),e.off(Sa.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Sa.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Sa.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Sa.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Sa.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,t,n,r,a){let i=!1;for(let u=a.length;u--;){const e=a[u],r=(s=e[0],o=e[1],l=t,c=n,Math.min(o,c)-Math.max(s,l));if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),i=!0,r/(n-t)>.5))return}var s,o,l,c;if(i||a.push([t,n]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,t,n,r)}else{const a=this.Cues.newCue(null,t,n,r);this.hls.trigger(Sa.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:a,timescale:i}=t;const{unparsedVttFrags:s}=this;"main"===r&&(this.initPTS[n.cc]={baseTime:a,timescale:i}),s.length&&(this.unparsedVttFrags=[],s.forEach((e=>{this.onFragLoaded(Sa.FRAG_LOADED,e)})))}getExistingTrack(e){const{media:t}=this;if(t)for(let n=0;n<t.textTracks.length;n++){const r=t.textTracks[n];if(r[e])return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:a,languageCode:i}=t[e],s=this.getExistingTrack(e);if(s)n[e]=s,Ss(n[e]),Ts(n[e],r);else{const t=this.createTextTrack("captions",a,i);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(Sa.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>{Ss(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)Ss(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some((e=>e.textCodec===Jc));if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(dc(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media?this.media.textTracks:null;this.tracks.forEach(((t,n)=>{let r;if(e&&n<e.length){let n=null;for(let r=0;r<e.length;r++)if(uu(e[r],t)){n=e[r];break}n&&(r=n)}if(r)Ss(r);else{const e=this._captionsOrSubtitlesFromCharacteristics(t);r=this.createTextTrack(e,t.name,t.lang),r&&(r.mode="disabled")}r&&(r.groupId=t.groupId,this.textTracks.push(r))}))}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(Sa.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),n=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&n)return"captions"}return"subtitles"}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n="textTrack".concat(t[1]),r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){const{cea608Parser1:n,cea608Parser2:r,lastSn:a,lastPartIndex:i}=this;if(this.enabled&&n&&r&&t.frag.type===ms){var s,o;const e=t.frag.sn,l=null!=(s=null==t||null==(o=t.part)?void 0:o.index)?s:-1;e===a+1||e===a&&l===i+1||(n.reset(),r.reset()),this.lastSn=e,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===vs)if(r.byteLength){const e=n.decryptdata,a="stats"in t;if(null==e||!e.encrypted||a){const e=this.tracks[n.level],a=this.vttCCs;a[n.cc]||(a[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===Jc?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(Sa.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;ru(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),n.trigger(Sa.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{Ia.log("Failed to parse IMSC1: ".concat(t)),n.trigger(Sa.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:a,unparsedVttFrags:i}=this,s=a.length-1;if(!a[n.cc]&&-1===s)return void i.push(e);const o=this.hls;Qc(null!=(t=n.initSegment)&&t.data?Oi(n.initSegment.data,new Uint8Array(r)):r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,(e=>{this._appendCues(e,n.level),o.trigger(Sa.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})}),(t=>{const a="Missing initPTS for VTT MPEGTS"===t.message;a?i.push(e):this._fallbackToIMSC1(n,r),Ia.log("Failed to parse VTT cue: ".concat(t)),a&&s>n.cc||o.trigger(Sa.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})}))}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||ru(t,this.initPTS[e.cc],(()=>{n.textCodec=Jc,this._parseIMSC1(e,t)}),(()=>{n.textCodec="wvtt"}))}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach((e=>ws(n,e)))}else{const r=this.tracks[t];if(!r)return;const a=r.default?"default":"subtitles"+t;n.trigger(Sa.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===vs&&this.onFragLoaded(Sa.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){const{cea608Parser1:n,cea608Parser2:r}=this;if(!this.enabled||!n||!r)return;const{frag:a,samples:i}=t;if(a.type!==ms||"NONE"!==this.closedCaptionsForLevel(a))for(let s=0;s<i.length;s++){const e=i[s].bytes;if(e){const t=this.extractCea608Data(e);n.addData(i[s].pts,t[0]),r.addData(i[s].pts,t[1])}}}onBufferFlushing(e,t){let{startOffset:n,endOffset:r,endOffsetSubtitles:a,type:i}=t;const{media:s}=this;if(s&&!(s.currentTime<r)){if(!i||"video"===i){const{captionsTracks:e}=this;Object.keys(e).forEach((t=>ks(e[t],n,r)))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==a){const{textTracks:e}=this;Object.keys(e).forEach((t=>ks(e[t],n,a)))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let a=0;a<n;a++){const n=e[r++],a=127&e[r++],i=127&e[r++];if(0===a&&0===i)continue;if(0!==(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(a),t[e].push(i))}}return t}},audioStreamController:class extends el{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",gs),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Sa.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Sa.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Sa.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Sa.ERROR,this.onError,this),e.on(Sa.BUFFER_RESET,this.onBufferReset,this),e.on(Sa.BUFFER_CREATED,this.onBufferCreated,this),e.on(Sa.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Sa.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Sa.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(Sa.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Sa.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Sa.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Sa.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Sa.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Sa.ERROR,this.onError,this),e.off(Sa.BUFFER_RESET,this.onBufferReset,this),e.off(Sa.BUFFER_CREATED,this.onBufferCreated,this),e.off(Sa.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Sa.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Sa.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,t){let{frag:n,id:r,initPTS:a,timescale:i}=t;if("main"===r){const e=n.cc;this.initPTS[n.cc]={baseTime:a,timescale:i},this.log("InitPTS for cc: ".concat(e," found from main: ").concat(a)),this.videoTrackCC=e,this.state===Qo&&this.tick()}}startLoad(e){if(!this.levels)return this.startPosition=e,void(this.state=zo);const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @".concat(t.toFixed(3))),e=t,this.state=Go):(this.loadedmetadata=!1,this.state=Yo),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case Go:this.doTickIdle();break;case Yo:{var e;const{levels:t,trackId:n}=this,r=null==t||null==(e=t[n])?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=Qo}break}case Wo:{var t;const e=performance.now(),n=this.retryDate;(!n||e>=n||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Go);break}case Qo:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:a}=e;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Ko;const e={frag:t,part:n,payload:r.flush(),networkDetails:null};this._handleFragmentLoadProgress(e),a&&super._handleFragmentLoadComplete(e)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc (".concat(t.cc,") cancelled because video is at cc ").concat(this.videoTrackCC)),this.clearWaitingFragment();else{const e=this.getLoadPosition(),n=Io.bufferInfo(this.mediaBuffer,e,this.config.maxBufferHole);eo(n.end,this.config.maxFragLookUpTolerance,t)<0&&(this.log("Waiting fragment cc (".concat(t.cc,") @ ").concat(t.start," cancelled because another fragment at ").concat(n.end," is needed")),this.clearWaitingFragment())}}else this.state=Go}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Go)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:r}=this,a=e.config;if(null==t||!t[r])return;if(!n&&(this.startFragRequested||!a.startFragPrefetch))return;const i=t[r],s=i.details;if(!s||s.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(s))return void(this.state=Yo);const o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,Na,gs));const l=this.getFwdBufferInfo(o,gs);if(null===l)return;const{bufferedTrack:c,switchingTrack:u}=this;if(!u&&this._streamEnded(l,s))return e.trigger(Sa.BUFFER_EOS,{type:"audio"}),void(this.state=Xo);const d=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ms),h=l.len,f=this.getMaxBufferLength(null==d?void 0:d.len);if(h>=f&&!u)return;const p=s.fragments[0].start;let m=l.end;if(u&&n){const e=this.getLoadPosition();c&&u.attrs!==c.attrs&&(m=e),s.PTSKnown&&e<p&&(l.end>p||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}let g=this.getNextFragment(m,s),v=!1;if(g&&this.isLoopLoading(g,m)&&(v=!!g.gap,g=this.getNextFragmentLoopLoading(g,s,l,ms,f)),!g)return void(this.bufferFlushed=!0);const y=d&&g.start>d.end+s.targetduration;if(y||(null==d||!d.len)&&l.len){const e=this.getAppendedFrag(g.start,ms);if(null===e)return;if(v||(v=!!e.gap||!!y&&0===d.len),y&&!v||v&&l.nextStart&&l.nextStart<e.end)return}this.loadFragment(g,i,m)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,t){let{audioTracks:n}=t;this.resetTransmuxer(),this.levels=n.map((e=>new Us(e)))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=Go):(this.switchingTrack=null,this.bufferedTrack=t,this.state=zo),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(Sa.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:r}=this,{details:a,id:i}=t;if(!r)return void this.warn("Audio tracks were reset while loading level ".concat(i));this.log("Track ".concat(i," loaded [").concat(a.startSN,",").concat(a.endSN,"]").concat(a.lastPartSn?"[part-".concat(a.lastPartSn,"-").concat(a.lastPartIndex,"]"):"",",duration:").concat(a.totalduration));const s=r[i];let o=0;if(a.live||null!=(n=s.details)&&n.live){this.checkLiveUpdate(a);const e=this.mainDetails;if(a.deltaUpdateFailed||!e)return;!s.details&&a.hasProgramDateTime&&e.hasProgramDateTime?(Fo(a,e),o=a.fragments[0].start):o=this.alignPlaylists(a,s.details)}s.details=a,this.levelLastLoaded=i,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,o),this.state!==Yo||this.waitForCdnTuneIn(a)||(this.state=Go),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:a}=e,{config:i,trackId:s,levels:o}=this;if(!o)return void this.warn("Audio tracks were reset while fragment load was in progress. Fragment ".concat(n.sn," of level ").concat(n.level," will not be buffered"));const l=o[s];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const u=i.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new ic(this.hls,gs,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],f=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,i=-1!==t,s=new Do(n.level,n.sn,n.stats.chunkCount,a.byteLength,t,i);d.push(a,f,u,"",n,r,c.totalduration,e,s,h)}else{this.log("Unknown video PTS for cc ".concat(n.cc,", waiting for video PTS before demuxing audio frag ").concat(n.sn," of [").concat(c.startSN," ,").concat(c.endSN,"],track ").concat(s));const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new uc,complete:!1};e.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=Qo}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===gs)if(this.fragContextChanged(n))this.warn("Fragment ".concat(n.sn).concat(r?" p: "+r.index:""," of level ").concat(n.level," finished buffering, but was aborted. state: ").concat(this.state,", audioSwitch: ").concat(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==n.sn){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(Sa.AUDIO_TRACK_SWITCHED,va({},e)))}this.fragBufferedComplete(n,r)}else if(!this.loadedmetadata&&n.type===ms){const e=this.videoBuffer||this.media;if(e){Io.getBuffered(e).length&&(this.loadedmetadata=!0)}}}onError(e,t){var n;if(t.fatal)this.state=Zo;else switch(t.details){case xa.FRAG_GAP:case xa.FRAG_PARSING_ERROR:case xa.FRAG_DECRYPT_ERROR:case xa.FRAG_LOAD_ERROR:case xa.FRAG_LOAD_TIMEOUT:case xa.KEY_LOAD_ERROR:case xa.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(gs,t);break;case xa.AUDIO_TRACK_LOAD_ERROR:case xa.AUDIO_TRACK_LOAD_TIMEOUT:case xa.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Yo||(null==(n=t.context)?void 0:n.type)!==fs||(this.state=Go);break;case xa.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case xa.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushed(e,t){let{type:n}=t;n===Na&&(this.bufferFlushed=!0,this.state===Xo&&(this.state=Go))}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:a,chunkMeta:i}=e,s=this.getCurrentContext(i);if(!s)return void this.resetWhenMissingContext(i);const{frag:o,part:l,level:c}=s,{details:u}=c,{audio:d,text:h,id3:f,initSegment:p}=a;if(!this.fragContextChanged(o)&&u){if(this.state=qo,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){const e=o.initSegment||o;this._bufferInitSegment(p.tracks,e,i),r.trigger(Sa.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=d;l&&(l.elementaryStreams[Na]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(Na,e,t,n,r),this.bufferFragmentData(d,o,l,i)}if(null!=f&&null!=(t=f.samples)&&t.length){const e=ba({id:n,frag:o,details:u},f);r.trigger(Sa.FRAG_PARSING_METADATA,e)}if(h){const e=ba({id:n,frag:o,details:u},h);r.trigger(Sa.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n){if(this.state!==qo)return;e.video&&delete e.video;const r=e.audio;if(!r)return;r.levelCodec=r.codec,r.id="audio",this.log("Init audio buffer, container:".concat(r.container,", codecs[parsed]=[").concat(r.codec,"]")),this.hls.trigger(Sa.BUFFER_CODECS,e);const a=r.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:a};this.hls.trigger(Sa.BUFFER_APPENDING,e)}this.tick()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var a;(this.fragCurrent=e,this.switchingTrack||r===mo||r===vo)?"initSegment"===e.sn?this._loadInitSegment(e,t):null!=(a=t.details)&&a.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter ".concat(e.cc," of live stream before loading audio fragment ").concat(e.sn," of level ").concat(this.trackId)),this.state=Qo):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:t,media:n,bufferedTrack:r}=this,a=null==r?void 0:r.attrs,i=e.attrs;n&&a&&(a.CHANNELS!==i.CHANNELS||a.NAME!==i.NAME||a.LANGUAGE!==i.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Sa.AUDIO_TRACK_SWITCHED,va({},e))}},audioTrackController:class extends co{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Sa.LEVEL_LOADING,this.onLevelLoading,this),e.on(Sa.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Sa.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Sa.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Sa.LEVEL_LOADING,this.onLevelLoading,this),e.off(Sa.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Sa.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Sa.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:a}=t,i=this.tracksInGroup[n];if(!i||i.groupId!==r)return void this.warn("Track with id:".concat(n," and group:").concat(r," not found in active group ").concat(i.groupId));const s=i.details;i.details=t.details,this.log("audio-track ".concat(n,' "').concat(i.name,'" lang:').concat(i.lang," group:").concat(r," loaded [").concat(a.startSN,"-").concat(a.endSN,"]")),n===this.trackId&&this.playlistLoaded(n,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(null==t||!t.audioGroupIds)return;const n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n||null;const e=this.tracks.filter((e=>!n||e.groupId===n));this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),this.tracksInGroup=e;const t={audioTracks:e};this.log("Updating audio tracks, ".concat(e.length," track(s) found in group:").concat(n)),this.hls.trigger(Sa.AUDIO_TRACKS_UPDATED,t),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,t){!t.fatal&&t.context&&t.context.type===fs&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn("Invalid id passed to audio-track controller");this.clearTimer();const n=this.currentTrack;t[this.trackId];const r=t[e],{groupId:a,name:i}=r;if(this.log("Switching to audio-track ".concat(e,' "').concat(i,'" lang:').concat(r.lang," group:").concat(a)),this.trackId=e,this.currentTrack=r,this.selectDefaultTrack=!1,this.hls.trigger(Sa.AUDIO_TRACK_SWITCHING,va({},r)),r.details&&!r.details.live)return;const s=this.switchParams(r.url,null==n?void 0:n.details);this.loadPlaylist(s)}selectInitialTrack(){const e=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==t)this.setAudioTrack(t);else{const t=new Error("No track found for running audio group-ID: ".concat(this.groupId," track count: ").concat(e.length));this.warn(t.message),this.hls.trigger(Sa.ERROR,{type:ka.MEDIA_ERROR,details:xa.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if(!this.selectDefaultTrack||r.default){if(!e||void 0!==e.attrs["STABLE-RENDITION-ID"]&&e.attrs["STABLE-RENDITION-ID"]===r.attrs["STABLE-RENDITION-ID"])return r.id;if(e.name===r.name&&e.lang===r.lang)return r.id}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const r=t.id,a=t.groupId;let i=t.url;if(e)try{i=e.addDirectives(i)}catch(n){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(n))}this.log("loading audio-track playlist ".concat(r,' "').concat(t.name,'" lang:').concat(t.lang," group:").concat(a)),this.clearTimer(),this.hls.trigger(Sa.AUDIO_TRACK_LOADING,{url:i,id:r,groupId:a,deliveryDirectives:e||null})}}},emeController:fu,cmcdController:Tu,contentSteeringController:class{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=Ia.log.bind(Ia,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Sa.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Sa.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Sa.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Sa.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Sa.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Sa.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===ro&&n.flags===so){let e=this.pathwayPriority;const t=this.pathwayId;this.penalizedPathways[t]||(this.penalizedPathways[t]=performance.now()),!e&&this.levels&&(e=this.levels.reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])),e&&e.length>1&&(this.updatePathwayPriority(e),n.resolved=this.pathwayId!==t)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log("No levels found in Pathway ".concat(this.pathwayId,'. Setting initial Pathway to "').concat(n,'"')),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length?(this.log("Found ".concat(t.length,"/").concat(e.length,' levels in Pathway "').concat(this.pathwayId,'"')),t):e}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this.pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach((e=>{r-n[e]>3e5&&delete n[e]}));for(let a=0;a<e.length;a++){const r=e[a];if(n[r])continue;if(r===this.pathwayId)return;const i=this.hls.nextLoadLevel,s=this.hls.levels[i];if(t=this.getLevelsForPathway(r),t.length>0){this.log('Setting Pathway to "'.concat(r,'"')),this.pathwayId=r,this.hls.trigger(Sa.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[i];s&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==s.bitrate&&this.log("Unstable Pathways change from bitrate ".concat(s.bitrate," to ").concat(e.bitrate)),this.hls.nextLoadLevel=i);break}}}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach((e=>{const{ID:a,"BASE-ID":i,"URI-REPLACEMENT":s}=e;if(t.some((e=>e.pathwayId===a)))return;const o=this.getLevelsForPathway(i).map((e=>{const t=ba({},e);t.details=void 0,t.url=Su(e.uri,e.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",s);const i=new Pa(e.attrs);i["PATHWAY-ID"]=a;const o=i.AUDIO&&"".concat(i.AUDIO,"_clone_").concat(a),l=i.SUBTITLES&&"".concat(i.SUBTITLES,"_clone_").concat(a);o&&(n[i.AUDIO]=o,i.AUDIO=o),l&&(r[i.SUBTITLES]=l,i.SUBTITLES=l),t.attrs=i;const c=new Us(t);return fo(c,"audio",o),fo(c,"text",l),c}));t.push(...o),wu(this.audioTracks,n,s,a),wu(this.subtitleTracks,r,s,a)}))}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(c){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: ".concat(e))}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const a={responseType:"json",url:r.href},i=t.steeringManifestLoadPolicy.default,s=i.errorRetry||i.timeoutRetry||{},o={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(e,t,n,a)=>{this.log('Loaded steering manifest: "'.concat(r,'"'));const i=e.data;if(1!==i.VERSION)return void this.log("Steering VERSION ".concat(i.VERSION," not supported!"));this.updated=performance.now(),this.timeToLoad=i.TTL;const{"RELOAD-URI":s,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=i;if(s)try{this.uri=new self.URL(s,r).href}catch(c){return this.enabled=!1,void this.log("Failed to parse Steering Manifest RELOAD-URI: ".concat(s))}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log("Error loading steering manifest: ".concat(e.code," ").concat(e.text," (").concat(t.url,")")),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log("Steering manifest ".concat(t.url," no longer available"));let a=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,a);else{const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(a=1e3*parseFloat(t))}this.log("Steering manifest ".concat(t.url," rate limited"))}},onTimeout:(e,t,n)=>{this.log("Timeout loading steering manifest (".concat(t.url,")")),this.scheduleRefresh(this.uri||t.url)}};this.log("Requesting steering manifest: ".concat(r)),this.loader.load(a,o,l)}scheduleRefresh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*this.timeToLoad;self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout((()=>{this.loadSteeringManifest(e)}),t)}}});function Pu(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(Pu):Object.keys(e).reduce(((t,n)=>(t[n]=Pu(e[n]),t)),{}):e}function Ou(e){const t=e.loader;if(t!==Ru&&t!==xu)Ia.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(Hu){}return!1})()&&(e.loader=Ru,e.progressive=!0,e.enableSoftwareAES=!0,Ia.log("[config]: Progressive streaming enabled, using FetchLoader"))}}class Mu{static get version(){return"1.4.14"}static isSupported(){return function(){const e=qi();if(!e)return!1;const t=tl(),n=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!n&&!!r}()}static get Events(){return Sa}static get ErrorTypes(){return ka}static get ErrorDetails(){return xa}static get DefaultConfig(){return Mu.defaultConfig?Mu.defaultConfig:_u}static set DefaultConfig(e){Mu.defaultConfig=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new rc,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,function(e,t){if(self.console&&!0===e||"object"===typeof e){Ca(e,"debug","log","info","warn","error");try{Aa.log('Debug logs enabled for "'.concat(t,'" in hls.js version ',"1.4.14"))}catch(Hu){Aa=Ra}}else Aa=Ra}(e.debug||!1,"Hls instance");const t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Pu(e),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const a="".concat("level"===e?"playlist":e,"LoadPolicy"),i=void 0===t[a],s=[];r.forEach((r=>{const o="".concat(e,"Loading").concat(r),l=t[o];if(void 0!==l&&i){s.push(o);const e=n[a].default;switch(t[a]={default:e},r){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),s.length&&Ia.warn('hls.js config: "'.concat(s.join('", "'),'" setting(s) are deprecated, use "').concat(a,'": ').concat(JSON.stringify(t[a])))})),va(va({},n),t)}(Mu.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&Ou(t);const{abrController:n,bufferController:r,capLevelController:a,errorController:i,fpsController:s}=t,o=new i(this),l=this.abrController=new n(this),c=this.bufferController=new r(this),u=this.capLevelController=new a(this),d=new s(this),h=new Es(this),f=new _s(this),p=t.contentSteeringController,m=p?new p(this):null,g=this.levelController=new ho(this,m),v=new bo(this),y=new Ro(this.config),b=this.streamController=new oc(this,v,y);u.setStreamController(b),d.setStreamController(b);const E=[h,g,b];m&&E.splice(1,0,m),this.networkControllers=E;const T=[l,c,u,d,f,v];this.audioTrackController=this.createController(t.audioTrackController,E);const w=t.audioStreamController;w&&E.push(new w(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,E);const S=t.subtitleStreamController;S&&E.push(new S(this,v,y)),this.createController(t.timelineController,T),y.emeController=this.emeController=this.createController(t.emeController,T),this.cmcdController=this.createController(t.cmcdController,T),this.latencyController=this.createController(Ps,T),this.coreComponents=T,E.push(o);const k=o.onErrorOut;"function"===typeof k&&this.on(Sa.ERROR,k,o)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.on(e,t,n)}once(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=arguments.length>3?arguments[3]:void 0;this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(Hu){Ia.error("An internal error happened while handling event "+e+'. Error message: "'+Hu.message+'". Here is a stacktrace:',Hu),this.trigger(Sa.ERROR,{type:ka.OTHER_ERROR,details:xa.INTERNAL_EXCEPTION,fatal:!1,event:e,error:Hu})}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){Ia.log("destroy"),this.trigger(Sa.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){Ia.log("attachMedia"),this._media=e,this.trigger(Sa.MEDIA_ATTACHING,{media:e})}detachMedia(){Ia.log("detachMedia"),this.trigger(Sa.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,r=this.url=ma.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});Ia.log("loadSource:".concat(r)),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Sa.MANIFEST_LOADING,{url:e})}startLoad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;Ia.log("startLoad(".concat(e,")")),this.networkControllers.forEach((t=>{t.startLoad(e)}))}stopLoad(){Ia.log("stopLoad"),this.networkControllers.forEach((e=>{e.stopLoad()}))}swapAudioCodec(){Ia.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Ia.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.levelController.removeLevel(e,t)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){Ia.log("set currentLevel:".concat(e)),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){Ia.log("set nextLevel:".concat(e)),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){Ia.log("set loadLevel:".concat(e)),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){Ia.log("set firstLevel:".concat(e)),this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){Ia.log("set startLevel:".concat(e)),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(Ia.log("set autoLevelCapping:".concat(e)),this._autoLevelCapping=e)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Os.indexOf(e)>-1&&(this._maxHdcpLevel=e)}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&e&&e.length?e.length-1:t,n)for(let a=r;a--;){const t=e[a].attrs["HDCP-LEVEL"];if(t&&t<=n)return a}return r}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}function Fu(e){let{option:n,getInstance:r,onInstanceChange:a,...i}=e;const s=(0,t.useRef)(),[o,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const e=new(da())({...n,container:s.current,customType:{m3u8:(t,n)=>function(e,t,n){if(Mu.isSupported()){n.hls&&n.hls.destroy();const r=new Mu;r.on(Mu.Events.MANIFEST_PARSED,(function(e,t){})),r.on(Mu.Events.ERROR,(function(e,t){})),r.on(Mu.Events.MEDIA_ATTACHED,(function(){})),r.loadSource(t),r.attachMedia(e),n.hls=r,n.on("destroy",(()=>{r.destroy(),n.hls=null}))}else e.canPlayType("application/vnd.apple.mpegurl")?e.src=t:n.notice.show="Unsupported playback format: m3u8"}(t,n,e)}});return r&&"function"===typeof r&&r(e),a&&"function"===typeof a&&a(e),l(e),()=>{e&&e.destroy&&e.destroy(!1)}}),[n.url]),(0,la.jsx)("div",{ref:s,...i})}Mu.defaultConfig=void 0;const Nu=function(e){let{episodeId:n}=e;const[r,a]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)([0]);return(0,t.useEffect)((()=>{const e="https://api-shig.vercel.app/anime/gogoanime/watch/".concat(n);fetch(e).then((e=>e.json())).then((e=>{const t=e.sources;if(t&&t.length>0){l(t);const e=t[c].url;s(e)}})).catch((e=>console.error("Error",e)))}),[n,c]),(0,la.jsx)("div",{className:"vidstream",children:i?(0,la.jsx)("div",{children:(0,la.jsx)(Fu,{className:"artplayer",option:{url:i,autoSize:!1,fullscreen:!0,fullscreenWeb:!1,setting:!0,quality:o.map(((e,t)=>({default:t===c,html:" ".concat(e.quality),url:e.url})))},style:{}})}):(0,la.jsx)("div",{className:"artplayerframe"})})};const Bu=function(){const{id:e}=ee(),{epParam:n}=ee(),[r,a]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{const t="https://api-shig.vercel.app/anime/gogoanime/info/".concat(e);fetch(t).then((e=>e.json())).then((e=>{const t=e.episodes,r=e;l(r),a(t),s(n||t[0].id),console.log(r)})).catch((e=>console.error("Error",e))).finally((()=>{p(!1)}))}),[e]),f?(0,la.jsxs)("div",{children:[(0,la.jsx)(ca,{}),(0,la.jsx)(Nu,{})]}):r?(0,la.jsxs)("div",{children:[(0,la.jsx)(ca,{}),(0,la.jsx)(Nu,{episodeId:i}),(0,la.jsxs)("div",{className:"info",children:[(0,la.jsx)("h3",{children:o.title}),o.description?d?(0,la.jsx)("p",{children:o.description}):(0,la.jsxs)("p",{children:[o.description.slice(0,100),"..."]}):null,d?(0,la.jsx)("button",{className:"show",onClick:()=>h(!1),children:"Show Less"}):(0,la.jsx)("button",{className:"show",onClick:()=>h(!0),children:"See More"})]}),(0,la.jsxs)("div",{className:"buttonBox",children:[(0,la.jsxs)("h3",{children:["Episodes",(0,la.jsx)("br",{})]}),(0,la.jsx)("div",{className:"buttonContainer",children:r&&r.map(((t,n)=>(0,la.jsx)("div",{children:(0,la.jsxs)(xe,{to:"/watch/".concat(e,"/").concat(t.id,"/"),className:"epButton ".concat(t.id===i?"selected":""),onClick:()=>{return e=t.id,s(e),void u(e);var e},children:["E",n+1," "]})},t.id)))})]})]}):(0,la.jsxs)("div",{children:[(0,la.jsx)("div",{className:"nav",children:(0,la.jsx)("strong",{className:"minazuki",children:"Minazuki"})}),(0,la.jsxs)("div",{className:"error",children:[(0,la.jsx)("img",{src:"\\anya.gif",alt:""}),(0,la.jsx)("p",{children:(0,la.jsxs)("span",{className:"not-found-text",children:[(0,la.jsx)("i1",{children:"Oh no!"})," It seems you've stumbled upon the mysterious ",(0,la.jsx)("i",{children:"404 - Not Found"})," territory. The page you seek is elusive, lost in the digital abyss. Take a moment to retrace your steps or return to the homepage. For any assistance, our support team is ready to guide you through this virtual maze."]})})]})]})};const Uu=function(){const e=()=>(0,la.jsxs)("div",{children:[(0,la.jsx)("div",{className:"nav",children:(0,la.jsx)("strong",{className:"minazuki",children:"Minazuki"})}),(0,la.jsxs)("div",{className:"error",children:[(0,la.jsx)("img",{src:"\\anya.gif",alt:""}),(0,la.jsx)("p",{children:(0,la.jsxs)("span",{className:"not-found-text",children:[(0,la.jsx)("i1",{children:"Oh no!"})," It seems you've stumbled upon the mysterious ",(0,la.jsx)("i",{children:"404 - Not Found"})," territory. The page you seek is elusive, lost in the digital abyss. Take a moment to retrace your steps or return to the homepage. For any assistance, our support team is ready to guide you through this virtual maze."]})})]})]});return(0,la.jsx)("div",{children:(0,la.jsx)(we,{children:(0,la.jsxs)(ge,{children:[(0,la.jsx)(pe,{path:"/",element:(0,la.jsx)(ca,{})}),(0,la.jsx)(pe,{path:"/watch/:id",element:(0,la.jsx)(Bu,{})}),(0,la.jsx)(pe,{path:"/watch/:id/:epParam",element:(0,la.jsx)(Bu,{})}),(0,la.jsx)(pe,{path:"*",element:(0,la.jsx)(e,{})})]})})})},ju=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:i,getTTFB:s}=t;n(e),r(e),a(e),i(e),s(e)}))};a.createRoot(document.getElementById("root")).render((0,la.jsx)(t.StrictMode,{children:(0,la.jsx)(Uu,{})})),ju()})()})();
//# sourceMappingURL=main.2eb65c77.js.map